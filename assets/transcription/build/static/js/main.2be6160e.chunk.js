(this.webpackJsonptranscription=this.webpackJsonptranscription||[]).push([[0],{116:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),c=n(15),o=n.n(c),s=(n(116),n(8)),l=n(19),u=n.n(l),d=n(33),j=n(225),p=n(205),h=n(226),b=n(227),f=n(222),m=n(201),x=n(223),g=n(224),O=n(212),v=n(198),y=n(26),C=n(6),k=n(199),w=new u.a({en:{defaultChunkName:"{0} second chunk"}}),S=function(e){return(t=Math.floor(e))<10?"0".concat(t<0?0:t):t.toString();var t},T=function(e){return"".concat(S(e/3600),":").concat(S(e/60),":").concat(S(e%60),":").concat(S(Math.round(100*(e-Math.floor(e)))))},R=function(e){return e>3600?T(e).substring(0,8):T(e).substring(3,8)},B=function(e){return e.length>0?e[e.length-1].endtimestamp:"00:00:00:00"},N=function(e){return e.length>0?e[e.length-1].endtimeseconds:0},M=function(e,t){for(var n=0;n<e.length;n++)if(t>e[n].starttimeseconds&&t<e[n].endtimeseconds)return e[n]},D=function(e){return e.transcriptions.reduce((function(e,t){return e||""!==t.content}),!1)},F=function(e){return{hours:Number(e.slice(0,2)),minutes:Number(e.slice(3,5)),seconds:Number(e.slice(6,8)),milliseconds:Number(e.slice(9,11))}},P=function(e){return{start:F(e.starttimestamp),end:F(e.endtimestamp)}},W=function(e){return 60*e.hours*60+60*e.minutes+e.seconds},I=function(e){return e.name?e.name:w.formatString(w.defaultChunkName,"".concat(W(F(e.endtimestamp))-W(F(e.starttimestamp))))},L=n(195),A=n(197),z=n(1),E=function(e){var t=e.title,n=e.children,r=e.contentStyle,i=e.cardStyle;return Object(z.jsx)(L.a,{style:Object(C.a)({},i),variant:"outlined",children:Object(z.jsxs)(A.a,{style:Object(C.a)({},r),children:[n,Object(z.jsx)(v.a,{variant:"subtitle1",component:"div",children:t})]})})},H=Object(k.a)({titleContainer:{fontSize:"1.2rem",position:"relative"}}),V=function(e){var t=e.chunk,n=e.children,r=e.style,i=e.transcriptionIcon,a=H(),c=P(t),o=W(c.end),s=W(c.start);return Object(z.jsx)(E,{title:Object(z.jsx)("div",{children:Object(z.jsxs)("span",{className:a.titleContainer,style:{display:"flex",flexDirection:"column",lineHeight:"normal",margin:"0px 15px"},children:[Object(z.jsxs)("span",{style:{fontWeight:300,overflowWrap:"anywhere",display:"flex",justifyContent:"space-between",lineHeight:"2rem",fontSize:"24px"},children:[I(t),i]}),"".concat(R(s)," - ").concat(R(o))]})}),cardStyle:Object(C.a)(Object(C.a)({},r),{},{position:"relative"}),contentStyle:Object(C.a)(Object(C.a)({},r),{},{padding:"0px 0px 16px 0px"}),children:n})},U=n(22),Y=Object(k.a)((function(e){return{videoContainer:Object(U.a)({height:"50%",minHeight:"300px",maxWidth:"85%"},e.breakpoints.up("md"),{maxWidth:"50%"}),videoPlayerContainer:{margin:"auto"},actionButton:{"&:hover":{background:"#d9534f"}},chunksList:{flexWrap:"nowrap",overflowX:"scroll",height:"100%",marginTop:"5px"},backButton:{background:"transparent",color:"black",fontSize:"16px"},backButtonContainer:{marginTop:"4px",padding:"0px"},onboardingTitle:{margin:0},chunkCardBody:{position:"relative"},newChunkButtonContainer:{position:"fixed",right:0,bottom:0,zIndex:-2}}})),_=function(e){var t=Object(i.useState)(e),n=Object(s.a)(t,2),r=n[0],a=n[1];return[r,function(){return a((function(e){return!e}))},a]},G=function(e,t){var n,r=Object(i.useState)(null!==(n=window.localStorage.getItem(e))&&void 0!==n?n:t),a=Object(s.a)(r,2),c=a[0],o=a[1],l=_(!1),u=Object(s.a)(l,2),d=u[0],j=u[1];if(!d){var p=window.localStorage.getItem(e);j(),p&&o(p)}return[c,Object(i.useCallback)((function(t){"string"==typeof t||null===t?(o(t),window.localStorage.setItem(e,null!==t&&void 0!==t?t:"")):t&&o((function(n){var r=t(n);return window.localStorage.setItem(e,null!==r&&void 0!==r?r:""),r}))}),[e]),Object(i.useCallback)((function(){window.localStorage.removeItem(e),o(void 0)}),[o,e])]},J={userName:void 0,setName:function(){return null},clearName:function(){return null}},q=Object(i.createContext)(J),X=function(e){var t=e.children,n=G("name"),r=Object(s.a)(n,3),a=r[0],c=r[1],o=r[2],l=Object(i.useMemo)((function(){return{userName:a,setName:c,clearName:o}}),[a,c,o]);return Object(z.jsx)(q.Provider,{value:l,children:t})},K=n(202),Q=n(203),Z=n(204),$=n(206),ee=n(62),te=n.n(ee),ne=function(e,t){var n=Object(i.useState)(t);return null!==e&&void 0!==e?e:n},re=n(246),ie=Object(k.a)({progressBarColor:{color:"#f54414"},progressBarRoot:{padding:"0px",width:"96%",transform:"translateX(2%)",height:6},progressBarRail:{height:6},progressBarTrack:{height:6},progressBarThumb:{height:18,width:18,marginTop:-6},progressBarMark:{height:14,marginTop:-3},markedSlider:{margin:0}}),ae=function(e){var t=e.styles,n=Object(d.a)(e,["styles"]),r=ie();return Object(z.jsx)("div",{style:t,children:Object(z.jsx)(re.a,Object(C.a)({classes:{colorPrimary:r.progressBarColor,root:r.progressBarRoot,rail:r.progressBarRail,track:r.progressBarTrack,thumb:r.progressBarThumb,mark:r.progressBarMark,marked:r.markedSlider}},n))})},ce=n(91),oe=function(e,t,n,r,a,c,o){var l=Object(s.a)(t,2),u=l[0],d=l[1],j=Object(i.useState)(!1),p=Object(s.a)(j,2),h=p[0],b=p[1],f=Object(i.useState)(!1),m=Object(s.a)(f,2),x=m[0],g=m[1],O=e.progress,v=e.setProgress,y=e.setProgressWithVideoUpdate;Object(i.useEffect)((function(){h&&n.current&&r(n.current.getDuration())}),[r,n,h]);var C=Object(i.useMemo)((function(){return{playing:!x&&u,progressInterval:100,onProgress:function(e){var t=e.played;return v(t)},onReady:function(){return b(!0)},onEnded:function(){return d(!1)}}}),[x,u,d,v]),k=Object(ce.a)((function(e){return y(e/100)}),10),w=function(e,t){var n=Object(i.useState)(e),r=Object(s.a)(n,2),a=r[0],c=r[1],o=Object(i.useCallback)((function(e){c(e),t(e)}),[c,t]);return{value:a,setWithoutVideoUpdate:c,setWithVideoUpdate:o}}(100*O,k),S=w.value,T=w.setWithVideoUpdate,R=w.setWithoutVideoUpdate;Object(i.useEffect)((function(){R(100*O)}),[O,R]);var B=Object(i.useMemo)((function(){return{value:S,min:100*a.start,max:100*a.end,step:1e-4,onChange:function(e,t){c&&c(),g(!0),T(t)},onChangeCommitted:function(e,t){g(!1)}}}),[S,a,c,T]);return Object(i.useEffect)((function(){O>a.end+1e-4?o&&!x?y(a.start):(y(a.end),d(!1)):O<a.start-1e-4&&y(a.start+.1)}),[O,u,d,a.end,a.start,o,y,x]),{playerProps:C,progressBarProps:B,showControls:!0,isPlaying:u,toggleIsPlaying:function(){return d((function(e){return!e}))}}},se=n(245),le=function(e){var t=e.children,n=e.open,r=e.value;return Object(z.jsx)(se.a,{open:n,enterTouchDelay:0,placement:"top",title:r,children:t})},ue=Object(k.a)((function(e){return{videoControlsContainer:{display:"flex",left:"50%",position:"absolute",bottom:"50%",transform:"translate(-50%, 50%)"},videoPlayerButton:{borderRadius:"8px"},videoControlsRewindButtonsContainer:Object(U.a)({position:"absolute",bottom:-25},e.breakpoints.up("lg"),{bottom:-10}),videoControlsRewindButtonsContainerRight:Object(U.a)({right:"180px"},e.breakpoints.up("lg"),{right:"130px"}),videoControlsRewindButtonsContainerLeft:Object(U.a)({left:"180px"},e.breakpoints.up("lg"),{left:"130px"}),roundButton:Object(U.a)({borderRadius:"50%",borderWidth:"4px",width:"128px",height:"128px",color:"white",display:"relative"},e.breakpoints.up("lg"),{borderRadius:"10px",width:"64px",height:"64px"}),videoPlayerContainer:{position:"relative",width:"100vw",top:0,right:0,left:0},progressBarContainer:{left:"0",bottom:"0",marginBottom:"-39px",transform:"translateY(calc(-100% - 16px))",width:"100%"},progressBarColor:{color:"#f54414"},progressBarRoot:{padding:"0px",width:"96%",transform:"translateX(2%)",height:4},progressBarRail:{height:4},progressBarTrack:{height:4},progressBarThumb:{height:12,marginTop:-4},progressBarMark:{height:10,marginTop:-3}}})),de=function(e){var t=e.url,n=e.playerRef,r=e.controller,a=e.sliderMarks,c=e.progressState,o=e.onProgressDrag,l=e.slider,u=e.loop,d=ue(),j=ne(null===r||void 0===r?void 0:r.durationState,0),h=Object(s.a)(j,2),b=h[0],f=h[1],x=c.progress,g=c.setProgressWithVideoUpdate,O=ne(null===r||void 0===r?void 0:r.playingState,!1),y=ne(null===r||void 0===r?void 0:r.splitState,{start:0,end:1}),k=Object(s.a)(y,1)[0],w=oe(c,O,n,f,k,o,u),S=w.playerProps,T=w.progressBarProps,B=w.showControls,N=w.isPlaying,M=w.toggleIsPlaying,D=Object(i.useCallback)((function(e){return R((e/100-k.start===0?0:e/100-k.start)*b)}),[b,k.start]),F=Object(i.useCallback)((function(){b&&g((function(e){return e+5/b}))}),[g,b]),P=Object(i.useCallback)((function(){b&&g((function(e){return e-5/b}))}),[g,b]);return Object(z.jsxs)(m.a,{container:!0,item:!0,className:d.videoPlayerContainer,xs:12,alignContent:"center",alignItems:"center",children:[Object(z.jsx)(te.a,Object(C.a)({url:t,ref:n,width:"100%",height:"100%",loop:u},S)),B&&Object(z.jsxs)("div",{className:d.videoControlsContainer,children:[Object(z.jsx)("div",{className:"".concat(d.videoControlsRewindButtonsContainer," ").concat(d.videoControlsRewindButtonsContainerRight),children:Object(z.jsx)(K.a,{disableRipple:!0,variant:"outlined",color:"secondary",className:" ".concat(d.roundButton),onClick:P,children:Object(z.jsx)(Q.a,{style:{fontSize:60}})})}),Object(z.jsx)(K.a,{disableRipple:!0,variant:"contained",color:"primary",className:d.videoPlayerButton,onClick:M,children:N&&Object(z.jsx)(Z.a,{style:{fontSize:60}})||Object(z.jsx)(p.a,{style:{fontSize:60}})}),Object(z.jsx)("div",{className:"".concat(d.videoControlsRewindButtonsContainer," ").concat(d.videoControlsRewindButtonsContainerLeft),children:Object(z.jsx)(K.a,{onClick:F,variant:"outlined",color:"secondary",disableRipple:!0,className:"".concat(d.roundButton),children:Object(z.jsx)($.a,{style:{fontSize:60}})})})]}),l||Object(z.jsxs)("div",{className:d.progressBarContainer,children:[Object(z.jsx)(v.a,{variant:"caption",style:{margin:"8px",color:"#FFFFFF"},children:b&&"".concat(R((x-k.start)*b)," / ").concat(R((k.end-k.start)*b))}),Object(z.jsx)(ae,Object(C.a)({valueLabelDisplay:"auto",valueLabelFormat:D,ValueLabelComponent:le,marks:a||[]},T))]})]})},je=function(e){var t=Object(i.useRef)(null),n=Object(i.useCallback)((function(e){var n,r,i=null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.getSecondsLoaded();i&&i>0&&(null===(r=t.current)||void 0===r||r.seekTo(e,"fraction"))}),[]),r=Object(i.useState)(0),a=Object(s.a)(r,2),c=a[0],o=a[1],l=Object(i.useState)({start:0,end:1}),u=Object(i.useCallback)((function(e){"number"===typeof e?(o(e),n(e)):o((function(t){var r=e(t);return n(r),r}))}),[n]),d=Object(i.useState)(0),j=Object(s.a)(d,2),p=j[0],h=j[1],b=Object(i.useState)(null!==e&&void 0!==e&&e);return{progressState:{progress:c,setProgress:o,setProgressWithVideoUpdate:u},splitState:l,playingState:b,duration:p,controller:{durationState:[p,h],playingState:b,splitState:l},playerRef:t}},pe=n(242),he=function(e,t){return e.reduce((function(e,t,n,r){return n+1<r.length?e.concat([[t,r[n+1]]]):e}),[]).map((function(e){return t(e[0],e[1])}))},be=function(e,t){return e.filter(t).length>0},fe=function(e){return Object(i.useCallback)((function(t,n,r){e((function(e){return e.map((function(e){var i,a;return e.id===t.id?Object(C.a)(Object(C.a)({},(null===(i=e.review)||void 0===i?void 0:i.selectedtranscription)===(null===(a=function(e,t){return e.transcriptions.filter((function(e){return e.creatorid===t}))[0]}(e,r))||void 0===a?void 0:a.id)&&""===n?function(e){return Object(C.a)(Object(C.a)({},e),{},{review:void 0})}(e):e),{},{transcriptions:be(e.transcriptions,(function(e){return e.creatorid===r}))?""===n?e.transcriptions.filter((function(e){return e.creatorid!==r})):e.transcriptions.map((function(e){return e.creatorid===r?Object(C.a)(Object(C.a)({},e),{},{content:n,updatedat:new Date}):e})):e.transcriptions.concat(""===n?[]:[{creatorid:r,content:n,id:Object(pe.a)(),updatedat:new Date}])}):e}))}))}),[e])},me=function(e){return Object(i.useCallback)((function(t,n,r,i,a){e((function(e){var c,o,s=(c=t,(o=e).reduce((function(e,t,n){return t.id===c.id?{prev:o[n-1],next:o[n+1]}:e}),{prev:void 0,next:void 0}));return function(e){return e.filter((function(e){return e.endtimeseconds>e.starttimeseconds}))}(e.map((function(e){var i,c;return e.id===t.id?Object(C.a)(Object(C.a)({},a?function(e,t){return""!==e?Object(C.a)(Object(C.a)({},t),{},{name:e}):Object(C.a)(Object(C.a)({},t),{},{name:void 0})}(a,e):Object(C.a)(Object(C.a)({},e),{},{name:void 0})),{},{starttimeseconds:r[0],starttimestamp:T(r[0]*n),endtimeseconds:r[1],endtimestamp:T(r[1]*n),updatedat:new Date}):e.id===(null===(i=s.next)||void 0===i?void 0:i.id)?Object(C.a)(Object(C.a)({},e),{},{starttimeseconds:r[1],starttimestamp:T(r[1]*n),updatedat:new Date}):e.id===(null===(c=s.prev)||void 0===c?void 0:c.id)?Object(C.a)(Object(C.a)({},e),{},{endtimeseconds:r[0],endtimestamp:T(r[0]*n),updatedat:new Date}):e})).concat(s.prev||0===r[0]?[]:[{starttimestamp:T(0),starttimeseconds:0,endtimestamp:T(r[0]*n),endtimeseconds:r[0],creatorid:i,updatedat:new Date,id:Object(pe.a)(),transcriptions:[]}])).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds}))}))}),[e])},xe=Object(i.createContext)([[],function(){return null}]),ge={ChunksProvider:function(e){var t=e.state,n=e.children;return Object(z.jsx)(xe.Provider,{value:t,children:n})},useChunksState:function(){return Object(i.useContext)(xe)}},Oe=Object(k.a)({button:function(e){return{backgroundColor:"#d9534f",color:"#FFFFFF",lineHeight:"34px",minHeight:e?"4.5rem":"3.5rem",marginLeft:"1em",marginRight:"1em",width:e?"4.5rem":"inherit",borderRadius:e?"50%":"8px",padding:e?"4px":"3px 8px 3px 8px",textTransform:"none","&:hover":{backgroundColor:"#ff7570"},"&:disabled":{backgroundColor:"#fabbb9"}}}}),ve=function(e){var t=e.children,n=e.round,r=e.styles,i=Object(d.a)(e,["children","round","styles"]),a=function(e){return Object(k.a)({overrideStyles:Object(C.a)({},e)})}(r)(),c=Oe(!!n);return Object(z.jsx)(K.a,Object(C.a)(Object(C.a)({disableRipple:!0,className:"".concat(c.button," ").concat(a.overrideStyles," ").concat(i.style)},i),{},{children:t}))},ye=n(239),Ce=n(241),ke=n(207),we=n(208),Se=n(210),Te=n(209),Re=n(98),Be=a.a.forwardRef((function(e,t){var n=e.children,r=e.style;return Object(z.jsx)(Re.a,{ref:t,elevation:0,style:r,children:n})})),Ne=Object(k.a)((function(e){return{modal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},modalContentBox:{},modalPaper:Object(U.a)({maxWith:"100%"},e.breakpoints.up("md"),{maxWidth:"70%"})}})),Me=function(e){var t=e.children,n=e.header,r=e.exit,i=Object(d.a)(e,["children","header","exit"]),a=Ne();return Object(z.jsx)(Ce.a,Object(C.a)(Object(C.a)({className:a.modal},i),{},{children:Object(z.jsx)(ke.a,{style:{outline:"none"},className:a.modalPaper,children:Object(z.jsxs)(Be,{children:[n&&Object(z.jsx)(we.a,{children:Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:"8px"},children:[Object(z.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",width:"80%"},children:n}),Object(z.jsx)(K.a,{onClick:r,style:{marginRight:"-20px"},children:Object(z.jsx)(Te.a,{})})]})}),Object(z.jsx)(Se.a,{style:{marginTop:"8px"}}),Object(z.jsx)("div",{className:a.modalContentBox,children:t})]})})}))};r=window.location.href.split("apikey=")[1].split("&")[0];var De;De=decodeURIComponent(window.location.href.split("apiurl=")[1]);var Fe,Pe=r,We=function(e){var t=1===e["data-index"];return Object(z.jsx)("span",Object(C.a)(Object(C.a)({},e),{},{style:Object(C.a)(Object(C.a)({},e.style),{},{transform:t?"0":"translateY(14px)",backgroundColor:t?"#d9534f":"#f77965"}),children:t?null:Object(z.jsx)("div",{style:{height:"14px",width:"4px",transform:"translateY(-9px)",backgroundColor:"#f77965"}})}))},Ie=function(e){var t=e.story_id,n=e.chunk,r=e.storyDuration,a=e.croppedSplitState,c=je(),o=c.progressState,l=c.controller,u=c.playerRef,d=Object(i.useState)([0,0]),j=Object(s.a)(d,2),p=j[0],h=j[1],b=Object(s.a)(a,2),f=b[0],m=b[1],x=o.setProgressWithVideoUpdate;return Object(i.useEffect)((function(){x(n.starttimeseconds);var e=n.starttimeseconds-2/r,t=n.endtimeseconds+2/r;h([e<0?0:e,t>1?1:t]),m([n.starttimeseconds,n.endtimeseconds])}),[n.starttimeseconds,n.endtimeseconds,r,x,m]),Object(z.jsx)("div",{children:Object(z.jsx)(de,{progressState:o,url:"".concat(De,"/api/watch/getvideo/").concat(t),controller:l,playerRef:u,slider:Object(z.jsx)(ae,{value:[100*f[0],100*o.progress,100*f[1]],min:100*p[0],max:100*p[1],step:1e-4,ThumbComponent:We,onChange:function(e,t){m([t[0]/100,t[2]/100]),o.setProgressWithVideoUpdate(t[1]/100)}})})})},Le=function(e){var t=Object(s.a)(e.nameState,2),n=t[0],r=t[1];return Object(z.jsx)(ye.a,{variant:"outlined",label:"Edit Name",style:{marginTop:"8px",width:"100%"},value:n,onChange:function(e){return r(e.target.value)}})},Ae=function(e){var t=e.story_id,n=e.chunk,r=e.exit,a=e.storyDuration,c=Object(i.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],d=ge.useChunksState(),j=Object(s.a)(d,2)[1];Object(i.useEffect)((function(){n&&u(n.name?n.name:"")}),[n]);var p=me(j),h=Object(i.useState)([0,0]),b=Object(s.a)(h,2),f=b[0],m=b[1],x=Object(i.useContext)(q).userName;return Object(z.jsx)(Me,{exit:function(){n&&x&&p(n,a,f,x,l),r()},open:void 0!==n,header:Object(z.jsx)(Le,{nameState:[l,u]}),children:Object(z.jsx)("div",{style:{paddingBottom:"24px"},children:n&&Object(z.jsx)(Ie,{story_id:t,croppedSplitState:[f,m],storyDuration:a,chunk:n})})})},ze=function(e){var t=e.url,n=e.time,r=Object(i.useRef)(null);return Object(z.jsx)(te.a,{crossOrigin:"anonymous",url:t,width:"100%",height:"100%",playing:!1,ref:r,id:"video-thumbnail-player",onReady:function(){var e;null===(e=r.current)||void 0===e||e.seekTo(n,"fraction")}})},Ee=n(213),He=Object(k.a)({backButton:{position:"fixed",top:"8px",left:"8px"}}),Ve=function(e){var t=e.action,n=He();return Object(z.jsx)(O.a,{onClick:t,className:n.backButton,children:Object(z.jsx)(Ee.a,{fontSize:"large"})})},Ue=n(66);!function(e){e[e.True=0]="True"}(Fe||(Fe={}));var Ye=function(e,t){var n=Object(i.useState)(Fe.True),r=Object(s.a)(n,2),a=r[0],c=r[1],o=Object(i.useCallback)((function(){a!==Fe.True&&(e.apply(void 0,Object(Ue.a)(a)),c(Fe.True))}),[a,e]);return{attemptingActionWith:a,cancelAction:function(){return c(Fe.True)},attemptAction:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,r)?c(r):e.apply(void 0,r)},confirmAction:o}},_e=n(214),Ge=function(e){var t=e.message;return Object(z.jsx)("h2",{style:{margin:0},children:Object(z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(z.jsx)(_e.a,{style:{marginRight:"8px"},fontSize:"large"}),t]})})},Je=function(e){var t=e.actionControls,n=e.warningMessage,r=e.children,i=t.attemptingActionWith,a=t.cancelAction,c=t.confirmAction;return Object(z.jsx)(Me,{open:i!==Fe.True,exit:a,header:Object(z.jsx)(Ge,{message:n}),children:Object(z.jsxs)("div",{style:{padding:"8px"},children:[i!==Fe.True&&r.apply(void 0,Object(Ue.a)(i)),Object(z.jsx)("br",{}),Object(z.jsx)(Se.a,{variant:"fullWidth",style:{marginLeft:"-8px",marginRight:"-8px"}}),Object(z.jsx)("div",{style:{display:"flex",justifyContent:"end",margin:"4px",marginBottom:"0"},children:Object(z.jsx)(K.a,{variant:"text",onClick:c,children:Object(z.jsx)(v.a,{variant:"subtitle1",children:"Confirm"})})})]})})},qe=function(e){var t=e.chunk,n=e.exit;return Object(z.jsx)(Me,{open:void 0!==t,header:Object(z.jsx)("h2",{style:{margin:0,overflowWrap:"anywhere"},children:'Transcriptions for "'.concat(t&&I(t),'"')}),exit:n,children:Object(z.jsx)("div",{style:{overflow:"scroll"},children:null===t||void 0===t?void 0:t.transcriptions.map((function(e){return Object(z.jsx)("div",{style:{margin:"8px"},children:Object(z.jsx)(E,{title:Object(z.jsx)("b",{children:e.creatorid}),contentStyle:{whiteSpace:"pre",marginBottom:"-10px"},children:e.content},e.id)})}))})})},Xe=function(e){var t=e.children,n=e.style,r=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),[]),Object(z.jsx)("div",{ref:r,style:Object(C.a)({},n),children:t})},Ke=n(216),Qe=n(217),Ze=n(218),$e=n(97),et=n(215),tt=a.a.forwardRef((function(e,t){var n=e.anchor,r=e.show,i=e.menuItems;return Object(z.jsx)($e.a,{ref:t,anchorEl:n,open:r,children:i.map((function(e,t){return Object(z.jsx)(et.a,{onClick:e.handler,children:e.content},t)}))})})),nt=function(e){var t=e.menuItems,n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],c=r[1],o=Object(i.useRef)(null);return Object(z.jsxs)("div",{style:{position:"relative",top:0,right:0,display:"flex",flexDirection:"row",alignSelf:"flex-start"},children:[Object(z.jsx)(Ke.a,{onClickAway:function(){return c(!1)},children:Object(z.jsx)(Qe.a,{style:{padding:4},onClick:function(){return c(!0)},ref:o,children:Object(z.jsx)(Ze.a,{})})}),Object(z.jsx)(tt,{show:a,anchor:o.current,menuItems:t})]})},rt=n(219),it=Object(k.a)({loadingModal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"}}),at=function(e){var t=e.open,n=it();return Object(z.jsx)(Ce.a,{open:t,className:n.loadingModal,children:Object(z.jsx)(ke.a,{style:{outline:"none",display:"flex",justifyContent:"center"},children:Object(z.jsx)(rt.a,{})})})},ct=n(248),ot=n(220),st=n(244),lt=n(221),ut=function(e){var t=Object(i.useState)([0,null]),n=Object(s.a)(t,2),r=Object(s.a)(n[0],2),a=r[0],c=r[1],o=n[1],l=Object(i.useCallback)((function(){o([0,null])}),[o]),u=Object(i.useMemo)((function(){return a===e.length-1}),[a,e.length]);return{page:a,direction:c,goTo:function(t){return"next"===t&&a<e.length-1?o((function(e){return[Object(s.a)(e,1)[0]+1,"next"]})):"prev"===t&&a>0?o((function(e){return[Object(s.a)(e,1)[0]-1,"prev"]})):null},reset:l,lastPage:u}},dt=Object(k.a)((function(e){return{contentContainer:{paddingBottom:"32px",height:"40vh",display:"flex",flexDirection:"column"},instructionsContainer:{flexGrow:4},divider:{marginBottom:"16px"},centerVertically:{position:"relative",top:"40%",transform:"translateY(-50%)",textAlign:"center"},buttonsContainer:{display:"flex",justifyContent:"space-between",marginBottom:"-8px"},stepIcon:{fill:"#e53935"},stepText:{fill:"#ffffff"},stepCompleted:{fill:"#e53935"},stepLabel:{fontSize:"12px"}}})),jt=function(e){var t=e.show,n=e.dismiss,r=e.title,a=e.steps,c=e.stepsLabels,o=e.startButtonContent,s=ut(a),l=s.page,u=s.goTo,d=s.reset,j=Object(i.useCallback)((function(){d(),n()}),[n,d]),p=Object(i.useCallback)((function(){l===a.length-1?j():u("next")}),[l,u,j,a.length]),h=Object(i.useCallback)((function(){u("prev")}),[u]),b=dt();return Object(z.jsx)(Me,{header:r,open:t,exit:j,children:Object(z.jsxs)("div",{className:b.contentContainer,children:[Object(z.jsx)(ct.a,{activeStep:l,alternativeLabel:!0,children:a.map((function(e,t){return Object(z.jsx)(ot.a,{children:Object(z.jsx)(st.a,{StepIconProps:{classes:{active:b.stepIcon,text:b.stepText,completed:b.stepCompleted}},children:c[t]})},t)}))}),Object(z.jsx)(we.a,{className:b.instructionsContainer,children:Object(z.jsx)("div",{className:b.centerVertically,children:Object(z.jsx)(v.a,{variant:"h5",children:a[l]})})}),Object(z.jsxs)(we.a,{className:b.buttonsContainer,children:[0===l?Object(z.jsx)("div",{}):Object(z.jsxs)(K.a,{onClick:h,variant:"outlined",size:"large",color:"secondary",children:[Object(z.jsx)(Ee.a,{})," Previous"]}),Object(z.jsx)(K.a,{onClick:p,variant:"contained",disableElevation:!0,size:"large",color:"secondary",children:l===a.length-1?o:Object(z.jsxs)(z.Fragment,{children:["Next ",Object(z.jsx)(lt.a,{})]})})]})]})})},pt=new u.a({en:{instructionsOne:"You are about to chunk the video. The aim of chunking is to make Transcribing easy.",instructionOneStepLabel:"Faster Transcribing",instructionsTwo:"Rather than transcribing the entire video at once, you will break the video down into smaller chunks, which you will transcribe individually.",instructionTwoStepLabel:"Small chunks",instructionsThree:"You should aim to have only one person speaking in each chunk. Create a new chunk when there is a change in who is talking, there is a gap in the talking, or a person begins/ends talking.",instructionThreeStepLabel:"One Speaker per chunk",instructionsFour:"To create a chunk, press the 'Add' button in the bottom right corner. The time that you press the 'Add' button in the video will be the end of the new chunk.",instructionFourStepLabel:"Push 'Add' Button",instructionsTitle:"Chunking Instructions",startChunking:"Start Chunking",attemptDeleteWarningTitle:"This chunk has a transcription",attemptDeleteWarningBody:"Attempting to delete chunk {0}, which has a transcription saved to it. Are you sure you want to delete it?",attemptNewChunkTitle:"The enclosing chunk has a transcription",attemptNewChunkBody:'Creating a new chunk here will delete the transcriptions on the enclosing chunk, "{0}". Are you sure you want to discard these transcriptions?',delete:"Delete",edit:"Edit",viewTranscriptions:"View Transcriptions",newChunk:"New Chunk",doneCard:"Done Card"}}),ht=function(){var e=Object(y.a)(),t=Object(f.a)(e.breakpoints.up("md"));return console.log(t),t?3.5:2.5},bt=function(e){var t=e.atExit,n=e.story_id,r=e.onboarding,a=ge.useChunksState(),c=Object(s.a)(a,2),o=c[0],l=c[1];Object(i.useEffect)((function(){l((function(e){return e}))}),[l]);var u=je(),f=u.progressState,y=u.playingState,k=u.duration,w=u.controller,S=u.playerRef,R=f.progress,F=f.setProgressWithVideoUpdate,P=Object(s.a)(y,2)[1],W=Object(i.useMemo)((function(){return function(e){return e.map((function(e){return{value:100*e.endtimeseconds}}))}(o)}),[o]),L=Object(i.useContext)(q).userName,A=function(e){return Object(i.useCallback)((function(t){e((function(e){return t(e),e}))}),[e])}(l),H=function(e){return Object(i.useCallback)((function(t){return e((function(e){return he(e.filter((function(e){return e.id!==t.id})),(function(e,t){return e.endtimeseconds!==t.starttimeseconds?Object(C.a)(Object(C.a)({},t),{},{starttimeseconds:e.endtimeseconds,starttimestamp:e.endtimestamp,id:Object(pe.a)(),updatedat:new Date,transcriptions:[]}):t})).concat((n=e.filter((function(e){return e.id!==t.id}))[0],n?0===n.starttimeseconds?[n]:[Object(C.a)(Object(C.a)({},n),{},{starttimeseconds:0,starttimestamp:"00:00:00:00",id:Object(pe.a)(),updatedat:new Date,transcriptions:[]})]:[])).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds}));var n}))}),[e])}(l),U=function(e){return Object(i.useCallback)((function(t,n,r){e((function(e){if(function(e,t,n){return 0===t||t>n||e.reduce((function(e,n){return e||n.endtimeseconds===t||n.starttimeseconds===t}),!1)}(e,t,n))return e;var i=M(e,t);return void 0!==i?e.filter((function(e){return e.id!==i.id})).concat([{starttimestamp:i.starttimestamp,starttimeseconds:i.starttimeseconds,endtimestamp:T(t*n),endtimeseconds:t,creatorid:r,updatedat:new Date,id:Object(pe.a)(),transcriptions:[]},{starttimestamp:T(t*n),starttimeseconds:t,endtimestamp:i.endtimestamp,endtimeseconds:i.endtimeseconds,creatorid:r,updatedat:new Date,id:Object(pe.a)(),transcriptions:[]}]).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds})):e.concat([{starttimestamp:B(e),endtimestamp:T(t*n),starttimeseconds:N(e),endtimeseconds:t,creatorid:r,updatedat:new Date,id:Object(pe.a)(),transcriptions:[]}])}))}),[e])}(l),_=Y(),G=Object(i.useState)(void 0),J=Object(s.a)(G,2),X=J[0],K=J[1];Object(i.useEffect)((function(){void 0!==X&&R>X.endtimeseconds&&(K(void 0),P(!1))}),[R,X,o,P]);var Q=Object(i.useCallback)((function(e,t,n){(null===t||void 0===t?void 0:t.id)===e.id&&n?P(!1):(P(!0),K(e),F(e.starttimeseconds))}),[F,P]),Z=Object(i.useState)(void 0),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Ye((function(e,t,n,r){return U(t,n,r)}),(function(e,t){var n=M(e,t);return void 0!==n&&D(n)})),re=ne.attemptAction,ie=Object(d.a)(ne,["attemptAction"]),ae=Ye(H,(function(e){return D(e)})),ce=ae.attemptAction,oe=Object(d.a)(ae,["attemptAction"]),se=Object(i.useState)(void 0),le=Object(s.a)(se,2),ue=le[0],be=le[1],fe=Object(i.useMemo)((function(){return{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),[]),me=Object(i.useRef)({backgroundColor:"green",height:"100%",padding:"0px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",color:"white"}),xe=Object(i.useRef)({margin:"8px",transform:"translateY(8px)",height:"calc(100% - 16px)"}),Oe=r.showOnboardingModal,ye=r.dismissOnboardingModal,Ce=Object(i.useCallback)((function(){return K(void 0)}),[K]);return Object(z.jsxs)(m.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",style:{height:"85%"},children:[Object(z.jsx)(m.a,{item:!0,container:!0,alignContent:"center",alignItems:"center",className:_.videoContainer,children:Object(z.jsx)(de,{controller:w,progressState:f,playerRef:S,url:"".concat(De,"/api/watch/getvideo/").concat(n),sliderMarks:W,onProgressDrag:Ce})}),Object(z.jsx)(m.a,{item:!0,container:!0,xs:12,style:{height:"40%",margin:"5px"},children:Object(z.jsx)(x.a,{className:_.chunksList,cellHeight:"auto",cols:ht(),children:o.map((function(e){return Object(z.jsx)(g.a,{style:{margin:"0px 4px 4px 2px"},children:Object(z.jsx)(Xe,{children:Object(z.jsx)(V,{chunk:e,transcriptionIcon:Object(z.jsx)(nt,{menuItems:[{content:pt.delete,handler:function(){return function(e){A((function(t){t.forEach((function(t){return t.id===e.id&&ce(t)}))}))}(e)}}].concat(0!==e.transcriptions.length?[{content:pt.viewTranscriptions,handler:function(){return be(e)}}]:[])}),children:Object(z.jsxs)("div",{className:_.chunkCardBody,children:[Object(z.jsx)(ze,{url:"".concat(De,"/api/watch/getvideo/").concat(n),time:e.starttimeseconds+(e.endtimeseconds-e.starttimeseconds)/2}),Object(z.jsx)(ve,{round:!0,color:"primary",style:fe,onClick:function(){return Q(e,X,y[0])},children:(null===X||void 0===X?void 0:X.id)===e.id&&y[0]?Object(z.jsx)(j.a,{style:{fontSize:40}}):Object(z.jsx)(p.a,{style:{fontSize:40}})})]})})})},e.id)})).concat(N(o)>.75?[Object(z.jsx)(g.a,{onClick:function(){1!==N(o)&&L&&U(1,k,L),t()},children:Object(z.jsx)(Xe,{style:{height:"103%",marginTop:"-14px"},children:Object(z.jsx)(E,{contentStyle:me.current,cardStyle:xe.current,children:Object(z.jsx)(h.a,{style:{fontSize:"60"}})})})},pt.doneCard)]:[])})}),Object(z.jsx)("div",{children:Object(z.jsx)("div",{className:_.newChunkButtonContainer,children:Object(z.jsx)(O.a,{onClick:function(){L&&re(o,R,k,L)},color:"primary",style:{margin:"10px",bottom:"70px"},children:Object(z.jsx)(b.a,{})})})}),Object(z.jsx)(at,{open:0===k}),Object(z.jsx)(jt,{show:Oe,dismiss:ye,title:Object(z.jsx)("h2",{className:_.onboardingTitle,children:pt.instructionsTitle}),steps:[pt.instructionsOne,pt.instructionsTwo,pt.instructionsThree,pt.instructionsFour],stepsLabels:[pt.instructionOneStepLabel,pt.instructionTwoStepLabel,pt.instructionThreeStepLabel,pt.instructionFourStepLabel],startButtonContent:Object(z.jsx)("div",{children:pt.startChunking})}),Object(z.jsx)(Ae,{story_id:n,chunk:ee,exit:function(){return te(void 0)},storyDuration:k}),Object(z.jsx)(Je,{actionControls:oe,warningMessage:Object(z.jsx)("div",{children:pt.attemptDeleteWarningTitle}),children:function(){return Object(z.jsx)("div",{style:{overflowWrap:"anywhere"},children:pt.formatString(pt.attemptDeleteWarningBody,(arguments.length<=0?void 0:arguments[0])&&' "'.concat(I(arguments.length<=0?void 0:arguments[0]),'"'))})}}),Object(z.jsx)(Je,{actionControls:ie,warningMessage:Object(z.jsx)("div",{children:pt.attemptNewChunkTitle}),children:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(z.jsx)(v.a,{variant:"body1",children:pt.formatString(pt.attemptNewChunkBody,I(null!==(e=M(n[0],n[1]))&&void 0!==e?e:n[0][0]))})}}),Object(z.jsx)(qe,{chunk:ue,exit:function(){return be(void 0)}}),Object(z.jsx)(Ve,{action:t})]})},ft=n(238),mt=n(249),xt=n(250),gt=n(228),Ot=n(229),vt=a.a.forwardRef((function(e,t){var n=e.className,r=e.context,i=e.actions,a=e.style,c=e.title;return Object(z.jsxs)(L.a,{ref:t,elevation:0,style:a,className:n.card,children:[Object(z.jsx)(gt.a,{className:n.card_image,image:"".concat(De,"/images/event_back.png"),children:Object(z.jsx)("div",{style:{color:"white",textAlign:"center",lineHeight:"130px",fontSize:"3em"},children:c})}),Object(z.jsxs)(A.a,{className:n.content,children:[r," "]}),Object(z.jsx)(Se.a,{}),Object(z.jsx)(Ot.a,{style:{justifyContent:"center"},className:n.actions,children:i})]})})),yt=n(166);var Ct,kt=function(e){return Object(z.jsxs)(ft.a,{display:"flex",alignItems:"center",children:[Object(z.jsx)(ft.a,{width:"100%",mr:1,children:Object(z.jsx)(yt.a,Object(C.a)({variant:"determinate"},e))}),Object(z.jsx)(ft.a,{minWidth:35,children:Object(z.jsx)(v.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},wt="#dddddd",St=Object(k.a)({html:{fontFamily:"'Open Sans', 'Helvetica Neue', sans-serif"},paper:{border:"1px solid ".concat(wt),borderTop:"0",borderTopRightRadius:"0",borderTopLeftRadius:"0",padding:"15px"},stepHeader:{padding:"4px",backgroundColor:"#f5f5f5",border:"1px solid ".concat(wt),borderBottomRightRadius:"0",borderBottomLeftRadius:"0"},card:{border:"1px solid ".concat(wt),borderRadius:"6px",margin:"5px",marginBottom:"20px",minHeight:"320px"},header:{padding:"4px",borderBottomRightRadius:"0",borderBottomLeftRadius:"0",fontFamily:"'Open Sans', 'Helvetica Neue', sans-serif"},card_image:{height:140},content:{display:"flex",flexDirection:"column",flexGrow:1},button:{marginTop:"10px",fontSize:"1.1rem"}}),Tt=new u.a({en:{perform:"Perform {0}"}}),Rt=function(e){var t=e.title,n=e.description,r=e.progress,i=e.onSelect,a=e.enabled,c=St();return Object(z.jsx)(vt,{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",flexGrow:1},className:c,title:t,context:Object(z.jsxs)(ft.a,{style:{marginTop:"8px"},children:[Object(z.jsx)(kt,{value:r,color:"secondary"}),Object(z.jsx)(v.a,{style:{padding:"6px",fontSize:"1.1rem"},children:n})]}),actions:Object(z.jsx)(ft.a,{style:{marginTop:"8px"},children:Object(z.jsx)(K.a,{disabled:!a,onClick:i,children:Object(z.jsx)(v.a,{style:{padding:"6px",fontSize:"1.1rem"},children:Tt.formatString(Tt.perform,t)})})})})},Bt=Object(k.a)({introContainer:{textAlign:"center"},transcriberModal:{display:"flex",flexDirection:"column"}}),Nt=n(247),Mt=a.a.forwardRef((function(e,t){var n=e.placeholder,r=e.buttonText,a=e.classes,c=e.onSubmit,o=Object(i.useState)(null),l=Object(s.a)(o,2),u=l[0],d=l[1];return Object(z.jsxs)("div",{ref:t,children:[Object(z.jsx)(Nt.a,{style:{margin:"8px"},className:a.input,onChange:function(e){return d(e.target.value)},placeholder:n}),Object(z.jsx)(Se.a,{variant:"fullWidth"}),Object(z.jsx)("div",{children:Object(z.jsx)(K.a,{onClick:function(){return u&&c(u)},style:{},children:r})})]})})),Dt=Object(k.a)({modal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},modalContentBox:{padding:"16px"},input:{flex:1,width:"400px",height:"3.5rem",border:"1px solid #cccccc",paddingLeft:"8px",borderRadius:"8px 9px 8px 8px"}}),Ft=function(e){var t=e.show,n=e.setName,r=Dt();return Object(z.jsx)(Me,{open:t,children:Object(z.jsxs)("div",{children:[Object(z.jsx)(v.a,{variant:"h5",style:{padding:"4px",paddingLeft:"4px"},children:"Please enter your name"}),Object(z.jsx)(Se.a,{variant:"fullWidth",style:{}}),Object(z.jsx)("div",{style:{},children:Object(z.jsx)(Mt,{placeholder:"My Name",buttonText:"Start Transcribing",classes:r,onSubmit:n})})]})})},Pt=new u.a({en:{back:"Back",greeting:"Hello {0}",transcriptionFor:"Field Transcription for {0}",notMe:"This is not me!",steps:"There are 3 stages to transcribing, select which stage you are performing"}}),Wt=function(e){var t=e.storyName;return Object(z.jsx)(v.a,{variant:"h4",style:{color:"gray",fontWeight:"lighter",marginTop:"0.4em"},children:Pt.formatString(Pt.transcriptionFor,Object(z.jsx)(ft.a,{component:"span",style:{color:"black"},children:t}))})},It=function(e){var t=e.storyName,n=e.steps,r=e.logOutAction,a=Object(i.useContext)(q),c=a.userName,o=a.setName,s=a.clearName,l=Bt();return Object(z.jsxs)(m.a,{item:!0,xs:9,md:11,children:[Object(z.jsx)(Ft,{setName:o,show:!c}),Object(z.jsxs)(m.a,{item:!0,xs:12,className:l.introContainer,children:[Object(z.jsx)(Wt,{storyName:t}),c&&Object(z.jsx)(mt.a,{onDelete:function(){s(),r()},avatar:Object(z.jsx)(xt.a,{children:c.substring(0,1)}),variant:"outlined",label:c,style:{marginTop:"10px"}})]}),Object(z.jsx)("div",{style:{marginBottom:"16px",marginTop:"16px",textAlign:"center",color:"#333"},children:Pt.steps}),Object(z.jsx)(m.a,{container:!0,spacing:2,direction:"row",justify:"center",alignContent:"flex-start",alignItems:"stretch",children:n.map((function(e){return Object(z.jsx)(m.a,{item:!0,xs:12,md:4,lg:3,style:{display:"flex"},children:Object(z.jsx)(Rt,Object(C.a)({},e))},e.title)}))})]})},Lt=n(230),At=function(e){var t=e.children,n=e.contextMenuItems;return Object(z.jsxs)(m.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[n.length>0&&Object(z.jsx)(O.a,{onClick:n[0].handler,style:{margin:"10px",position:"fixed",backgroundColor:"#aaa",right:"0px",bottom:"0px"},children:Object(z.jsx)(Lt.a,{})}),Object(z.jsx)(m.a,{container:!0,item:!0,xs:12,justify:"center",alignItems:"center",children:t})]})};!function(e){e[e.Dashboard=0]="Dashboard",e[e.Chunking=1]="Chunking",e[e.Transcribing=2]="Transcribing",e[e.Reviewing=3]="Reviewing"}(Ct||(Ct={}));var zt=Ct,Et=new u.a({en:{chunkingDesc:"We need to know when people are talking in the story, so that we can transcribe them.",chunkingTitle:"Chunking",transcriptionDesc:"Writing down exactly what is said in each chunk of the story.",transcriptionTitle:"Transcription",reviewDesc:"Reviewing content is key to making sure we represent participants authentically.",reviewTitle:"Review"}}),Ht=function(e,t){return Object(i.useMemo)((function(){return[{title:Et.chunkingTitle,description:Et.chunkingDesc,progress:t[0].progress,onSelect:function(){return e(zt.Chunking)},enabled:t[0].enabled},{title:Et.transcriptionTitle,description:Et.transcriptionDesc,progress:t[1].progress,onSelect:function(){return e(zt.Transcribing)},enabled:t[1].enabled},{title:Et.reviewTitle,description:Et.reviewDesc,progress:t[2].progress,onSelect:function(){return e(zt.Reviewing)},enabled:t[2].enabled}]}),[e,t])},Vt=n(234),Ut=n(235),Yt=n(236),_t="8px",Gt=Object(k.a)((function(e){return{videoPlayerContainer:{position:"relative",overflow:"hidden"},backButtonContainer:{marginTop:"4px",padding:"0px"},transcribeButton:{height:"300px",margin:"0px 6px 0px 6px",width:"70px"},videoContainer:Object(U.a)({height:"40%",minHeight:"350px",maxWidth:"80%"},e.breakpoints.up("md"),{maxWidth:"50%"}),inputField:{width:"100%"},chunkProgressRail:{height:_t,color:"#d9534f"},chunkProgressTrack:{height:_t,color:"#d9534f"},chunkProgressMark:{height:_t,width:"4px",backgroundColor:"#FFFFFF",opacity:.8},stepperDots:{backgroundColor:"#d9534f"},stepperDotsContainer:{flexWrap:"wrap",background:"none"},stepperDot:{margin:"2px"},stepperRoot:{background:"none",marginTop:"-20px"}}})),Jt=n(231),qt=n(232),Xt=n(233),Kt=Object(k.a)({slideshowContainer:{display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"flex-start",width:"100%"},slideshowContentContainer:{flexGrow:4}}),Qt=function(e){var t=e.onNavigate,n=e.onComplete,r=e.currentPage,i=e.numberOfPages,a=e.children,c=e.style,o=e.contentContainerStyle,s=e.leftColumn,l=e.rightColumn,u=Kt();return Object(z.jsxs)("div",{className:u.slideshowContainer,style:c,children:[null!==s&&void 0!==s?s:Object(z.jsx)(ve,{round:!0,"aria-label":"Previous",style:{color:"#FFFFFF",alignSelf:"flex-start",marginTop:"32px"},disabled:0===r,onClick:function(){return t("prev")},children:Object(z.jsx)(Jt.a,{})}),Object(z.jsx)(ft.a,{style:Object(C.a)({},o),className:u.slideshowContentContainer,children:a}),null!==l&&void 0!==l?l:n&&r===i-1?Object(z.jsx)(ve,{round:!0,"aria-label":"Complete",style:{color:"#FFFFFF",backgroundColor:"#40bf11",alignSelf:"flex-start",marginTop:"32px"},onClick:n,children:Object(z.jsx)(qt.a,{})}):Object(z.jsx)(ve,{round:!0,"aria-label":"Next",style:{color:"#FFFFFF",alignSelf:"flex-start",marginTop:"32px"},disabled:r===i-1,onClick:function(){return t("next")},children:Object(z.jsx)(Xt.a,{})})]})},Zt=new u.a({en:{transcription:"Transcription"}}),$t=function(e){var t=e.inputRef,n=e.transcriptionValue,r=(e.transcriptionIcon,e.onChange);return Object(z.jsx)(ye.a,{autoFocus:!0,multiline:!0,rows:7,inputRef:t,style:{width:"100%"},variant:"outlined",label:Zt.transcription,value:n,color:"secondary",onChange:function(e){r(e.target.value)}})},en=function(e,t){return be(e.transcriptions,(function(e){return e.creatorid===t}))?e.transcriptions.filter((function(e){return e.creatorid===t}))[0]:void 0},tn=function(e,t){for(var n=[],r=e.starttimeseconds+4/t;r<e.endtimeseconds;)n.push(r),r+=5/t;return r!==e.endtimeseconds&&n.push(e.endtimeseconds),n},nn=function(e,t){var n=e+1/t;return n>t?t:n},rn=function(e,t,n,r,a,c,o){var s=Object(i.useCallback)((function(n,r,i,o){var s,l,u=(s=r[i-1],l=e[n],null!==s&&void 0!==s?s:l.starttimeseconds);return console.log(o),c(u),a({start:u,end:nn(r[i],t)}),{miniChunks:r,currentChunk:n,currentMiniChunk:i,transcription:o}}),[c,a,e,t]);return Object(i.useCallback)((function(i,a){var c,l;switch(r&&["go to next page","go to previous page","flush transcription changes"].includes(a.actionType)&&n(e[i.currentChunk],i.transcription,r),a.actionType){case"go to next page":if(i.currentMiniChunk===i.miniChunks.length-1&&i.currentChunk<e.length-1){var u,d,j=i.currentChunk+1;return s(j,tn(e[j],t),0,null!==(u=null===(d=en(e[j],null!==r&&void 0!==r?r:""))||void 0===d?void 0:d.content)&&void 0!==u?u:"")}if(i.currentMiniChunk<i.miniChunks.length-1)return s(i.currentChunk,i.miniChunks,i.currentMiniChunk+1,i.transcription);o();break;case"go to previous page":if(0===i.currentMiniChunk&&i.currentChunk>0){var p,h,b=i.currentChunk-1,f=tn(e[b],t);return s(b,f,f.length-1,null!==(p=null===(h=en(e[b],null!==r&&void 0!==r?r:""))||void 0===h?void 0:h.content)&&void 0!==p?p:"")}if(i.currentMiniChunk>0)return s(i.currentChunk,i.miniChunks,i.currentMiniChunk-1,i.transcription);break;case"transcription changed":return void 0!==a.newTranscription?Object(C.a)(Object(C.a)({},i),{},{transcription:a.newTranscription}):Object(C.a)({},i);case"go to first mini chunk":return s(i.currentChunk,i.miniChunks,0,i.transcription),Object(C.a)(Object(C.a)({},i),{},{currentMiniChunk:0});case"go to last mini chunk":var m=i.miniChunks.length-1;return s(i.currentChunk,i.miniChunks,m,i.transcription),Object(C.a)(Object(C.a)({},i),{},{currentMiniChunk:m});case"refresh mini chunks":var x=tn(e[i.currentChunk],t);return s(i.currentChunk,x,0,i.transcription),Object(C.a)(Object(C.a)({},i),{},{currentMiniChunk:0,miniChunks:x,transcription:null!==(c=null===(l=en(e[i.currentChunk],null!==r&&void 0!==r?r:""))||void 0===l?void 0:l.content)&&void 0!==c?c:""})}return i}),[e,t,n,r,o,s])},an=n(93),cn=function(e,t){var n=Object(i.useState)(!1),r=Object(s.a)(n,2)[1],a=Object(i.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(an.a)((function(){t(o),r(!1)}),500);return Object(i.useCallback)((function(){r((function(t){return t||l(e),!0})),u(),t(!1)}),[e,t,u])},on=new u.a({en:{instructionsOne:"You are about to Transcribe the chunks.",instructionOneStepLabel:"The Aim",instructionsTwo:"Each chunk has been divided into 5 second clips for you. These clips will loop.",instructionTwoStepLabel:"The Process",instructionsThree:"When you type, the video will pause until you stop typing",instructionThreeStepLabel:"The Instruction",instructionsFour:'When you are done transcribing a clip press the ">" button',instructionFourStepLabel:"The Finish",last:"Last",first:"First"}}),sn=function(){return Object(z.jsx)("div",{})},ln=function(e){var t=e.story_id,n=e.atExit,r=e.onboarding,a=ge.useChunksState(),c=Object(s.a)(a,2),o=c[0],l=c[1],u=r.showOnboardingModal,d=r.dismissOnboardingModal,j=je(),p=j.progressState,b=j.playerRef,f=Object(s.a)(j.splitState,2),x=f[0],g=f[1],O=j.duration,v=j.controller,y=Object(s.a)(j.playingState,2),C=y[0],k=y[1],w=fe(l),S=Object(i.useContext)(q).userName,T=p.setProgressWithVideoUpdate,B=rn(o,O,w,S,g,T,n),N=Object(i.useReducer)(B,{currentChunk:0,currentMiniChunk:0,miniChunks:[],transcription:""}),M=Object(s.a)(N,2),D=M[0],F=M[1];Object(i.useEffect)((function(){0!==O&&F({actionType:"refresh mini chunks"})}),[O]);var P=Object(i.useMemo)((function(){return D.currentChunk===o.length-1&&D.currentMiniChunk===D.miniChunks.length-1}),[D.currentChunk,D.currentMiniChunk,D.miniChunks,o]),W=Gt(),L=Object(i.useRef)(null);Object(i.useEffect)((function(){(L.current?L.current:{focus:function(){return null}}).focus()}),[C,D.currentChunk,D.currentMiniChunk]);var A=function(){F({actionType:"flush transcription changes"}),n()},E=cn(C,k);return Object(z.jsxs)(m.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",style:{height:"85%"},children:[Object(z.jsx)(at,{open:0===O}),Object(z.jsx)(Ve,{action:A}),Object(z.jsx)(jt,{show:u,dismiss:d,title:Object(z.jsx)("h2",{style:{margin:0},children:"Transcribing Instructions"}),steps:[on.instructionsOne,on.instructionsTwo,on.instructionsThree,on.instructionsFour],stepsLabels:[on.instructionOneStepLabel,on.instructionTwoStepLabel,on.instructionThreeStepLabel,on.instructionFourStepLabel],startButtonContent:Object(z.jsx)("div",{children:"Start Transcribing"})}),o.length&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(m.a,{item:!0,container:!0,alignContent:"center",alignItems:"center",className:W.videoContainer,children:Object(z.jsx)(de,{progressState:p,playerRef:b,url:"".concat(De,"/api/watch/getvideo/").concat(t),controller:v,loop:!0})}),Object(z.jsxs)(m.a,{item:!0,container:!0,xs:12,style:{width:"80%",marginBottom:"16px"},justify:"center",alignItems:"center",children:[Object(z.jsx)(m.a,{item:!0,xs:12,children:Object(z.jsxs)("div",{style:{textAlign:"center",overflowWrap:"anywhere"},children:[I(o[D.currentChunk])," (",D.currentChunk+1," of ",o.length,")"]})}),Object(z.jsx)(m.a,{item:!0,xs:12,style:{display:"flex",flexDirection:"column",marginTop:"-8px",marginBottom:"-8px",margin:"0 24px 0 24px"},children:Object(z.jsx)(re.a,{ThumbComponent:sn,value:[100*o[D.currentChunk].starttimeseconds,100*o[D.currentChunk].endtimeseconds],classes:{rail:W.chunkProgressRail,track:W.chunkProgressTrack,mark:W.chunkProgressMark,markActive:W.chunkProgressMark},marks:[{value:100*x.start,label:R(D.miniChunks[D.currentMiniChunk]*O)}]})}),Object(z.jsx)(m.a,{item:!0,children:Object(z.jsx)(Vt.a,{variant:"dots",steps:D.miniChunks.length,activeStep:D.currentMiniChunk,position:"static",classes:{root:W.stepperRoot,dotActive:W.stepperDots,dots:W.stepperDotsContainer,dot:W.stepperDot},nextButton:Object(z.jsx)(K.a,{onClick:function(){return F({actionType:"go to last mini chunk"})},children:on.last}),backButton:Object(z.jsx)(K.a,{onClick:function(){return F({actionType:"go to first mini chunk"})},children:on.first})})}),Object(z.jsx)(Qt,{currentPage:D.currentChunk,onNavigate:function(){return null},numberOfPages:o.length,onComplete:A,leftColumn:Object(z.jsx)("div",{children:Object(z.jsx)(ve,{onClick:function(){return F({actionType:"go to previous page"})},style:{height:"300px",margin:"0px 6px 0px 6px",width:"70px"},children:Object(z.jsx)(Ut.a,{style:{fontSize:"50"}})})}),rightColumn:Object(z.jsx)("div",{children:Object(z.jsx)(ve,{style:{backgroundColor:P?"green":"#d9534f",height:"300px",margin:"0px 6px 0px 6px",width:"70px"},onClick:function(){return F({actionType:"go to next page"})},children:P?Object(z.jsx)(h.a,{}):Object(z.jsx)(Yt.a,{style:{fontSize:"50"}})})}),children:Object(z.jsx)($t,{inputRef:L,transcriptionValue:D.transcription,onChange:function(e){E(),F({actionType:"transcription changed",newTranscription:e})}})})]})]}),Object(z.jsx)("div",{style:{position:"absolute",left:0,bottom:0,width:"100%"},children:!1})]})},un=n(71),dn=n.n(un),jn=n(94),pn=n(67),hn=n.n(pn),bn=function(e,t){var n="".concat(De,"/api/watch/savedit/").concat(t,"?apikey=").concat(Pe);hn.a.request({url:n,method:"POST",withCredentials:!0,data:e})},fn=function(e){var t,n=Object(i.useState)(void 0),r=Object(s.a)(n,2),a=r[0],c=r[1],o=Object(i.useMemo)((function(){var e;return null!==(e=null===a||void 0===a?void 0:a.transcription.chunks)&&void 0!==e?e:[]}),[null===a||void 0===a||null===(t=a.transcription)||void 0===t?void 0:t.chunks]),l=Object(i.useCallback)(function(){var t=Object(jn.a)(dn.a.mark((function t(n){var r;return dn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,hn.a.request({withCredentials:!0,url:"".concat(De,"/api/watch/edit/").concat(e),transformResponse:function(e){var t,n,r;return null!==(t=null===(n=JSON.parse(e))||void 0===n||null===(r=n.transcription)||void 0===r?void 0:r.chunks)&&void 0!==t?t:[]}});case 3:t.t1=t.sent.data,r=(0,t.t0)(t.t1),c((function(t){var n=void 0===t?void 0:Object(C.a)(Object(C.a)({},t),{},{transcription:{chunks:r}});return n&&bn(n,e),n}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(i.useEffect)((function(){e&&hn.a.request({url:"".concat(De,"/api/watch/edit/").concat(e),withCredentials:!0,transformResponse:function(e){return JSON.parse(e)}}).then((function(e){var t,n,r,i;c(e.data),i=null!==(t=null===(n=e.data)||void 0===n||null===(r=n.transcription)||void 0===r?void 0:r.chunks)&&void 0!==t?t:[],c((function(e){return void 0===e?void 0:Object(C.a)(Object(C.a)({},e),{},{transcription:{chunks:i}})}))}))}),[e]);var u=Object(i.useMemo)((function(){return[o,l]}),[o,l]);return{storyTitle:a&&a.title,chunksState:u}},mn=n(240),xn=n(211),gn=n(165),On=new u.a({en:{instructionsOne:"You are about to review the transcriptions made on the video.",instructionOneStepLabel:"Why?",instructionsTwo:"For each chunk, select one of the transcriptions from the list. You can do this by clicking on the text or the check box to the left of the text.",instructionTwoStepLabel:"What?",instructionsThree:"You can also edit the transcriptions by clicking on the pencil button above the text.",instructionThreeStepLabel:"How",editingTranscriptionWarningHeading:"You are editing {0}'s transcription",nameTranscription:"{0}: {1}",instructionsTitle:"Reviewing Instructions"}}),vn=Object(k.a)((function(e){return{doneButton:{backgroundColor:"green",color:"white"},cardContainer:{marginTop:"8px",marginBottom:"8px",padding:"0 8px 0 8px",width:"100%"},backButtonContainer:{marginTop:"4px",padding:"0px"},videoContainer:Object(U.a)({height:"40%",minHeight:"350px",maxWidth:"80%"},e.breakpoints.up("md"),{maxWidth:"50%"}),textReview:Object(U.a)({padding:"8px",overflowWrap:"anywhere",whiteSpace:"pre-line",maxHeight:"500px",overflowY:"scroll",border:"2px solid rgba(0, 0, 0, 0.12)",borderRadius:"6px",marginRight:"12px",flexGrow:1},e.breakpoints.up("md"),{maxHeight:"250px"})}})),yn=function(e){var t=e.atExit,n=e.story_id,r=e.onboarding,a=r.showOnboardingModal,c=r.dismissOnboardingModal,o=je(),l=o.progressState,u=Object(s.a)(o.splitState,2)[1],d=o.controller,j=o.playerRef,p=o.duration,b=l.setProgressWithVideoUpdate,f=ge.useChunksState(),x=Object(s.a)(f,2),g=x[0],O=x[1],y=vn(),k=g.filter(D),w=ut(k),S=w.page,T=w.goTo,B=w.lastPage,N=Object(i.useMemo)((function(){return k[S]}),[S,k]);Object(i.useEffect)((function(){u({start:N.starttimeseconds,end:N.endtimeseconds}),b(N.starttimeseconds)}),[S,g,N,b,u]);var M=function(e){return Object(i.useCallback)((function(t,n,r){e((function(e){return e.map((function(e){return e.id===t.id&&be(e.transcriptions,(function(e){return e.id===n.id}))?Object(C.a)(Object(C.a)({},e),{},{review:{reviewedat:new Date,selectedtranscription:n.id,reviewedby:r}}):e}))}))}),[e])}(O),F=function(e){return Object(i.useCallback)((function(t){e((function(e){return e.map((function(e){return e.id===t.id?Object(C.a)(Object(C.a)({},e),{},{review:void 0}):e}))}))}),[e])}(O),A=Object(i.useContext)(q).userName,E=Object(i.useState)(""),H=Object(s.a)(E,2),V=H[0],U=H[1],Y=Object(i.useState)(void 0),_=Object(s.a)(Y,2),G=_[0],J=_[1];Object(i.useEffect)((function(){U(G?G.content:"")}),[G]);var X=fe(O);return Object(z.jsxs)(m.a,{container:!0,alignContent:"center",alignItems:"center",spacing:1,direction:"column",children:[Object(z.jsx)(at,{open:0===p}),Object(z.jsx)(Ve,{action:t}),Object(z.jsx)(m.a,{item:!0,container:!0,alignContent:"center",alignItems:"center",className:y.videoContainer,children:Object(z.jsx)(de,{playerRef:j,progressState:l,url:"".concat(De,"/api/watch/getvideo/").concat(n),controller:d})}),Object(z.jsxs)(m.a,{item:!0,alignContent:"center",style:{marginTop:"-10px"},children:[I(N),"\xa0 (","".concat(R(W(P(N).start))," - ").concat(R(W(P(N).end))),")"]}),Object(z.jsx)(m.a,{item:!0,container:!0,xs:12,style:{height:"40%",marginBottom:"16px"},justify:"center",alignItems:"center",children:Object(z.jsx)(Qt,{currentPage:S,onNavigate:T,numberOfPages:k.length,onComplete:t,style:{width:"100%",marginLeft:"-28px"},contentContainerStyle:{margin:"0px 0px",marginLeft:"18px",marginRight:"-10px"},leftColumn:Object(z.jsx)("div",{style:{height:"300px",margin:"0px 6px 0px 6px",width:"70px",zIndex:1},children:Object(z.jsx)(ve,{onClick:function(){return T("prev")},style:{height:"300px"},children:Object(z.jsx)(Ut.a,{style:{fontSize:50}})})}),rightColumn:Object(z.jsx)("div",{style:{margin:"0px 6px 0px 6px",width:"70px",zIndex:1},children:Object(z.jsx)(ve,{onClick:function(){return B?t():T("next")},style:{backgroundColor:B?"green":"#d9534f",height:"300px"},children:B?Object(z.jsx)(h.a,{style:{fontSize:50}}):Object(z.jsx)(Yt.a,{style:{fontSize:50}})})}),children:Object(z.jsx)("div",{children:N.transcriptions.map((function(e){var t;return e.content&&Object(z.jsxs)(L.a,{variant:"outlined",style:{marginBottom:"8px"},children:[Object(z.jsxs)(ft.a,{className:y.cardContainer,children:[Object(z.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"4px"},children:Object(z.jsx)("div",{style:{fontSize:"1.2rem",marginTop:"-6px",display:"flex"},children:e.creatorid})}),Object(z.jsx)("div",{onClick:function(){var t;return A&&((null===(t=N.review)||void 0===t?void 0:t.selectedtranscription)!==e.id?M(N,e,A):F(N))},style:{display:"flex",flexDirection:"row"},children:Object(z.jsx)(v.a,{style:{fontSize:"1.3em",padding:"8px"},children:e.content})})]},e.id),Object(z.jsx)(Se.a,{}),Object(z.jsxs)(Ot.a,{style:{justifyContent:"space-between"},children:[Object(z.jsx)(K.a,{onClick:function(){return J(e)},children:"Correct"}),Object(z.jsxs)("div",{children:["Select for Final",Object(z.jsx)(mn.a,{checked:(null===(t=N.review)||void 0===t?void 0:t.selectedtranscription)===e.id,onChange:function(t,n){return A&&(n?M(N,e,A):F(N))},style:{backgroundColor:"initial"}})]})]})]})}))})})}),Object(z.jsx)(jt,{show:a,dismiss:c,steps:[On.instructionsOne,On.instructionsTwo,On.instructionsThree],stepsLabels:[On.instructionOneStepLabel,On.instructionTwoStepLabel,On.instructionThreeStepLabel],title:Object(z.jsx)("h2",{style:{margin:0},children:On.instructionsTitle}),startButtonContent:Object(z.jsx)("div",{children:"Start Reviewing"})}),Object(z.jsx)(Me,{open:void 0!==G,header:Object(z.jsx)(Ge,{message:Object(z.jsx)("div",{style:{whiteSpace:"pre"},children:On.formatString(On.editingTranscriptionWarningHeading,Object(z.jsx)("span",{style:{textDecoration:"underline"},children:"".concat(null===G||void 0===G?void 0:G.creatorid)}))})}),exit:function(){J(void 0)},children:Object(z.jsxs)("div",{style:{position:"relative"},children:[Object(z.jsx)(xn.a,{style:{maxHeight:"300px",overflow:"scroll"},children:N.transcriptions.filter((function(e){return e.id!==(null===G||void 0===G?void 0:G.id)})).map((function(e){return Object(z.jsx)(gn.a,{style:{display:"flex",whiteSpace:"pre"},children:On.formatString(On.nameTranscription,Object(z.jsx)("div",{style:{alignSelf:"flex-start",fontWeight:600},children:e.creatorid}),Object(z.jsx)("div",{style:{whiteSpace:"pre",overflowWrap:"anywhere"},children:e.content}))})}))}),Object(z.jsx)("div",{style:{margin:"10px"},children:Object(z.jsx)($t,{transcriptionValue:V,onChange:U})}),Object(z.jsx)(Se.a,{variant:"fullWidth"}),Object(z.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(z.jsx)(K.a,{onClick:function(){G&&X(N,V,G.creatorid),J(void 0)},style:{margin:"8px",position:"relative",bottom:0,right:0},disabled:""===V,children:"Complete"})})]})})]})},Cn=n(95),kn=new u.a({en:{yr:"year",mt:"month",dy:"day",hr:"hour",min:"minute",sec:"second",yrs:"years",mts:"months",dys:"days",hrs:"hours",mins:"minutes",secs:"seconds",periodAgo:"{0} {1} ago",contributions:"Contributions",created:"Created",transcribed:"Transcribed",reviewed:"Reviewed",contributionDescription:'{0} the chunk "{1}" ({2}) {3}'}}),wn=[["yr",31536e3],["mt",2592e3],["dy",86400],["hr",3600],["min",60],["sec",1]],Sn=function(e){var t=function(e){var t,n=Object(Cn.a)(wn);try{for(n.s();!(t=n.n()).done;){var r=Object(s.a)(t.value,2),i=r[0],a=r[1],c=Math.floor(e/+a);if(c>=1)return{interval:c,epoch:i}}}catch(o){n.e(o)}finally{n.f()}return{interval:0,epoch:kn.sec}}(Math.floor((+new Date-+new Date(e))/1e3)),n=t.interval,r=t.epoch;return r===kn.sec?kn.formatString(kn.periodAgo,"Less than a","minute"):kn.formatString(kn.periodAgo,n.toString(),"".concat(1===n?kn.getString(r):function(e){return kn.getString("".concat(e,"s"))}(r)))},Tn=function(e){var t,n,r,i,a=e.contribution,c=a.type,o=a.name,s=a.chunk;return Object(z.jsx)("span",{style:{whiteSpace:"pre",display:"flex",flexWrap:"wrap"},children:kn.formatString(kn.contributionDescription,Object(z.jsx)("span",{style:{fontWeight:"bold"},children:function(e){switch(e){case"chunk":return kn.created;case"transcription":return kn.transcribed;case"review":return kn.reviewed}}(c)}),Object(z.jsx)("div",{style:{overflowWrap:"anywhere"},children:I(s)}),Object(z.jsx)(z.Fragment,{children:"".concat(R(W(F(s.starttimestamp)))," - ").concat(R(W(F(s.endtimestamp))))}),Object(z.jsx)(v.a,{variant:"subtitle2",style:{marginLeft:"4px",fontWeight:600},children:Sn("chunk"===c?s.updatedat:"transcription"===c?null!==(t=null===(n=en(s,o))||void 0===n?void 0:n.updatedat)&&void 0!==t?t:new Date:null!==(r=null===(i=s.review)||void 0===i?void 0:i.reviewedat)&&void 0!==r?r:new Date)}))})},Rn=function(e){var t=e.show,n=e.exit,r=e.chunks,a=Object(i.useMemo)((function(){return Array.from(function(e){return e.map((function(e){return{name:e.creatorid,type:"chunk",chunk:e}})).concat(e.reduce((function(e,t){return e.concat(t.transcriptions.map((function(e){return{name:e.creatorid,type:"transcription",chunk:t}})))}),[])).concat(e.reduce((function(e,t){return t.review?e.concat([{name:t.review.reviewedby,type:"review",chunk:t}]):e}),[]))}(r).reduce((function(e,t){return e.get(t.name)?e.set(t.name,e.get(t.name).concat([t])):e.set(t.name,[t])}),new Map))}),[r]);return Object(z.jsx)(Me,{header:Object(z.jsx)(v.a,{variant:"h3",style:{fontWeight:"lighter"},children:kn.contributions}),open:t,exit:n,children:Object(z.jsx)(Be,{children:Object(z.jsx)(we.a,{style:{height:"80vh",width:"90vw",overflow:"scroll"},children:Object(z.jsx)(x.a,{cols:1,cellHeight:"auto",children:a.map((function(e){return Object(z.jsx)(g.a,{children:Object(z.jsx)(E,{title:Object(z.jsx)("div",{style:{overflowWrap:"anywhere"},children:e[0]}),children:Object(z.jsx)(xn.a,{children:e[1].map((function(e){return Object(z.jsx)(gn.a,{children:Object(z.jsx)(Tn,{contribution:e})},"".concat(e.chunk.id).concat(e.type))}))})})},e[0])}))})})})})},Bn=new u.a({en:{loading:"Loading",viewInstructions:"View Instructions",chunking:"Chunking",dashboard:"Dashboard",reviewing:"Reviewing",transcribing:"Transcribing",showContributions:"Show Contributions"}}),Nn=function(e){switch(e){case zt.Chunking:return Bn.chunking;case zt.Dashboard:return Bn.dashboard;case zt.Reviewing:return Bn.reviewing;case zt.Transcribing:return Bn.transcribing}},Mn=function(){var e=Object(i.useState)(zt.Dashboard),t=Object(s.a)(e,2),n=t[0],r=t[1],a=ge.ChunksProvider,c=function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e=window.location.href.split("editid=")[1].split("&")[0];r(e)}),[]),n}(),o=fn(c),l=o.storyTitle,u=Object(s.a)(o.chunksState,2),d=u[0],j=u[1],p=Object(i.useMemo)((function(){return N(d)}),[d]),h=Object(i.useMemo)((function(){return d.length?function(e){return e.reduce((function(e,t){return e+(D(t)?1:0)}),0)}(d)/d.length:0}),[d]),b=Object(i.useMemo)((function(){return d.length?function(e){return e.reduce((function(e,t){return e+(t.review?1:0)}),0)}(d)/d.length:0}),[d]),f=Ht(r,[{progress:100*p,enabled:!0},{progress:100*h,enabled:p>0},{progress:100*b,enabled:h>0}]),m=_(!1),x=Object(s.a)(m,2),g=x[0],O=x[1],v=G("showChunkEditorOnboardingModal","true"),y=Object(s.a)(v,2),C=y[0],k=y[1],w=G("showTranscriberOnboardingModal","true"),S=Object(s.a)(w,2),T=S[0],R=S[1],B=G("showReviewerOnboardingModal","true"),M=Object(s.a)(B,2),F=M[0],P=M[1],W=Object(i.useCallback)((function(){return r(zt.Dashboard)}),[]),I=Object(i.useMemo)((function(){return n===zt.Chunking?[{content:Object(z.jsx)("div",{children:Bn.viewInstructions}),handler:function(){k("true")}}]:n===zt.Reviewing?[{content:Object(z.jsx)("div",{children:Bn.viewInstructions}),handler:function(){P("true")}}]:n===zt.Transcribing?[{content:Object(z.jsx)("div",{children:Bn.viewInstructions}),handler:function(){R("true")}}]:[]}),[n]);return Object(z.jsx)(a,{state:[d,j],children:Object(z.jsx)(X,{children:Object(z.jsxs)("main",{children:[Object(z.jsx)(Rn,{chunks:d,show:g,exit:O}),Object(z.jsx)(At,{title:Nn(n),hidden:n===zt.Transcribing,contextMenuItems:I,children:n===zt.Dashboard?Object(z.jsx)(It,{steps:f,storyName:l||Bn.loading,logOutAction:function(){k("true"),R("true"),P("true")}}):n===zt.Chunking?Object(z.jsx)(bt,{story_id:c,atExit:W,onboarding:{showOnboardingModal:"true"===C,dismissOnboardingModal:function(){return k("false")}}}):n===zt.Transcribing?Object(z.jsx)(ln,{story_id:c,atExit:W,onboarding:{showOnboardingModal:"true"===T,dismissOnboardingModal:function(){return R("false")}}}):n===zt.Reviewing?Object(z.jsx)(yn,{atExit:W,story_id:c,onboarding:{showOnboardingModal:"true"===F,dismissOnboardingModal:function(){return P("false")}}}):null})]})})})},Dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))},Fn=n(96),Pn=n(237),Wn=Object(Fn.a)({typography:{fontFamily:["Open Sans"].join(",")},palette:{primary:{main:"#d9534f"},secondary:{main:"#d9534f"}}});o.a.render(Object(z.jsx)(Pn.a,{theme:Wn,children:Object(z.jsx)(Mn,{})}),document.getElementById("root")),Dn()}},[[162,1,2]]]);
//# sourceMappingURL=main.2be6160e.chunk.js.map
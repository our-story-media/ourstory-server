{"version":3,"sources":["hooks/useConfirmBeforeAction.ts","utils/chunkManipulation/chunkManipulation.ts","components/SimpleCard/SimpleCard.tsx","components/SimpleCard/ChunkCard.tsx","components/ChunkEditor/ChunkEditorStyles.ts","hooks/useToggle.ts","hooks/useLocalStorage.ts","components/UserProvider/UserProvider.tsx","utils/localStorageKeys.ts","hooks/useDefaultState.ts","components/IndabaSlider/IndabaSlider.tsx","components/VideoPlayer/Hooks/useVideoPlayerProps.ts","components/VideoPlayer/ProgressBarLabel.tsx","components/VideoPlayer/VideoPlayerStyles.ts","components/VideoPlayer/VideoPlayer.tsx","components/VideoPlayer/Hooks/useVideoPlayerController.ts","utils/adjacentMap.ts","utils/oneSatisfies.ts","utils/ChunksContext/chunksContext.tsx","utils/ChunksContext/chunksActions.ts","components/IndabaButton/IndabaButton.tsx","components/FlatPaper/FlatPaper.tsx","components/CentralModal/CentralModal.tsx","utils/getApiKey.ts","components/ChunkEditor/ChunkCropper.tsx","components/EditChunkModal/EditChunkModal.tsx","components/VideoPlayer/VideoThumbnail.tsx","components/BackButton/BackButton.tsx","components/WarningMessage/WarningMessage.tsx","components/ConfirmIntentModal/ConfirmIntentModal.tsx","components/TranscriptionsModal/TranscriptionsModal.tsx","components/ScrollToOnMount/ScrollToOnMount.tsx","components/IndabaMenu/IndabaMenu.tsx","components/ChunkEditor/ChunkCardContextMenu.tsx","components/LoadingModal/LoadingModal.tsx","hooks/useSlideshow.ts","components/OnboardingModal/OnboardingModalStyles.ts","components/OnboardingModal/OnboardingModal.tsx","components/ChunkEditor/ChunkEditor.tsx","components/LinearProgressWithLabel/LinearProgressWithLabel.tsx","components/App/Views.ts","components/App/StepInfoStyles.ts","components/App/StepInfo.tsx","components/Dashboard/DashboardStyles.ts","components/SimpleInputForm/SimpleInputForm.tsx","components/NameModal/NameModalStyles.ts","components/NameModal/NameModal.tsx","components/IndabaLink/IndabaLink.tsx","components/Dashboard/Dashboard.tsx","components/Header/HeaderStyles.ts","assets/images/logo_web.svg","components/Header/Header.tsx","components/App/hooks/useSteps.ts","components/Transcriber/TranscriberStyles.ts","components/Slideshow/SlideshowStyles.ts","components/Slideshow/Slideshow.tsx","components/SimpleCard/EditTranscriptionCard.tsx","components/Transcriber/hooks/useTranscriberState.ts","components/Transcriber/hooks/useAutoPauseOnType.ts","components/Transcriber/Transcriber.tsx","components/App/hooks/useOurstoryApi.ts","components/Reviewer/Reviewer.tsx","components/ContributersModal/ContributersModal.tsx","components/App/App.tsx","utils/getId.ts","reportWebVitals.ts","index.tsx"],"names":["NotAttemptingAction","strings","LocalizedStrings","en","defaultChunkName","zeroPad","value","rounded","Math","floor","toString","toTimeStamp","seconds","round","toShortTimeStamp","substring","getLastEndTimeStamp","chunks","length","endtimestamp","getLastEndTimeSeconds","endtimeseconds","getEnclosingChunk","time","i","starttimeseconds","hasTranscription","chunk","transcriptions","reduce","acc","t","content","parseTimeStamp","stamp","hours","Number","slice","minutes","milliseconds","secondsOf","getNameOf","name","formatString","starttimestamp","SimpleCard","title","children","contentStyle","cardStyle","Card","variant","style","CardContent","Typography","component","Divider","margin","useStyles","makeStyles","titleContainer","fontSize","position","ChunkCard","transcriptionIcon","classes","startEnd","start","end","parseChunkTimeStamps","endSeconds","startSeconds","className","display","flexDirection","fontWeight","overflowWrap","justifyContent","videoPlayerContainer","actionButton","background","chunksList","flexWrap","backButton","color","backButtonContainer","marginTop","onboardingTitle","chunkCardBody","newChunkButtonContainer","right","bottom","useToggle","initialValue","useState","state","setState","s","useLocalStorage","key","defaultValue","window","localStorage","getItem","fetched","toggleFetched","item","useCallback","setter","setItem","old_val","new_val","removeItem","undefined","userName","setName","clearName","UserContext","createContext","UserProvider","useMemo","Provider","useDefaultState","optional","defaultState","def","progressBarColor","progressBarRoot","padding","width","transform","height","progressBarRail","progressBarTrack","progressBarThumb","progressBarMark","markedSlider","IndabaSlider","styles","props","Slider","colorPrimary","root","rail","track","thumb","mark","marked","useVideoPlayerProps","progressState","playStateIn","playerRef","setDuration","split","onProgressDrag","loop","isPlaying","setIsPlaying","isLoaded","setIsLoaded","dragging","setDragging","progress","setProgress","setProgressWithVideoUpdate","useEffect","current","getDuration","playerProps","playing","progressInterval","onProgress","played","onReady","onEnded","throttleUpdateVideo","useThrottleCallback","newVal","playerUpdater","setWithVideoUpdate","newValue","setWithoutVideoUpdate","useProgressBarControls","progressBarValue","onScrobble","updateProgressBar","progressBarProps","min","max","step","onChange","_","onChangeCommitted","showControls","toggleIsPlaying","ProgressBarLabel","open","Tooltip","enterTouchDelay","placement","videoControlsContainer","left","videoPlayerButton","roundButton","borderRadius","top","progressBarContainer","marginBottom","VideoPlayer","url","controller","sliderMarks","slider","durationState","duration","playState","playingState","splitState","sliderValueLabelFormat","skipForwardHandler","skipBackwardHandler","Box","ref","Button","disableRipple","onClick","Replay5","Pause","PlayArrow","Forward5","valueLabelDisplay","valueLabelFormat","ValueLabelComponent","marks","useVideoPlayerController","autoPlay","useRef","updatePlayerProgress","secondsLoaded","getSecondsLoaded","seekTo","progressSetter","prevVal","adjacentMap","arr","func","val","ind","input","concat","map","pair","oneSatisfies","pred","filter","ChunksContext","chunksContext","ChunksProvider","useChunksState","useContext","useUpdateTranscription","setChunks","toUpdate","updatedTranscription","id","review","selectedtranscription","transcription","creatorid","getTranscriptionByCreator","removeReview","updatedat","Date","uuidv4","renameChunk","newName","useButtonStyles","button","backgroundColor","lineHeight","textTransform","IndabaButton","overrideClass","overrideStyles","useStyleClass","FlatPaper","React","forwardRef","Paper","elevation","modal","outline","alignItems","modalContentBox","CentralModal","header","exit","Modal","DialogContent","Container","paddingTop","alignContent","Close","api_key","location","href","api_base_address","CropThumbComponent","isProgressThumb","ChunkCropper","story_id","storyDuration","croppedSplitState","cropPlayerProgressState","cropPlayerController","cropperPlayerRef","videoSplit","setVideoSplit","croppedSplit","setCroppedSplit","ThumbComponent","ChunkNameEditor","nameState","TextField","label","e","target","EditChunkModal","cropChunk","newSplit","allChunks","neighbouringChunks","el","idx","prev","next","deleteNegativeChunks","sort","a","b","useCropChunk","newCropSplit","setNewCropSplit","paddingBottom","VideoThumbnail","crossOrigin","back","BackButton","action","ButtonBase","ChevronLeft","useConfirmBeforeAction","condition","True","attemptingActionWith","setAttemptingActionWith","confirmAction","cancelAction","attemptAction","args","WarningMessage","message","Warning","marginRight","ConfirmIntentModal","actionControls","warningMessage","Delete","TranscriptionsModal","overflow","whiteSpace","ScrollToOnMount","scrollIntoView","behavior","block","inline","IndabaMenu","anchor","show","menuItems","Menu","anchorEl","MenuItem","handler","ChunkCardContextMenu","showContextMenu","setShowContextMenu","alignSelf","ClickAwayListener","onClickAway","IconButton","MoreVert","loadingModal","LoadingModal","CircularProgress","useSlideshow","list","page","direction","setPage","reset","lastPage","goTo","contentContainer","instructionsContainer","flexGrow","divider","centerVertically","buttonsContainer","OnboardingModal","dismiss","steps","startButtonContent","dismissHandler","nextPageHandler","prevPageHandler","Stepper","activeStep","Step","StepLabel","ChevronRight","instructionsOne","instructionsTwo","instructionsThree","instructionsFour","instructionsTitle","startChunking","attemptDeleteWarningTitle","attemptDeleteWarningBody","attemptNewChunkTitle","attemptNewChunkBody","delete","edit","viewTranscriptions","newChunk","doneCard","ChunkEditor","atExit","onboarding","newChunks","videoPlayerProgressState","videoPlayerController","setPlay","getMarks","doWithChunks","doWith","useDoWithChunks","deleteChunk","toDelete","c","first","useDeleteChunk","splitAt","onBoundary","invalidSplit","enclosingChunk","useNewChunk","playingChunk","setPlayingChunk","handleChunkPlayButtonClick","videoPlaying","croppingChunk","setCroppingChunk","attemptNewChunk","attemptNewChunkActionControls","attemptToDeleteChunk","attemptDeleteActionControls","showTranscriptionsFor","setShowTranscriptionsFor","playButtonStyle","opacity","chunkCardContentStyle","chunkCardStyle","showOnboardingModal","dismissOnboardingModal","playerDragHandler","GridList","cellHeight","cols","GridListTile","forEach","handleAttemptDeleteChunk","Stop","Check","aria-label","Add","LinearProgressWithLabel","View","mr","LinearProgress","minWidth","borderColor","paper","border","borderTop","borderTopRightRadius","borderTopLeftRadius","stepHeader","borderBottomRightRadius","borderBottomLeftRadius","perform","StepInfo","description","onSelect","enabled","disabled","introContainer","textAlign","transcriberModal","SimpleInputForm","placeholder","buttonText","onSubmit","setInput","InputBase","flex","paddingLeft","NameModal","indabaLink","cursor","IndabaLink","Link","greeting","transcriptionFor","notMe","Greeting","Title","storyName","Dashboard","logOutAction","spacing","buildVersion","titleRow","logoContainer","paddingRight","titleWrapper","contextMenuButton","Header","contextMenuItems","hidden","contextMenuButtonRef","toggleShowContextMenu","src","Logo","alt","chunkingDesc","chunkingTitle","transcriptionDesc","transcriptionTitle","reviewDesc","reviewTitle","useSteps","setView","Chunking","Transcribing","Reviewing","chunkProgressHeight","inputField","chunkProgressRail","chunkProgressTrack","chunkProgressMark","stepperDots","stepperDotsContainer","stepperDot","slideshowContainer","slideshowContentContainer","Slideshow","onNavigate","onComplete","currentPage","numberOfPages","contentContainerStyle","leftColumn","rightColumn","NavigateBefore","Done","NavigateNext","EditTranscriptionCard","inputRef","transcriptionValue","autoFocus","multiline","rows","getUsersTranscription","getMiniChunks","miniChunks","currentTime","push","getMiniChunkEnd","miniChunk","useTranscriberReducer","updateTranscription","setSplit","pageChange","newCurrentChunk","newMiniChunks","newCurrentMiniChunk","newTranscription","prevMiniChunk","currentChunk","newChunkStart","currentMiniChunk","includes","actionType","lastMiniChunk","useAutoPauseOnType","setPlaying","setTypingDebounced","playStateBeforeTypingDebounce","setPlayStateBeforeTypingDebounce","debouncedPlay","useDebounceCallback","typingDebounced","last","EmptyComponent","Transcriber","transcriberReducer","useReducer","transcriberState","transcriberDispatch","focus","exitHandler","onType","MobileStepper","dotActive","dots","dot","nextButton","ArrowLeft","ArrowRight","markActive","pushStoryChanges","new_story","axios","request","method","withCredentials","data","useOurstoryApi","story","setStory","setChunksWithUpdate","transformResponse","r","JSON","parse","new_chunks","old_story","then","response","memoChunks","storyTitle","chunksState","editingTranscriptionWarningHeading","nameTranscription","doneButton","cardContainer","Reviewer","playerController","chunksToReview","updateReview","selectedTranscription","reviewedat","reviewedby","useUpdateReview","deleteReview","useDeleteReview","transcriptionEdit","setTranscriptionEdit","editingTranscription","setEditingTranscription","textDecoration","List","maxHeight","ListItem","zIndex","AccountCircle","marginLeft","Edit","Radio","checked","yr","mt","dy","hr","sec","yrs","mts","dys","hrs","mins","secs","periodAgo","contributions","created","transcribed","reviewed","contributionDescription","epochs","timeAgo","date","timeAgoInSeconds","interval","epoch","getString","pluralize","ContributionDescription","contribution","type","typeDescription","ContributerListModal","contributers","Array","from","listContributions","get","set","Map","contributer","loading","viewInstructions","chunking","dashboard","reviewing","transcribing","showContributions","getTitle","view","App","storyId","setStoryId","useStoryId","chunkingProgress","transcriptionProgress","countChunksWithTranscription","reviewProgress","countReviewedChunks","showContributers","toggleShowContributers","showChunkEditorOnboarding","setShowChunkEditorOnboarding","showTranscriberOnboarding","setShowTranscriberOnboarding","showReviewerOnboardring","setShowReviewerOnboarding","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b72ae507.chunk.js","sourcesContent":["import { useState, useCallback } from \"react\";\n\nexport enum NotAttemptingAction { True }\n\n/**\n * This hook allows the caller to insert some functionality before an\n * action is performed. It's main use case is to allow a confirmation\n * modal to warn users about some action before they perform that action.\n * \n * For example - deleting sensitive data.\n * \n * The condition is called everytime the user attempts the action, and,\n * if the condition is met, the action is delayed, until confirmAction()\n * is called (or cancelAction())\n * \n * @param action the action to perform\n * @param condition the condition to check before completing the action\n */\nconst useConfirmBeforeAction = <T extends any[]>(\n  action: (...args: T) => void,\n  condition: (...args: T) => boolean\n): {\n  /**\n   * A list of the parameters that the action has been called with.\n   * This is also a way for the caller to check if the action has been\n   * attempted - any time the action has been attempted, this won't be\n   * undefined (unless the action was attempted with undefined)\n   */\n  attemptingActionWith: NotAttemptingAction | T;\n  /**\n   * Cancel the action - effectively making the original call to\n   * attemptAction() a no-op\n   */\n  cancelAction: () => void;\n  /**\n   * Attempt the action\n   */\n  attemptAction: (...args: T) => void;\n  /**\n   * Confirm the action - this is a no-op if attemptingActionWith\n   * is undefined\n   */\n  confirmAction: () => void;\n} => {\n  const [attemptingActionWith, setAttemptingActionWith] = useState<\n    NotAttemptingAction | T\n  >(NotAttemptingAction.True);\n\n  const confirmAction = useCallback(() => {\n    if (attemptingActionWith !== NotAttemptingAction.True) {\n      action(...attemptingActionWith);\n      setAttemptingActionWith(NotAttemptingAction.True);\n    }\n  }, [attemptingActionWith, action]);\n\n  return {\n    attemptingActionWith,\n    cancelAction: () => setAttemptingActionWith(NotAttemptingAction.True),\n    attemptAction: (...args: T) =>\n      condition(...args) ? setAttemptingActionWith(args) : action(...args),\n    confirmAction,\n  };\n};\n\nexport default useConfirmBeforeAction;","import { Chunk, Contribution } from \"../types\";\nimport LocalizedStrings from \"react-localization\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    defaultChunkName: \"{0} second chunk\",\n  },\n});\n\n/**\n * Given an integer return a string representation of that integer\n * padded with zeros up until the tens column\n *\n * Examples:\n * zeroPad(8) -> '08'\n * zeroPad(12) -> '12'\n *\n * @param value the value to zero pad\n */\nexport const zeroPad = (value: number) =>\n  ((rounded) =>\n    rounded < 10 ? `0${rounded < 0 ? 0 : rounded}` : rounded.toString())(\n    Math.floor(value)\n  );\n\n/**\n * Helper function to convert a number of seconds to a string with format\n * HH:MM:SS:mm\n * (Hours, Minutes, Seconds, Milliseconds)\n *\n * @param seconds the number of seconds\n */\nexport const toTimeStamp = (seconds: number) =>\n  `${zeroPad(seconds / (60 * 60))}:${zeroPad(seconds / 60)}:${zeroPad(\n    seconds % 60\n  )}:${zeroPad(Math.round((seconds - Math.floor(seconds)) * 100))}`;\n\n/**\n * Helper function to convert a number of seconds to a string with format\n * HH:MM:SS:mm\n * (Hours, Minutes, Seconds, Milliseconds)\n * If the the number of seconds is less than an hour, use the format:\n * MM:SS:mm\n *\n * @param seconds\n */\nexport const toShortTimeStamp = (seconds: number) =>\n  seconds > 60 * 60\n    ? toTimeStamp(seconds).substring(0, 8)\n    : toTimeStamp(seconds).substring(3, 8);\n\n/**\n * Given a list of chunks, get the end of the last time stamp.\n * If the list is empty return the start of the video\n *\n * @param chunks the chunks to extract the last time stamp from\n */\nexport const getLastEndTimeStamp = (chunks: Chunk[]): string =>\n  chunks.length > 0 ? chunks[chunks.length - 1].endtimestamp : \"00:00:00:00\";\n\n/**\n * Given a list of chunks, get the endtimeseconds of the last chunk.\n * If the list is empty, return the start of the video (zero seconds)\n *\n * @param chunks the chunks to extract the last time from\n */\nexport const getLastEndTimeSeconds = (chunks: Chunk[]): number =>\n  chunks.length > 0 ? chunks[chunks.length - 1].endtimeseconds : 0;\n\n/**\n * Given a list of chunks and a time (as a fraction),\n * if there exists a chunk that that time is within,\n * return the chunk, else, return null\n *\n * For example, if this is called with time = 0.5,\n * and in the list of chunks there exists chunk 'A' that\n * has start and end times 0.3 and 0.51 respectively, then\n * chunk 'A' will be returned\n *\n * @param chunks - the list of chunks to find the enclosing chunk in\n * @param time - the time to find enclosed\n */\nexport const getEnclosingChunk = (\n  chunks: Chunk[],\n  time: number\n): Chunk | undefined => {\n  for (var i = 0; i < chunks.length; i++) {\n    if (time > chunks[i].starttimeseconds && time < chunks[i].endtimeseconds)\n      return chunks[i];\n  }\n  return undefined;\n};\n\n/**\n * Given a time (as a fraction), and a list of chunks,\n * returns whether that time is valid as a new split\n *\n * A new split is invalid if it is the start/finish time\n * of a chunk in the list, if it's 0, or if it is greater\n * than the duration of the video\n *\n * @param chunks - the chunks that are being added to\n * @param time - the time stamp of the new chunk\n * @param storyDuration - the duration of the video being chunked\n */\nexport const invalidSplit = (\n  chunks: Chunk[],\n  time: number,\n  storyDuration: number\n) => {\n  return (\n    time === 0 ||\n    time > storyDuration ||\n    chunks.reduce(\n      (onBoundary: boolean, chunk) =>\n        onBoundary ||\n        chunk.endtimeseconds === time ||\n        chunk.starttimeseconds === time,\n      false\n    )\n  );\n};\n\n/**\n * Given a chunk, returns whether that chunk has no transcription\n * (All of it's transcription objects have content equal to \"\")\n *\n * @param chunk the chunk to check\n */\nexport const hasTranscription = (chunk: Chunk): boolean =>\n  chunk.transcriptions.reduce<boolean>(\n    (acc, t) => acc || t.content !== \"\",\n    false\n  );\n\n/**\n * Given a list of chunks, return the number of chunks that have a\n * transcription.\n *\n * @param chunks the chunks to count\n */\nexport const countChunksWithTranscription = (chunks: Chunk[]): number =>\n  chunks.reduce<number>(\n    (acc, chunk) => acc + (hasTranscription(chunk) ? 1 : 0),\n    0\n  );\n\n/**\n * Given a list of chunks, return the number of chunks that have\n * been reviewed\n *\n * @param chunks the chunks to count\n */\nexport const countReviewedChunks = (chunks: Chunk[]): number =>\n  chunks.reduce((acc, chunk) => acc + (chunk.review ? 1 : 0), 0);\n\n/**\n * Given a list of chunks, fetches the list of all contributions\n *\n * @param chunks the chunks to extract contributers from\n */\nexport const listContributions = (chunks: Chunk[]): Contribution[] =>\n  /**\n   * We get the list of all contributers and then create a Set from it\n   * to remove duplicates. We then create a array from that set.\n   */\n  chunks\n    .map<Contribution>((chunk) => ({\n      name: chunk.creatorid,\n      type: \"chunk\" as const,\n      chunk,\n    }))\n    .concat(\n      chunks.reduce(\n        (acc, chunk) =>\n          acc.concat(\n            chunk.transcriptions.map((transcription) => ({\n              name: transcription.creatorid,\n              type: \"transcription\" as const,\n              chunk,\n            }))\n          ),\n        [] as Contribution[]\n      )\n    )\n    .concat(\n      chunks.reduce(\n        (acc, chunk) =>\n          chunk.review\n            ? acc.concat([\n                {\n                  name: chunk.review.reviewedby,\n                  type: \"review\" as const,\n                  chunk,\n                },\n              ])\n            : acc,\n        [] as Contribution[]\n      )\n    );\n\nexport const getAdjacentChunks = (\n  chunk: Chunk,\n  allChunks: Chunk[]\n): { prev: Chunk | undefined; next: Chunk | undefined } =>\n  allChunks.reduce<{ prev: Chunk | undefined; next: Chunk | undefined }>(\n    (acc, el, idx) =>\n      el.id === chunk.id\n        ? { prev: allChunks[idx - 1], next: allChunks[idx + 1] }\n        : acc,\n    { prev: undefined, next: undefined }\n  );\n\nexport type Time = {\n  hours: number;\n  minutes: number;\n  seconds: number;\n  milliseconds: number;\n};\n\nexport const parseTimeStamp = (stamp: string) => ({\n  hours: Number(stamp.slice(0, 2)),\n  minutes: Number(stamp.slice(3, 5)),\n  seconds: Number(stamp.slice(6, 8)),\n  milliseconds: Number(stamp.slice(9, 11)),\n});\n\n/**\n * Given a chunk return a start and end Time object\n *\n * @param chunk the chunk to parse the timestamps of\n */\nexport const parseChunkTimeStamps = (\n  chunk: Chunk\n): { start: Time; end: Time } => ({\n  start: parseTimeStamp(chunk.starttimestamp),\n  end: parseTimeStamp(chunk.endtimestamp),\n});\n\n/**\n * Given a time object, return the number of seconds, in that time\n * object, excluding the milliseconds\n *\n * @param time the time to get the seconds for\n */\nexport const secondsOf = (time: Time) =>\n  time.hours * 60 * 60 + time.minutes * 60 + time.seconds;\n\nexport const getNameOf = (chunk: Chunk) =>\n  chunk.name\n    ? chunk.name\n    : (strings.formatString(\n        strings.defaultChunkName,\n        `${\n          secondsOf(parseTimeStamp(chunk.endtimestamp)) -\n          secondsOf(parseTimeStamp(chunk.starttimestamp))\n        }`\n      ) as string);\n","import { Card, CardContent, Divider, Typography } from \"@material-ui/core\";\nimport React, { ReactNode } from \"react\";\n\ntype SimpleCardProps = {\n  title?: ReactNode;\n  contentStyle?: any;\n  cardStyle?: any;\n};\n\nconst SimpleCard: React.FC<SimpleCardProps> = ({ title, children, contentStyle, cardStyle }) => {\n  return (\n    <Card variant=\"outlined\" style={{...cardStyle}}>\n      <CardContent style={{ ...contentStyle }}>\n        <Typography variant=\"h5\" component=\"h2\">\n          {title}\n        </Typography>\n        {title ? <Divider style={{ margin: \"16px 0 16px 0\" }} /> : null}\n        {children}\n      </CardContent>\n    </Card>\n    // <div className={classes.cardContainer} style={style}>\n    //     <span>\n    //        {title}\n    //     </span>\n    //     <Divider style={{ margin: \"4px 0 4px 0\" }}/>\n    //     {children}\n    // </div>\n  );\n};\n\nexport default SimpleCard;\n","import { makeStyles } from \"@material-ui/core\";\nimport {\n  getNameOf,\n  secondsOf,\n  toShortTimeStamp,\n} from \"../../utils/chunkManipulation/chunkManipulation\";\nimport { Chunk } from \"../../utils/types\";\nimport SimpleCard from \"./SimpleCard\";\nimport { parseChunkTimeStamps } from \"../../utils/chunkManipulation/chunkManipulation\";\nimport React, { ReactNode } from \"react\";\n\nconst useStyles = makeStyles({\n  titleContainer: {\n    fontSize: \"1.2rem\",\n    position: \"relative\",\n  },\n});\n\nconst ChunkCard: React.FC<{\n  chunk: Chunk;\n  style?: any;\n  transcriptionIcon?: ReactNode;\n}> = ({ chunk, children, style, transcriptionIcon }) => {\n  const classes = useStyles();\n  const startEnd = parseChunkTimeStamps(chunk);\n\n  const endSeconds = secondsOf(startEnd.end);\n  const startSeconds = secondsOf(startEnd.start);\n\n  return (\n    <SimpleCard\n      title={\n        <div>\n          <span\n            className={classes.titleContainer}\n            style={{ display: \"flex\", flexDirection: \"column\" }}\n          >\n            <span style={{ fontWeight: 600, overflowWrap: \"anywhere\", display: \"flex\", justifyContent: \"space-between\" }}>\n              {getNameOf(chunk)}\n              {transcriptionIcon}\n            </span>\n            {`${toShortTimeStamp(startSeconds)} - ${toShortTimeStamp(\n              endSeconds\n            )}`}\n          </span>\n        </div>\n      }\n      cardStyle={{ ...style, position: \"relative\", margin: \"8px\" }}\n    >\n      {children}\n    </SimpleCard>\n  );\n};\n\nexport default ChunkCard;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  videoPlayerContainer: {\n    margin: \"auto\",\n  },\n  actionButton: {\n    \"&:hover\": {\n      background: \"#d9534f\",\n    },\n  },\n  chunksList: {\n    flexWrap: \"nowrap\",\n  },\n  backButton: {\n    background: \"transparent\",\n    color: \"black\",\n    fontSize: \"16px\",\n  },\n  backButtonContainer: {\n    marginTop: \"4px\",\n  },\n  onboardingTitle: {\n    margin: 0,\n  },\n  chunkCardBody: {\n    marginTop: \"8px\",\n    position: \"relative\",\n  },\n  newChunkButtonContainer: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n    margin: \"16px 16px 32px 16px\",\n    display: \"flex\",\n  },\n});\n\nexport default useStyles;\n","import { useState } from 'react';\n\nexport type ToggleState = [boolean, () => void, (state: boolean) => void]\n\nconst useToggle = (initialValue: boolean): ToggleState => {\n\n    const [state, setState] = useState(initialValue);\n\n    const toggleState = () => setState(s => !s);\n\n    return [state, toggleState, setState];\n}\n\nexport default useToggle;","import { useCallback, useState } from \"react\";\nimport { StateSetter } from \"../utils/types\";\nimport useToggle from \"./useToggle\";\n\nconst useLocalStorage = (key: string, defaultValue?: string): [string | undefined, StateSetter<string | undefined>, () => void] => {\n  // This is the state for the value in the local storage\n  const [state, setState] = useState<string | undefined>(window.localStorage.getItem(key) ?? defaultValue);\n  // State for whether the initial fetch from local storage has been attempted\n  const [fetched, toggleFetched] = useToggle(false);\n\n  if (!fetched) {\n    const item = window.localStorage.getItem(key);\n    toggleFetched();\n    item && setState(item);\n  }\n\n  const setToStorage = useCallback((setter: (string | undefined) | ((oldVal: undefined | string) => string | undefined)) => {\n    if (typeof setter == \"string\" || setter === null) {\n      setState(setter);\n      window.localStorage.setItem(key, setter ?? \"\");\n    } else if (setter) {\n      setState((old_val) => {\n        const new_val = setter(old_val);\n        window.localStorage.setItem(key, new_val ?? \"\");\n        return new_val;\n      })\n    }\n  }, [key]);\n\n  const clearStorage = useCallback(() => {\n      window.localStorage.removeItem(key);\n      setState(undefined);\n  }, [setState, key]);\n\n  return [state, setToStorage, clearStorage];\n};\n\nexport default useLocalStorage;","import { createContext, useMemo } from \"react\";\nimport useLocalStorage from \"../../hooks/useLocalStorage\";\nimport { name_key } from \"../../utils/localStorageKeys\";\nimport { StateSetter } from \"../../utils/types\";\n\ntype UserContextType = {\n  userName: string | undefined;\n  setName: StateSetter<string | undefined>;\n  clearName: () => void;\n};\n\nconst initialValue: UserContextType = {\n  userName: undefined,\n  setName: () => null,\n  clearName: () => null,\n};\n\nexport const UserContext = createContext<UserContextType>(initialValue);\n\nconst UserProvider: React.FC<{}> = ({ children }) => {\n  const [name, setName, clearName] = useLocalStorage(name_key);\n\n  const value = useMemo(\n    () => ({\n      userName: name,\n      setName: setName,\n      clearName: clearName,\n    }),\n    [name, setName, clearName]\n  );\n\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n};\n\nexport default UserProvider;\n","\nexport const name_key = 'name';\n","import { useState } from \"react\";\nimport { State } from \"../utils/types\";\n\n/**\n * Hook for using React state if some external state isn't provided\n */\nconst useDefaultState = <T extends unknown>(optional: State<T> | undefined, defaultState: T) => {\n    const def = useState(defaultState);\n    return optional ?? def;\n}\n\nexport default useDefaultState;","import { makeStyles, Slider, SliderProps } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  progressBarColor: {\n    color: \"#f54414\",\n  },\n  progressBarRoot: {\n    padding: \"0px\",\n    width: \"96%\",\n    transform: \"translateX(2%)\",\n    height: 6,\n  },\n  progressBarRail: {\n    height: 6,\n  },\n  progressBarTrack: {\n    height: 6,\n  },\n  progressBarThumb: {\n    height: 18,\n    width: 18,\n    marginTop: -6,\n  },\n  progressBarMark: {\n    height: 14,\n    marginTop: -3,\n  },\n  markedSlider: {\n    margin: 0,\n  }\n});\n\nconst IndabaSlider: React.FC<SliderProps & { styles?: any }> = ({\n  styles,\n  ...props\n}) => {\n  const classes = useStyles();\n  return (\n    <div style={styles}>\n      <Slider\n        classes={{\n          colorPrimary: classes.progressBarColor,\n          root: classes.progressBarRoot,\n          rail: classes.progressBarRail,\n          track: classes.progressBarTrack,\n          thumb: classes.progressBarThumb,\n          mark: classes.progressBarMark,\n          marked: classes.markedSlider,\n        }}\n        {...props}\n      />\n    </div>\n  );\n};\n\nexport default IndabaSlider;\n","// External Dependencies\nimport { useState, useEffect, RefObject, useMemo, useCallback } from \"react\";\nimport ReactPlayer, { ReactPlayerProps } from \"react-player\";\nimport { useThrottleCallback } from \"@react-hook/throttle\";\n\n// Internal Dependencies\nimport { StateSetter } from \"../../../utils/types\";\nimport { ProgressState } from \"../VideoPlayer\";\n\nconst useProgressBarControls = (\n  initialValue: number,\n  playerUpdater: (newValue: number) => void\n): {\n  value: number;\n  setWithoutVideoUpdate: (newValue: number) => void;\n  setWithVideoUpdate: (newValue: number) => void;\n} => {\n  const [state, setState] = useState(initialValue);\n\n  const setWithVideoUpdate = useCallback((newValue: number) => {\n      setState(newValue);\n      playerUpdater(newValue);\n    }, [setState, playerUpdater]);\n\n  return {\n    value: state,\n    setWithoutVideoUpdate: setState,\n    setWithVideoUpdate\n  };\n};\n\n/**\n * This hook maintains the logic for the VideoPlayer component.\n *\n * It handles the logic for use intractions with the controls of the video,\n * and the automatic fading for when the video isn't interacted with\n *\n * @param playerRef - a reference to the player that this hook controls\n */\nconst useVideoPlayerProps = (\n  progressState: ProgressState,\n  playStateIn: [play: boolean, setPlay: StateSetter<boolean>],\n  playerRef: RefObject<ReactPlayer>,\n  setDuration: (state: number) => void,\n  /** The beginning and end of the clip of the video to play, as a fraction\n   *  If, for example, start is 0 and end is 0.5, only play the first half of\n   *  the video\n   */\n  split: { start: number; end: number },\n  onProgressDrag?: () => void,\n  loop?: boolean\n): {\n  playerProps: ReactPlayerProps;\n  progressBarProps: any;\n  showControls: boolean;\n  isPlaying: boolean;\n  toggleIsPlaying: () => void;\n} => {\n  const [isPlaying, setIsPlaying] = playStateIn;\n\n  /* State for whether the video source has been loaded */\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  /* State for whether the user is scrolling through the video */\n  const [dragging, setDragging] = useState(false);\n\n  /* State for the progress through the video, as a fraction */\n  const { progress, setProgress, setProgressWithVideoUpdate } = progressState;\n\n  useEffect(() => {\n    if (isLoaded && playerRef.current) {\n      setDuration(playerRef.current.getDuration());\n    }\n  }, [setDuration, playerRef, isLoaded]);\n\n  /* These are the props that will be passed onto the ReactPlayer component */\n  const playerProps: ReactPlayerProps = useMemo(\n    () => ({\n      playing: !dragging && isPlaying,\n      progressInterval: 100,\n      onProgress: ({ played /*playedSeconds, loaded, loadedSeconds*/ }) =>\n        setProgress(played),\n      onReady: () => setIsLoaded(true),\n      onEnded: () => setIsPlaying(false),\n    }),\n    [dragging, isPlaying, setIsPlaying, setProgress]\n  );\n\n  const throttleUpdateVideo = useThrottleCallback(\n    (newVal: number) => setProgressWithVideoUpdate(newVal / 100),\n    10\n  );\n\n  const {\n    value: progressBarValue,\n    setWithVideoUpdate: onScrobble,\n    setWithoutVideoUpdate: updateProgressBar,\n  } = useProgressBarControls(progress * 100, throttleUpdateVideo);\n\n  useEffect(() => {\n    updateProgressBar(progress * 100);\n  }, [progress, updateProgressBar]);\n\n  /* These are the props that will be passed onto the Slider component (the slider component is the video progress bar) */\n  const progressBarProps = useMemo(\n    () => ({\n      value: progressBarValue,\n      min: split.start * 100,\n      max: split.end * 100,\n      step: 0.0001,\n      onChange: (_: any, newVal: number | number[]) => {\n        onProgressDrag && onProgressDrag();\n        setDragging(true);\n        onScrobble(newVal as number);\n      },\n      onChangeCommitted: (_: any, newVal: number | number[]) => {\n        setDragging(false);\n      },\n    }),\n    [progressBarValue, split, onProgressDrag, onScrobble]\n  );\n\n  useEffect(() => {\n    /** If the video is playing and it has reached the end, stop it from continuing */\n    if (progress > split.end + 0.0001) {\n      if (loop && !dragging) {\n        setProgressWithVideoUpdate(split.start);\n      } else {\n        setProgressWithVideoUpdate(split.end);\n        setIsPlaying(false);\n      }\n      /** If the video's progress is before the start of the split, set it to the start */\n    } else if (progress < split.start - 0.0001) {\n      setProgressWithVideoUpdate(split.start + 0.1);\n    }\n  }, [progress, isPlaying, setIsPlaying, split.end, split.start, loop, setProgressWithVideoUpdate, dragging]);\n\n  return {\n    playerProps,\n    progressBarProps,\n    showControls: true,\n    isPlaying,\n    toggleIsPlaying: () => setIsPlaying((s) => !s),\n  };\n};\n\nexport default useVideoPlayerProps;\n","import { Tooltip, ValueLabelProps } from \"@material-ui/core\";\n\nconst ProgressBarLabel: React.FC<ValueLabelProps> = ({\n  children,\n  open,\n  value,\n}) => {\n  return <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>{children}</Tooltip>;\n};\n\nexport default ProgressBarLabel;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  videoControlsContainer: {\n    display: \"flex\",\n    left: \"50%\",\n    position: \"absolute\",\n    bottom: \"50%\",\n    transform: \"translate(-50%, 50%)\",\n  },\n  videoPlayerButton: {\n    background: \"linear-gradient(45deg, #FE6B8B 30%, #f54414 90%)\",\n  },\n  roundButton: {\n    borderRadius: \"50px\",\n    width: \"64px\",\n    height: \"64px\",\n    color: \"white\",\n    display: \"relative\",\n    top: \"4px\",\n  },\n  videoPlayerContainer: {\n    position: \"relative\",\n    bottom: 0,\n    top: 0,\n    right: 0,\n    left: 0,\n    // padding: \"20px\",\n  },\n  progressBarContainer: {\n    left: \"0\",\n    bottom: \"0\",\n    marginBottom: \"-39px\",\n    transform: \"translateY(calc(-100% - 16px))\",\n  },\n  progressBarColor: {\n    color: \"#f54414\",\n  },\n  progressBarRoot: {\n    padding: \"0px\",\n    width: \"96%\",\n    transform: \"translateX(2%)\",\n    height: 4,\n  },\n  progressBarRail: {\n    height: 4\n  },\n  progressBarTrack: {\n    height: 4\n  },\n  progressBarThumb: {\n    height: 12,\n    marginTop: -4\n  },\n  progressBarMark: {\n    height: 10,\n    marginTop: -3\n  }\n});\n\nexport default useStyles;\n","import { Box, Button, Mark, SliderProps, Typography } from \"@material-ui/core\";\nimport { Forward5, Pause, PlayArrow, Replay5 } from \"@material-ui/icons\";\nimport React, { RefObject, useCallback } from \"react\";\nimport ReactPlayer from \"react-player\";\nimport useDefaultState from \"../../hooks/useDefaultState\";\nimport { toShortTimeStamp } from \"../../utils/chunkManipulation/chunkManipulation\";\nimport { State, StateSetter } from \"../../utils/types\";\nimport IndabaSlider from \"../IndabaSlider/IndabaSlider\";\nimport useVideoPlayerProps from \"./Hooks/useVideoPlayerProps\";\nimport { SplitState } from \"./Hooks/useVideoPlayerState\";\nimport ProgressBarLabel from \"./ProgressBarLabel\";\nimport useStyles from \"./VideoPlayerStyles\";\n\nexport type VideoPlayerControllerType = {\n  /**\n   * State for the duration of the video, in seconds.\n   *\n   * This starts as zero and is updated when the video initially loads\n   */\n  durationState: State<number>;\n  /** State for whether the video is currently playing */\n  playingState: State<boolean>;\n  /**\n   * The caller of this function can choose to present only part of\n   * the source video to the end user, as if it was the whole video.\n   *\n   * To do so, they set this state to be the start and end of the\n   * partial video they want to show as fractions of the video.\n   *\n   * For example: {start: 0, end: 0.5} would present the first\n   * half of the source video to the user as if it were the entire\n   * video\n   */\n  splitState: State<SplitState>;\n};\n\nexport type ProgressState = {\n  /** Progress through the video as a fraction */\n  progress: number;\n  /**\n   * Update the progress without affecting the video player\n   *\n   * This is what the player itself calls each time it progresses,\n   * to inform the outside world of where it is in the video\n   */\n  setProgress: StateSetter<number>;\n  /**\n   * Update the progress in the video, including the player itself\n   *\n   * This is what is called when the user scrobbles through the video-\n   * it updates the internal state of the video player\n   */\n  setProgressWithVideoUpdate: StateSetter<number>;\n};\n\nexport type VideoPlayerProps = {\n  /**\n   * The user of the VideoPlayer component has the option to control the\n   * player, to do so, they need to provide a controller object which has\n   * the state the component requires\n   */\n  controller?: VideoPlayerControllerType;\n  /**\n   * The url of the video\n   */\n  url: string;\n  /**\n   * A reference to the underlying player component. This is used to\n   * subscribe to events such as onProgress\n   */\n  playerRef: RefObject<ReactPlayer>;\n  /**\n   * The external progress state (see type 'ProgressState' for details)\n   */\n  progressState: ProgressState;\n  /**\n   * Marks to put on the video scrobbler slider. This is used to\n   * mark points of significance in the video, for example, the end\n   * of a chunk\n   */\n  sliderMarks?: Mark[];\n  /**\n   * Optional callback for when the user scrolls through the video\n   */\n  onProgressDrag?: () => void;\n  /** Optional override for slider component */\n  slider?: React.ReactElement<SliderProps>;\n  /** If set to true, the video will play again instantlye when it finishes */\n  loop?: boolean;\n};\n\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({\n  url,\n  playerRef,\n  controller,\n  sliderMarks,\n  progressState,\n  onProgressDrag,\n  slider,\n  loop,\n}) => {\n  const classes = useStyles();\n  const [duration, setDuration] = useDefaultState(controller?.durationState, 0);\n  const { progress, setProgressWithVideoUpdate } = progressState;\n  const playState = useDefaultState(controller?.playingState, false);\n  const [split] = useDefaultState(controller?.splitState, {\n    start: 0,\n    end: 1,\n  });\n\n  const {\n    playerProps,\n    progressBarProps,\n    showControls,\n    isPlaying,\n    toggleIsPlaying,\n  } = useVideoPlayerProps(\n    progressState,\n    playState,\n    playerRef,\n    setDuration,\n    split,\n    onProgressDrag,\n    loop\n  );\n\n  const sliderValueLabelFormat = useCallback(\n    (progress: number) => {\n      return toShortTimeStamp(\n        (progress / 100 - split.start === 0\n          ? 0\n          : progress / 100 - split.start) * duration\n      );\n    },\n    [duration, split.start]\n  );\n\n\n  const skipForwardHandler = useCallback(() => {\n    duration &&\n      setProgressWithVideoUpdate((progress) => progress + 5 / duration);\n  }, [setProgressWithVideoUpdate, duration]);\n\n  const skipBackwardHandler = useCallback(() => {\n    duration &&\n      setProgressWithVideoUpdate((progress) => progress - 5 / duration);\n  }, [setProgressWithVideoUpdate, duration]);\n\n  return (\n    <Box className={classes.videoPlayerContainer}>\n      <ReactPlayer\n        url={url}\n        ref={playerRef}\n        width=\"100%\"\n        height=\"100%\"\n        loop={loop}\n        {...playerProps}\n      />\n      {showControls && (\n        <div className={classes.videoControlsContainer}>\n          <div style={{ position: \"absolute\", right: \"240px\", bottom: -4 }}>\n            <Button\n              disableRipple\n              className={`${classes.videoPlayerButton} ${classes.roundButton}`}\n              onClick={skipBackwardHandler}\n            >\n              <Replay5 fontSize=\"large\" />\n            </Button>\n          </div>\n          <Button\n            disableRipple\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.videoPlayerButton}\n            onClick={toggleIsPlaying}\n          >\n            {(isPlaying && <Pause fontSize=\"large\" />) || (\n              <PlayArrow fontSize=\"large\" />\n            )}\n          </Button>\n          <div style={{ position: \"absolute\", left: \"240px\", bottom: -4 }}>\n            <Button\n              onClick={skipForwardHandler}\n              disableRipple\n              className={`${classes.videoPlayerButton} ${classes.roundButton}`}\n            >\n              <Forward5 fontSize=\"large\" />\n            </Button>\n          </div>\n        </div>\n      )}\n      {slider || (\n        <div className={classes.progressBarContainer}>\n          {/* Progress Bar */}\n          <Typography\n            variant=\"caption\"\n            style={{ margin: \"8px\", color: \"#FFFFFF\" }}\n          >\n            {duration &&\n              `${toShortTimeStamp(\n                (progress - split.start) * duration\n              )} / ${toShortTimeStamp((split.end - split.start) * duration)}`}\n          </Typography>\n          <IndabaSlider\n            valueLabelDisplay=\"auto\"\n            valueLabelFormat={sliderValueLabelFormat}\n            ValueLabelComponent={ProgressBarLabel}\n            marks={sliderMarks ? sliderMarks : []}\n            {...progressBarProps}\n          />\n        </div>\n      )}\n    </Box>\n  );\n};\n\nexport default VideoPlayer;\n","import { RefObject, useCallback, useRef, useState } from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { State } from \"../../../utils/types\";\nimport { ProgressState, VideoPlayerControllerType } from \"../VideoPlayer\";\nimport { SplitState } from \"./useVideoPlayerState\";\n\n/**\n * This hook is used for when the user of the VideoPlayer component wants to\n * be able to externally control the state of the player. It provides the means\n * to read and write progress and playing states, read the duration state and\n * the controller object to be passed to the VideoPlayer component.\n * \n * So basically, this hook gives a VideoPlayer's parent component the option\n * to get access and control to it's state\n */\nconst useVideoPlayerController = (autoPlay?: boolean): {\n  /** The progress through the video */\n  progressState: ProgressState;\n  /** The state for whether the video is currently playin */\n  playingState: State<boolean>;\n  /**\n   * State for for where the video is 'split'\n   *\n   * Callers of this hook can control the video such that only\n   * a portion of it is presented to the user, as if that portion\n   * was the entire video.\n   * \n   * For example, if the split state is {start: 0, end: 0.5},\n   * only the first half of the video will be presented to the user,\n   * however, it will seem to the user that that is the entire video\n   */\n  splitState: State<SplitState>;\n  /**\n   * The duration of the video, fetched asynchronously from the ReactPlayer component,\n   * so it's initially 0, and is set by this hook to the correct duration (in seconds)\n   * when the video component initially loads\n   */\n  duration: number;\n  /**\n   * The controller itself, this should be passed to\n   * the VideoPlayer component 'controller' prop\n   */\n  controller: VideoPlayerControllerType;\n  /** \n   * A ReactPlayer ref, to be passed to\n   * the VideoPlayer component 'playerRef' prop\n   */\n  playerRef: RefObject<ReactPlayer>;\n} => {\n  const playerRef = useRef<ReactPlayer>(null);\n\n  const updatePlayerProgress = useCallback((newVal: number) => {\n    const secondsLoaded = playerRef?.current?.getSecondsLoaded()\n    secondsLoaded && secondsLoaded > 0 && playerRef.current?.seekTo(newVal, \"fraction\");\n  }, []);\n\n  const [progress, setProgress] = useState(0);\n\n  const splitState = useState<SplitState>({ start: 0, end: 1 });\n\n  const setProgressWithVideoUpdate = useCallback((\n    progressSetter: number | ((prevProgress: number) => number)\n  ) => {\n    if (typeof progressSetter === \"number\") {\n      setProgress(progressSetter);\n      updatePlayerProgress(progressSetter);\n    } else {\n      setProgress((prevVal) => {\n        const newVal = progressSetter(prevVal)\n        updatePlayerProgress(newVal);\n        return newVal;\n      });\n    }\n  }, [updatePlayerProgress]);\n\n  const [duration, setDuration] = useState(0);\n\n  const playingState = useState(autoPlay ?? false);\n\n  return {\n    progressState: { progress, setProgress, setProgressWithVideoUpdate },\n    splitState,\n    playingState,\n    duration,\n    controller: {\n      durationState: [duration, setDuration],\n      playingState,\n      splitState,\n    },\n    playerRef,\n  };\n};\n\nexport default useVideoPlayerController;\n","/**\n * Given an array and a binary function,\n * Return a new array that is the result of calling the function\n * on adjacent items in the array\n */\nconst adjacentMap = <T extends unknown>(\n  arr: T[],\n  func: (a: T, b: T) => T\n): T[] =>\n  arr\n    .reduce(\n      (acc: [T, T][], val, ind, input) =>\n        ind + 1 < input.length ? acc.concat([[val, input[ind + 1]]]) : acc,\n      []\n    )\n    .map((pair) => func(pair[0], pair[1]));\n\nexport default adjacentMap;\n","\n/**\n * Given an array and a predicate,\n * returns true if any of the array's elements satisfies the predicate,\n * otherwise, returns false\n * \n * @param arr the array to search\n * @param pred the predicate to test for\n */\nconst oneSatisfies = <T extends unknown>(\n  arr: T[],\n  pred: (val: T) => boolean\n): boolean => arr.filter(pred).length > 0;\n\nexport default oneSatisfies;\n","import { createContext, useContext } from \"react\";\nimport { Chunk } from \"../types\";\n\ntype StateType = [Chunk[], (setter: (newState: Chunk[]) => Chunk[]) => void]\n\nconst ChunksContext = createContext<\n  StateType\n>([[], () => null]);\n\ntype ChunksContextType = React.FC<{\n  state: StateType;\n}>;\n\nconst makeChunksContext = (): {\n  ChunksProvider: ChunksContextType;\n  useChunksState: () => [\n    Chunk[],\n    (setter: (newState: Chunk[]) => Chunk[]) => void\n  ];\n} => {\n  const ChunksProvider: React.FC<{ state: StateType }> = ({\n    state,\n    children,\n  }) => {\n    return (\n      <ChunksContext.Provider value={state}>{children}</ChunksContext.Provider>\n    );\n  };\n  const useChunksState = () => useContext(ChunksContext);\n  return { ChunksProvider, useChunksState };\n};\n\nconst chunksContext = makeChunksContext();\n\nexport default chunksContext;\n","// External Dependencies\nimport { useCallback } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\n// Internal Dependencies\nimport adjacentMap from \"../adjacentMap\";\nimport {\n  getAdjacentChunks,\n  getEnclosingChunk,\n  getLastEndTimeSeconds,\n  getLastEndTimeStamp,\n  invalidSplit,\n  toTimeStamp,\n} from \"../chunkManipulation/chunkManipulation\";\nimport oneSatisfies from \"../oneSatisfies\";\nimport { Chunk, Transcription } from \"../types\";\nimport chunksContext from \"./chunksContext\";\n\n/**\n * Get a function for deleting chunks\n */\nexport const useDeleteChunk = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n) => {\n  /**\n   * Delete a chunk from the chunks in the ChunksContext\n   *\n   * @param toDelete - the chunk to delete\n   */\n  return (toDelete: Chunk) =>\n    setChunks((chunks) =>\n      /*\n      This call to adjacentMap is checking if, after deleting the chunk, there\n      is a gap in the chunks. If so, we need to create a new chunk that closes\n      the gap\n\n      At a high level:\n      If we have chunks A B C D, and we delete chunk B we now have a gap\n      between chunks A and C. To fix this, we need to create a new chunk\n      that has the same start time as A and the same end time as C,\n      so we end up with: E D, where E is a new chunk that we create in this\n      call to adjacentMap\n      */\n      adjacentMap(\n        chunks.filter((c) => c.id !== toDelete.id),\n        (a: Chunk, b: Chunk) => {\n          if (a.endtimeseconds !== b.starttimeseconds) {\n            return {\n              ...b,\n              starttimeseconds: a.endtimeseconds,\n              starttimestamp: a.endtimestamp,\n              id: uuidv4(),\n              updatedat: new Date(),\n              transcriptions: [],\n            };\n          }\n          return b;\n        }\n      )\n        .concat(\n          ((first) =>\n            first\n              ? first.starttimeseconds === 0\n                ? [first]\n                : [\n                    {\n                      ...first,\n                      starttimeseconds: 0,\n                      starttimestamp: \"00:00:00:00\",\n                      id: uuidv4(),\n                      updatedat: new Date(),\n                      transcriptions: [],\n                    },\n                  ]\n              : [])(chunks.filter((c) => c.id !== toDelete.id)[0])\n        )\n        .sort((a, b) => a.endtimeseconds - b.endtimeseconds)\n    );\n};\n\n/**\n * Get a function for creating new chunks\n */\nexport const useNewChunk = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n) => {\n  /**\n   * This function creates a new chunk in the video.\n   * Invalid chunks are defined by the invalidSplit function and will not be created\n   *\n   * @param splitAt - the point in the video (as a fraction) where the new chunk should end\n   * @param storyDuration - the length of the video being chunked\n   * @param userName - the name of the user doing the chunking\n   */\n  return (splitAt: number, storyDuration: number, userName: string) => {\n    setChunks((chunks) => {\n      if (invalidSplit(chunks, splitAt, storyDuration)) {\n        return chunks;\n      }\n      const enclosingChunk = getEnclosingChunk(chunks, splitAt);\n      if (enclosingChunk !== undefined) {\n        const newChunks = chunks\n          .filter((c) => c.id !== enclosingChunk.id)\n          .concat([\n            {\n              starttimestamp: enclosingChunk.starttimestamp,\n              starttimeseconds: enclosingChunk.starttimeseconds,\n              endtimestamp: toTimeStamp(splitAt * storyDuration),\n              endtimeseconds: splitAt,\n              creatorid: userName,\n              updatedat: new Date(),\n              id: uuidv4(),\n              transcriptions: [],\n            },\n            {\n              starttimestamp: toTimeStamp(splitAt * storyDuration),\n              starttimeseconds: splitAt,\n              endtimestamp: enclosingChunk.endtimestamp,\n              endtimeseconds: enclosingChunk.endtimeseconds,\n              creatorid: userName,\n              updatedat: new Date(),\n              id: uuidv4(),\n              transcriptions: [],\n            },\n          ])\n          .sort((a, b) => a.endtimeseconds - b.endtimeseconds);\n        return newChunks;\n      } else {\n        const newChunks = chunks.concat([\n          {\n            starttimestamp: getLastEndTimeStamp(chunks),\n            endtimestamp: toTimeStamp(splitAt * storyDuration),\n            starttimeseconds: getLastEndTimeSeconds(chunks),\n            endtimeseconds: splitAt,\n            creatorid: userName,\n            updatedat: new Date(),\n            id: uuidv4(),\n            transcriptions: [],\n          },\n        ]);\n\n        return newChunks;\n      }\n    });\n  };\n};\n\nconst removeReview = (chunk: Chunk) => ({ ...chunk, review: undefined });\n\nconst getTranscriptionByCreator = (chunk: Chunk, userName: string) =>\n  chunk.transcriptions.filter(\n    (transcription) => transcription.creatorid === userName\n  )[0];\n\n/**\n * Get a function for updating a chunks transcription\n * list. Passing an empty string as 'updatedTranscription' deletes the transcription\n */\nexport const useUpdateTranscription = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n): ((\n  toUpdate: Chunk,\n  updatedTranscription: string,\n  userName: string\n) => void) => {\n  const updateFunction = useCallback(\n    (toUpdate: Chunk, updatedTranscription: string, userName: string) => {\n      setChunks((chunks) => {\n        const newChunks = chunks.map((chunk) =>\n          chunk.id === toUpdate.id\n            ? {\n                ...(chunk.review?.selectedtranscription ===\n                  getTranscriptionByCreator(chunk, userName)?.id &&\n                updatedTranscription === \"\"\n                  ? removeReview(chunk)\n                  : chunk),\n                /* This call to oneSatisfies checks if the current user has\n                 * already made a transcription for this chunk (in that case,\n                 * update that chunk instead of creating a new one)\n                 */\n                transcriptions: oneSatisfies(\n                  chunk.transcriptions,\n                  (t) => t.creatorid === userName\n                )\n                  ? /* The ternary here is to delete a transcription if a user has a transcription but is now transcribing an empty string */\n                    updatedTranscription === \"\"\n                    ? chunk.transcriptions.filter(\n                        (t) => t.creatorid !== userName\n                      )\n                    : chunk.transcriptions.map((t) =>\n                        t.creatorid === userName\n                          ? {\n                              ...t,\n                              content: updatedTranscription,\n                              updatedat: new Date(),\n                            }\n                          : t\n                      )\n                  : /* The ternary here is to avoid adding empty transcriptions */\n                    chunk.transcriptions.concat(\n                      updatedTranscription === \"\"\n                        ? []\n                        : [\n                            {\n                              creatorid: userName,\n                              content: updatedTranscription,\n                              id: uuidv4(),\n                              updatedat: new Date(),\n                            },\n                          ]\n                    ),\n              }\n            : chunk\n        );\n        return newChunks;\n      });\n    },\n    [setChunks]\n  );\n\n  return updateFunction;\n};\n\n/**\n * Get a function for updating the Review of a Chunk\n */\nexport const useUpdateReview = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n) => {\n  return (\n    toUpdate: Chunk,\n    selectedTranscription: Transcription,\n    userName: string\n  ) => {\n    setChunks((chunks) =>\n      chunks.map((chunk) =>\n        chunk.id === toUpdate.id\n          ? /*\n             * This call to oneSatisfies simply checks if the\n             * selectedTranscription exists on the Chunk\n             * (if it doesn't, don't update the chunk)\n             */\n            oneSatisfies(\n              chunk.transcriptions,\n              (a) => a.id === selectedTranscription.id\n            )\n            ? {\n                ...chunk,\n                review: {\n                  reviewedat: new Date(),\n                  selectedtranscription: selectedTranscription.id,\n                  reviewedby: userName,\n                },\n              }\n            : chunk\n          : chunk\n      )\n    );\n  };\n};\n\n/**\n * Get a function for deleting the Review of a Chunk\n */\nexport const useDeleteReview = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n) => {\n  return (toDelete: Chunk) => {\n    setChunks((chunks) =>\n      chunks.map((chunk) =>\n        chunk.id === toDelete.id ? { ...chunk, review: undefined } : chunk\n      )\n    );\n  };\n};\n\nconst renameChunk = (newName: string, chunk: Chunk): Chunk =>\n  newName !== \"\" ? { ...chunk, name: newName } : { ...chunk, name: undefined };\n\nconst deleteNegativeChunks = (chunks: Chunk[]): Chunk[] =>\n  chunks.filter((chunk) => chunk.endtimeseconds > chunk.starttimeseconds);\n\n/**\n * Hook for getting a function for cropping a chunk\n *\n * This involves modifying the start and end times\n * of the cropped chunk as well as the chunks on either\n * side of the chunk.\n *\n * The user may also, optionally, rename the chunk using\n * this action\n */\nexport const useCropChunk = (\n  setChunks: (setter: (newState: Chunk[]) => Chunk[]) => void\n) => {\n  return (\n    toUpdate: Chunk,\n    storyDuration: number,\n    newSplit: [number, number],\n    userName: string,\n    newName?: string\n  ) => {\n    setChunks((chunks) => {\n      const neighbouringChunks = getAdjacentChunks(toUpdate, chunks);\n      return deleteNegativeChunks(\n        chunks\n          .map((chunk) =>\n            chunk.id === toUpdate.id\n              ? {\n                  ...(newName\n                    ? renameChunk(newName, chunk)\n                    : { ...chunk, name: undefined }),\n                  starttimeseconds: newSplit[0],\n                  starttimestamp: toTimeStamp(newSplit[0] * storyDuration),\n                  endtimeseconds: newSplit[1],\n                  endtimestamp: toTimeStamp(newSplit[1] * storyDuration),\n                  updatedat: new Date(),\n                }\n              : chunk.id === neighbouringChunks.next?.id\n              ? {\n                  ...chunk,\n                  starttimeseconds: newSplit[1],\n                  starttimestamp: toTimeStamp(newSplit[1] * storyDuration),\n                  updatedat: new Date(),\n                }\n              : chunk.id === neighbouringChunks.prev?.id\n              ? {\n                  ...chunk,\n                  endtimeseconds: newSplit[0],\n                  endtimestamp: toTimeStamp(newSplit[0] * storyDuration),\n                  updatedat: new Date(),\n                }\n              : chunk\n          )\n          /*\n           * This is the case where the chunk the user is editing is the first\n           * chunk, and they are editing it so that it doesn't start at the very\n           * start. In this case, we need a new chunk to cover this gap\n           */\n          .concat(\n            !neighbouringChunks.prev && newSplit[0] !== 0\n              ? [\n                  {\n                    starttimestamp: toTimeStamp(0),\n                    starttimeseconds: 0,\n                    endtimestamp: toTimeStamp(newSplit[0] * storyDuration),\n                    endtimeseconds: newSplit[0],\n                    creatorid: userName,\n                    updatedat: new Date(),\n                    id: uuidv4(),\n                    transcriptions: [],\n                  },\n                ]\n              : []\n          )\n      ).sort((a, b) => a.endtimeseconds - b.endtimeseconds);\n    });\n  };\n};\n\n/**\n * Hook to get a function for renaming chunks\n *\n * If the newName parameter is an empty string, the name\n * will be set to undefined\n */\nexport const useRenameChunk = () => {\n  const [, setChunks] = chunksContext.useChunksState();\n\n  return (toUpdate: Chunk, newName: string) => {\n    setChunks((chunks) =>\n      chunks.map((chunk) =>\n        chunk.id === toUpdate.id ? renameChunk(newName, chunk) : chunk\n      )\n    );\n  };\n};\n\n/**\n * Hook to get a function that accepts a function\n * and calls that function with the latest chunks\n * according to the server\n */\nexport const useDoWithChunks = () => {\n  const [, setChunks] = chunksContext.useChunksState();\n\n  return (doWith: (chunks: Chunk[]) => void) => {\n    setChunks((chunks) => {\n      doWith(chunks);\n      return chunks;\n    });\n  };\n};\n","import { Button, ButtonProps, makeStyles } from \"@material-ui/core\";\n\nconst useButtonStyles = makeStyles({\n  button: (round) => ({\n    backgroundColor: \"#d9534f\",\n    color: \"#FFFFFF\",\n    lineHeight: \"34px\",\n    height: \"60px\",\n    borderRadius: round ? \"50%\" : \"6px\",\n    padding: round ? \"4px\" : \"3px 8px 3px 8px\",\n    textTransform: \"none\",\n    '&:hover': {\n      backgroundColor: \"#ff7570\",\n    },\n    '&:disabled': {\n      backgroundColor: \"#fabbb9\",\n    }\n  }),\n});\n\nconst useStyleClass = (styles: any | undefined) => makeStyles({ overrideStyles: { ...styles }});\n\nconst IndabaButton: React.FC<\n  ButtonProps & { round?: boolean; styles?: any }\n> = ({ children, round, styles, ...props }) => {\n  const overrideClass = useStyleClass(styles)()\n\n  const classes = useButtonStyles(!!round);\n\n  return (\n    <Button disableRipple className={`${classes.button} ${overrideClass.overrideStyles}`} {...props}>\n      {children}\n    </Button>\n  );\n};\n\nexport default IndabaButton;\n","import { Paper } from '@material-ui/core';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\nimport React from 'react';\n\nconst FlatPaper: React.FC<{ style?: CSSProperties }> = React.forwardRef(({ children, style }, ref) => {\n    return (\n        <Paper ref={ref} elevation={0} style={style}>\n            {children}\n        </Paper>\n    );\n});\n\nexport default FlatPaper;","import {\n  Container,\n  DialogContent,\n  Divider,\n  makeStyles,\n  Modal,\n  ModalProps,\n} from \"@material-ui/core\";\nimport { Close } from \"@material-ui/icons\";\nimport React, { ReactElement } from \"react\";\nimport FlatPaper from \"../FlatPaper/FlatPaper\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\n\nconst useStyles = makeStyles({\n  modal: {\n    outline: \"0\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  modalContentBox: {\n    padding: \"16px\",\n  },\n});\n\ntype CentralModalProps = ModalProps & {\n  exit?: () => void;\n  header?: ReactElement;\n};\n\nconst CentralModal: React.FC<CentralModalProps> = ({\n  children,\n  header,\n  exit,\n  ...props\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Modal className={classes.modal} {...props}>\n      <DialogContent style={{ outline: \"none\" }}>\n        <FlatPaper>\n          {header && <Container>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                paddingTop: \"8px\",\n              }}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"center\",\n                  alignContent: \"center\",\n                }}\n              >\n                {header}\n              </div>\n              <IndabaButton onClick={exit}>\n                <Close />\n              </IndabaButton>\n            </div>\n            <Divider style={{ margin: \"12px 0px 12px 0px\" }} />\n          </Container>}\n          <div className={classes.modalContentBox}>{children}</div>\n        </FlatPaper>\n      </DialogContent>\n    </Modal>\n  );\n};\n\nexport default CentralModal;\n","\n// This was gotten from /config/defaultlocal.js\n// It should probably be changed there as well...?\nconst api_key = window.location.href.split('apikey=')[1];\n\nexport const api_base_address = \"localhost\";\n\nexport default api_key;","import { Container } from \"@material-ui/core\";\nimport React, {\n  useState,\n  useEffect,\n  ChangeEvent,\n  FormEvent,\n} from \"react\";\nimport { api_base_address } from \"../../utils/getApiKey\";\nimport { Chunk, State } from \"../../utils/types\";\nimport IndabaSlider from \"../IndabaSlider/IndabaSlider\";\nimport useVideoPlayerController from \"../VideoPlayer/Hooks/useVideoPlayerController\";\nimport VideoPlayer from \"../VideoPlayer/VideoPlayer\";\n\nconst CropThumbComponent: React.FC<{}> = (props) => {\n  const isProgressThumb = (props as any)[\"data-index\"] === 1;\n  return (\n    <span\n      {...props}\n      style={{\n        ...(props as any).style,\n        transform: isProgressThumb ? \"0\" : \"translateY(14px)\",\n        backgroundColor: !isProgressThumb ? \"#f77965\" : \"#d9534f\",\n      }}\n    >\n      {!isProgressThumb ? (\n        <div\n          style={{\n            height: \"14px\",\n            width: \"4px\",\n            transform: \"translateY(-9px)\",\n            backgroundColor: \"#f77965\",\n          }}\n        />\n      ) : null}\n    </span>\n  );\n};\n\ntype ChunkCropperProps = {\n  story_id: string,\n  chunk: Chunk;\n  storyDuration: number;\n  croppedSplitState: State<[number, number]>;\n};\n\nconst ChunkCropper: React.FC<ChunkCropperProps> = ({\n  story_id,\n  chunk,\n  storyDuration,\n  croppedSplitState,\n}) => {\n  \n  const {\n    progressState: cropPlayerProgressState,\n    controller: cropPlayerController,\n    playerRef: cropperPlayerRef\n  } = useVideoPlayerController();\n\n  const [videoSplit, setVideoSplit] = useState([0, 0] as [number, number]);\n  const [croppedSplit, setCroppedSplit] = croppedSplitState;\n\n  const { setProgressWithVideoUpdate } = cropPlayerProgressState;\n\n  /* Set initial state based on props  */\n  useEffect(() => {\n    setProgressWithVideoUpdate(chunk.starttimeseconds);\n    const start = chunk.starttimeseconds - 2 / storyDuration;\n    const end = chunk.endtimeseconds + 2 / storyDuration;\n    setVideoSplit([start < 0 ? 0 : start, end > 1 ? 1 : end]);\n    setCroppedSplit([chunk.starttimeseconds, chunk.endtimeseconds]);\n  }, [chunk.starttimeseconds, chunk.endtimeseconds, storyDuration, setProgressWithVideoUpdate, setCroppedSplit]);\n\n  return (\n    <div>\n      <Container>\n        <h2 style={{ margin: 0 }}>Cropping:</h2>\n      </Container>\n      <VideoPlayer\n        progressState={cropPlayerProgressState}\n        url={`http://${api_base_address}:8845/api/watch/getvideo/${story_id}`}\n        controller={cropPlayerController}\n        playerRef={cropperPlayerRef}\n        slider={\n          <IndabaSlider\n            value={[\n              croppedSplit[0] * 100,\n              cropPlayerProgressState.progress * 100,\n              croppedSplit[1] * 100,\n            ]}\n            min={videoSplit[0] * 100}\n            max={videoSplit[1] * 100}\n            step={0.0001}\n            ThumbComponent={CropThumbComponent}\n            onChange={\n              ((_: any, newValue: number | number[]) => {\n                setCroppedSplit([\n                  (newValue as number[])[0] / 100,\n                  (newValue as number[])[2] / 100,\n                ]);\n                cropPlayerProgressState.setProgressWithVideoUpdate((newValue as number[])[1] / 100);\n              }) as ((\n                event: ChangeEvent<{}>,\n                value: number | number[]\n              ) => void) &\n                ((event: FormEvent<HTMLSpanElement>) => void)\n            }\n          />\n        }\n      />\n    </div>\n  );\n};\n\nexport default ChunkCropper;\n","// External Dependencies\nimport { TextField } from \"@material-ui/core\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useCropChunk } from \"../../utils/ChunksContext/chunksActions\";\nimport chunksContext from \"../../utils/ChunksContext/chunksContext\";\n\n// Internal Dependencies\nimport { Chunk, State } from \"../../utils/types\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport ChunkCropper from \"../ChunkEditor/ChunkCropper\";\nimport { UserContext } from \"../UserProvider/UserProvider\";\n\nconst ChunkNameEditor: React.FC<{ nameState: State<string> }> = ({\n  nameState: [name, setName],\n}) => {\n  return (\n    <TextField\n      variant=\"outlined\"\n      label=\"Edit Name\"\n      style={{ marginTop: \"8px\" }}\n      value={name}\n      onChange={(e) => setName(e.target.value)}\n    />\n  );\n};\n\nconst EditChunkModal: React.FC<{\n  story_id: string,\n  chunk: Chunk | undefined;\n  exit: () => void;\n  storyDuration: number;\n}> = ({ story_id, chunk, exit, storyDuration }) => {\n  const [name, setName] = useState(\"\");\n\n  const [, setChunks] = chunksContext.useChunksState();\n\n  useEffect(() => {\n    chunk && setName(chunk.name ? chunk.name : \"\");\n  }, [chunk]);\n\n  const cropChunk = useCropChunk(setChunks);\n\n  const [newCropSplit, setNewCropSplit] = useState<[number, number]>([0, 0]);\n\n  const { userName } = useContext(UserContext);\n\n  return (\n    <CentralModal\n      exit={() => {\n        chunk && userName && cropChunk(chunk, storyDuration, newCropSplit, userName, name);\n        exit();\n      }}\n      open={chunk !== undefined}\n      header={<ChunkNameEditor nameState={[name, setName]} />}\n    >\n      <div style={{paddingBottom: \"24px\"}}>\n        {chunk && <ChunkCropper story_id={story_id} croppedSplitState={[newCropSplit, setNewCropSplit]} storyDuration={storyDuration} chunk={chunk} />}\n      </div>\n    </CentralModal>\n  );\n};\n\nexport default EditChunkModal;\n","import { useRef } from \"react\";\nimport ReactPlayer from \"react-player\";\n\ntype VideoThumbnailProps = {\n  url: string;\n  time: number;\n};\n\n/*\n * TODO - Find a better solution for this, this solution is resource intensive as it\n * loads a whole video component just to use a single frame...\n */\nconst VideoThumbnail: React.FC<VideoThumbnailProps> = ({ url, time }) => {\n  const playerRef = useRef<ReactPlayer>(null);\n  // const [screenshot, setScreenshot] = useState<null | HTMLVideoElement >(null);\n\n  // useEffect(() => {\n  //   const video = document.createElement(\"video\");\n  //   video.crossOrigin = \"anonymous\";\n  //   video.src = url;\n  //   video.addEventListener(\"loadeddata\", () => {\n  //     video.currentTime = time;\n  //     setScreenshot(video);\n  //   });\n  // }, []);\n\n  // return screenshot ? (\n  //   <div>{screenshot}</div>\n  // ) : <div>Loading</div>\n  return (\n    <ReactPlayer\n      crossOrigin=\"anonymous\"\n      url={url}\n      width=\"100%\"\n      height=\"100%\"\n      playing={false}\n      ref={playerRef}\n      id={\"video-thumbnail-player\"}\n      onReady={() => {\n        playerRef.current?.seekTo(time, \"fraction\");\n      }}\n      \n    />\n  );\n};\n\nexport default VideoThumbnail;\n","import { ButtonBase, makeStyles, Typography } from \"@material-ui/core\";\nimport LocalizedStrings from \"react-localization\";\nimport { ChevronLeft } from \"@material-ui/icons\";\nimport React from \"react\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    back: \"Back\",\n  },\n});\n\nconst useStyles = makeStyles({\n  backButton: {},\n});\n\ntype BackButtonProps = {\n  action: () => void;\n};\n\nconst BackButton: React.FC<BackButtonProps> = ({ action }) => {\n  const classes = useStyles();\n\n  return (\n    <ButtonBase className={classes.backButton} onClick={action}>\n      <ChevronLeft fontSize=\"large\" />\n      <Typography variant=\"h5\" style={{ position: \"relative\", left: -5 }}>\n        {strings.back}\n      </Typography>\n    </ButtonBase>\n  );\n};\n\nexport default BackButton;\n","import { Warning } from \"@material-ui/icons\";\nimport React, { ReactNode } from \"react\";\n\ntype WarningMessageProps = {\n  message: string | ReactNode;\n};\n\nconst WarningMessage: React.FC<WarningMessageProps> = ({ message }) => {\n  return (\n    <h2 style={{ margin: 0 }}>\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Warning style={{ marginRight: \"8px\" }} fontSize=\"large\" />\n        {message}\n      </div>\n    </h2>\n  );\n};\n\nexport default WarningMessage;\n","import { Typography } from \"@material-ui/core\";\nimport { Delete } from \"@material-ui/icons\";\nimport React, { PropsWithChildren, ReactElement } from \"react\";\nimport { NotAttemptingAction } from \"../../hooks/useConfirmBeforeAction\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\nimport WarningMessage from \"../WarningMessage/WarningMessage\";\n\ntype ConfirmIntentModalProps<T extends any[]> = {\n  actionControls: {\n    attemptingActionWith: T | NotAttemptingAction;\n    cancelAction: () => void;\n    confirmAction: () => void;\n  };\n  warningMessage: ReactElement;\n  children: (...args: T) => ReactElement;\n};\nconst ConfirmIntentModal = <T extends any[]>(\n  props: PropsWithChildren<ConfirmIntentModalProps<T>>\n) => {\n  const { actionControls, warningMessage, children } = props;\n\n  const { attemptingActionWith, cancelAction, confirmAction } = actionControls;\n\n  return (\n    <CentralModal\n      open={attemptingActionWith !== NotAttemptingAction.True}\n      exit={cancelAction}\n      header={<WarningMessage message={warningMessage} />}\n    >\n      <div>\n        {attemptingActionWith !== NotAttemptingAction.True &&\n          children(...attemptingActionWith)}\n        <br />\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <IndabaButton style={{ marginTop: \"8px\" }} onClick={confirmAction}>\n            <Delete fontSize=\"large\" style={{ marginRight: \"8px\" }} />\n            <Typography variant=\"subtitle1\">Confirm</Typography>\n          </IndabaButton>\n        </div>\n      </div>\n    </CentralModal>\n  );\n};\n\nexport default ConfirmIntentModal;\n","import React from \"react\";\nimport { getNameOf } from \"../../utils/chunkManipulation/chunkManipulation\";\nimport { Chunk } from \"../../utils/types\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport SimpleCard from \"../SimpleCard/SimpleCard\";\n\ntype TranscriptionsModalProps = {\n  /* The chunk to show the transcriptions for.\n   * When this is undefined, don't show the modal\n   */\n  chunk: Chunk | undefined;\n  exit: () => void;\n};\n\nconst TranscriptionsModal: React.FC<TranscriptionsModalProps> = ({\n  chunk,\n  exit,\n}) => (\n  <CentralModal\n    open={chunk !== undefined}\n    // TODO- this breaks if the name is too long\n    header={\n      <h2\n        style={{ margin: 0, overflowWrap: \"anywhere\" }}\n      >{`Transcriptions for \"${chunk && getNameOf(chunk)}\"`}</h2>\n    }\n    exit={exit}\n  >\n    <div style={{ overflow: \"scroll\" }}>\n      {chunk?.transcriptions.map((transcription) => (\n        <SimpleCard\n          key={transcription.id}\n          title={<b>{transcription.creatorid}</b>}\n          contentStyle={{ whiteSpace: \"pre\" }}\n        >\n          {transcription.content}\n        </SimpleCard>\n      ))}\n    </div>\n  </CentralModal>\n);\n\nexport default TranscriptionsModal;\n","import { useEffect, useRef } from \"react\";\n\nconst ScrollToOnMount: React.FC<{ style?: any }> = ({ children, style }) => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    ref.current?.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"end\",\n      inline: \"nearest\",\n    });\n  }, []);\n\n  return <div ref={ref} style={{...style}}>{children}</div>;\n};\n\nexport default ScrollToOnMount;\n","import { Menu, MenuItem } from \"@material-ui/core\";\nimport React, { ReactNode } from \"react\";\n\ntype IndabaMenuProps = {\n  anchor: null | Element;\n  show: boolean;\n  menuItems: { content: ReactNode; handler: () => void }[];\n};\n\nconst IndabaMenu = React.forwardRef<ReactNode, IndabaMenuProps>(({ anchor, show, menuItems }, ref) => {\n  return (\n    <Menu ref={ref} anchorEl={anchor} open={show}>\n      {menuItems.map((item, idx) => (\n        <MenuItem key={idx} onClick={item.handler}>{item.content}</MenuItem>\n      ))}\n    </Menu>\n  );\n});\n\nexport default IndabaMenu;\n","// External Dependencies\nimport { ClickAwayListener, IconButton } from \"@material-ui/core\";\nimport { MoreVert } from \"@material-ui/icons\";\nimport React, { ReactNode, useRef, useState } from \"react\";\n\n// Internal Dependencies\nimport IndabaMenu from \"../IndabaMenu/IndabaMenu\";\n\ntype ChunkCardContextMenuProps = {\n  menuItems: { content: ReactNode; handler: () => void }[];\n};\n\nconst ChunkCardContextMenu: React.FC<ChunkCardContextMenuProps> = ({\n  menuItems,\n}) => {\n  const [showContextMenu, setShowContextMenu] = useState(false);\n\n  const ref = useRef<HTMLButtonElement>(null);\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        top: 0,\n        right: 0,\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignSelf: \"flex-start\",\n      }}\n    >\n      <ClickAwayListener onClickAway={() => setShowContextMenu(false)}>\n        <IconButton\n          style={{ padding: 0 }}\n          onClick={() => setShowContextMenu(true)}\n          ref={ref}\n        >\n          <MoreVert />\n        </IconButton>\n      </ClickAwayListener>\n      <IndabaMenu\n        show={showContextMenu}\n        anchor={ref.current}\n        menuItems={menuItems}\n      />\n    </div>\n  );\n};\n\nexport default ChunkCardContextMenu;\n","import { CircularProgress, DialogContent, makeStyles, Modal } from \"@material-ui/core\";\nimport React from \"react\";\n\ntype LoadingModalProps = {\n  open: boolean;\n};\n\nconst useStyles = makeStyles({\n  loadingModal: {\n    outline: \"0\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n\nconst LoadingModal: React.FC<LoadingModalProps> = ({ open }) => {\n  const classes = useStyles();\n  return (\n    <Modal open={open} className={classes.loadingModal}>\n      <DialogContent\n        style={{ outline: \"none\", display: \"flex\", justifyContent: \"center\" }}\n      >\n        <CircularProgress />\n      </DialogContent>\n    </Modal>\n  );\n};\n\nexport default LoadingModal;","import { useCallback, useMemo, useState } from \"react\";\n\n/**\n * A convenience hook for indexing into a list and only allowing going\n * to the next and previous index.\n *\n * The API tells the user the current page, as well as the direction of the\n * last page change.\n *\n * @param list the list to index into\n */\nconst useSlideshow = <T extends unknown>(list: T[]) => {\n  const [[page, direction], setPage] = useState<\n    [number, \"next\" | \"prev\" | null]\n  >([0, null]);\n\n  const goTo = (direction: \"next\" | \"prev\") => {\n    return direction === \"next\" && page < list.length - 1\n      ? setPage(([p]) => [p + 1, \"next\"])\n      : direction === \"prev\" && page > 0\n      ? setPage(([p]) => [p - 1, \"prev\"])\n      : null;\n  };\n\n  const reset = useCallback(() => {\n    setPage([0, null]);\n  }, [setPage]);\n\n  const lastPage = useMemo(() => \n    page === list.length - 1\n  , [page, list.length]);\n\n  return { page: page, direction: direction, goTo, reset, lastPage };\n};\n\nexport default useSlideshow;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  contentContainer: {\n    paddingBottom: \"32px\",\n    height: \"40vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  instructionsContainer: {\n    flexGrow: 4,\n  },\n  divider: {\n    marginBottom: \"16px\",\n  },\n  centerVertically: {\n    position: \"relative\",\n    top: \"50%\",\n    transform: \"translateY(-50%)\",\n  },\n  buttonsContainer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n});\n\nexport default useStyles;\n","import {\n  Stepper,\n  Step,\n  StepLabel,\n  Container,\n  Divider,\n  Typography,\n  ButtonBase,\n} from \"@material-ui/core\";\nimport { ChevronLeft, ChevronRight } from \"@material-ui/icons\";\nimport React, { ReactElement, useCallback } from \"react\";\nimport useSlideshow from \"../../hooks/useSlideshow\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport useStyles from \"./OnboardingModalStyles\";\n\ntype OnboardingModalProps = {\n  show: boolean;\n  dismiss: () => void;\n  title: ReactElement;\n  steps: string[];\n  startButtonContent: ReactElement;\n};\n\nconst OnboardingModal: React.FC<OnboardingModalProps> = ({\n  show,\n  dismiss,\n  title,\n  steps,\n  startButtonContent,\n}) => {\n  const { page, goTo, reset } = useSlideshow(steps);\n\n  const dismissHandler = useCallback(() => {\n    reset();\n    dismiss();\n  }, []);\n\n  const nextPageHandler = useCallback(() => {\n    page === steps.length - 1 ? dismissHandler() : goTo(\"next\");\n  }, [page, goTo, dismissHandler, steps.length]);\n\n  const prevPageHandler = useCallback(() => {\n    goTo(\"prev\");\n  }, [goTo]);\n\n  const classes = useStyles();\n\n  return (\n    <CentralModal header={title} open={show} exit={dismissHandler}>\n      <div className={classes.contentContainer}>\n        <Stepper activeStep={page}>\n          {steps.map((_, idx) => (\n            <Step key={idx}>\n              <StepLabel />\n            </Step>\n          ))}\n        </Stepper>\n        <Container className={classes.instructionsContainer}>\n          <Divider className={classes.divider} />\n          <div className={classes.centerVertically}>\n            <Typography variant=\"h5\">{steps[page]}</Typography>\n          </div>\n        </Container>\n        <Container className={classes.buttonsContainer}>\n          {page === 0 ? (\n            <div />\n          ) : (\n            <ButtonBase onClick={prevPageHandler}>\n              <ChevronLeft /> Previous\n            </ButtonBase>\n          )}\n          <ButtonBase onClick={nextPageHandler}>\n            {page === steps.length - 1 ? (\n              startButtonContent\n            ) : (\n              <>\n                Next <ChevronRight />\n              </>\n            )}\n          </ButtonBase>\n        </Container>\n      </div>\n    </CentralModal>\n  );\n};\n\nexport default OnboardingModal;\n","// External Dependencies\nimport { Add, Check, Stop, PlayArrow } from \"@material-ui/icons\";\nimport LocalizedStrings from \"react-localization\";\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  Box,\n  Container,\n  GridList,\n  GridListTile,\n  Mark,\n} from \"@material-ui/core\";\n\n// Internal Dependencies\nimport ChunkCard from \"../SimpleCard/ChunkCard\";\nimport useStyles from \"./ChunkEditorStyles\";\nimport { UserContext } from \"../UserProvider/UserProvider\";\nimport VideoPlayer from \"../VideoPlayer/VideoPlayer\";\nimport useVideoPlayerController from \"../VideoPlayer/Hooks/useVideoPlayerController\";\nimport {\n  useDeleteChunk,\n  useDoWithChunks,\n  useNewChunk,\n} from \"../../utils/ChunksContext/chunksActions\";\nimport chunksContext from \"../../utils/ChunksContext/chunksContext\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\nimport { Chunk } from \"../../utils/types\";\nimport {\n  getEnclosingChunk,\n  getLastEndTimeSeconds,\n  getNameOf,\n  hasTranscription,\n} from \"../../utils/chunkManipulation/chunkManipulation\";\nimport EditChunkModal from \"../EditChunkModal/EditChunkModal\";\nimport VideoThumbnail from \"../VideoPlayer/VideoThumbnail\";\nimport BackButton from \"../BackButton/BackButton\";\nimport useConfirmBeforeAction from \"../../hooks/useConfirmBeforeAction\";\nimport ConfirmIntentModal from \"../ConfirmIntentModal/ConfirmIntentModal\";\nimport TranscriptionsModal from \"../TranscriptionsModal/TranscriptionsModal\";\nimport SimpleCard from \"../SimpleCard/SimpleCard\";\nimport ScrollToOnMount from \"../ScrollToOnMount/ScrollToOnMount\";\nimport ChunkCardContextMenu from \"./ChunkCardContextMenu\";\nimport { api_base_address } from \"../../utils/getApiKey\";\nimport LoadingModal from \"../LoadingModal/LoadingModal\";\nimport OnboardingModal from \"../OnboardingModal/OnboardingModal\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    instructionsOne:\n      \"You are about to chunk the video. The aim of chunking is to make Transcribing easy.\",\n    instructionsTwo:\n      \"Rather than transcribing the entire video at once, you will break the video down into smaller chunks, which you will transcribe individually.\",\n    instructionsThree:\n      \"You should aim to have only one person speaking in each chunk. Create a new chunk when there is a change in who is talking, there is a gap in the talking, or a person begins/ends talking.\",\n    instructionsFour:\n      \"To create a chunk, press the '+' button in the bottom right corner. The time that you press the '+' button in the video will be the end of the new chunk.\",\n    instructionsTitle: \"Chunking Instructions\",\n    startChunking: \"Start Chunking\",\n    attemptDeleteWarningTitle: \"This chunk has a transcription\",\n    attemptDeleteWarningBody: \"Attempting to delete chunk {0}, which has a transcription saved to it. Are you sure you want to delete it?\",\n    attemptNewChunkTitle: \"The enclosing chunk has a transcription\",\n    attemptNewChunkBody: 'Creating a new chunk here will delete the transcriptions on the enclosing chunk, \"{0}\". Are you sure you want to discard these transcriptions?',\n    delete: \"Delete\",\n    edit: \"Edit\",\n    viewTranscriptions: \"View Transcriptions\",\n    newChunk: \"New Chunk\",\n    doneCard: \"Done Card\"\n  },\n});\n\ntype ChunkEditorProps = {\n  /** Action to do when back button is pressed */\n  atExit: () => void;\n  story_id: string;\n  onboarding: {\n    showOnboardingModal: boolean;\n    dismissOnboardingModal: () => void;\n  };\n};\n\n/**\n * Helper function that converts a list of chunks\n * to a list of marks\n *\n * @param chunks the chunks to get the marks for\n */\nconst getMarks = (chunks: Chunk[]): Mark[] =>\n  chunks.map((chunk) => ({\n    value: chunk.endtimeseconds * 100,\n  }));\n\nconst ChunkEditor: React.FC<ChunkEditorProps> = ({\n  atExit,\n  story_id,\n  onboarding,\n}) => {\n  const [chunks, setChunks] = chunksContext.useChunksState();\n\n  // This refreshes the chunks when the ChunkEditor is first rendered\n  useEffect(() => {\n    setChunks((newChunks) => newChunks);\n  }, [setChunks]);\n\n  const {\n    progressState: videoPlayerProgressState,\n    playingState,\n    duration,\n    controller: videoPlayerController,\n    playerRef,\n  } = useVideoPlayerController();\n\n  const { progress, setProgressWithVideoUpdate } = videoPlayerProgressState;\n\n  const [, setPlay] = playingState;\n\n  const marks = useMemo(() => getMarks(chunks), [chunks]);\n\n  const { userName } = useContext(UserContext);\n\n  const doWithChunks = useDoWithChunks();\n  const deleteChunk = useDeleteChunk(setChunks);\n  const newChunk = useNewChunk(setChunks);\n\n  const classes = useStyles();\n\n  const [playingChunk, setPlayingChunk] = useState<undefined | Chunk>(\n    undefined\n  );\n\n  useEffect(() => {\n    if (playingChunk !== undefined && progress > playingChunk.endtimeseconds) {\n      setPlayingChunk(undefined);\n      setPlay(false);\n    }\n  }, [progress, playingChunk, chunks, setPlay]);\n\n  const handleChunkPlayButtonClick = useCallback(\n    (chunk: Chunk, playingChunk: Chunk | undefined, videoPlaying: boolean) => {\n      if (playingChunk?.id === chunk.id && videoPlaying) {\n        setPlay(false);\n      } else {\n        setPlay(true);\n        setPlayingChunk(chunk);\n        setProgressWithVideoUpdate(chunk.starttimeseconds);\n      }\n    },\n    [setProgressWithVideoUpdate, setPlay]\n  );\n\n  const [croppingChunk, setCroppingChunk] = useState<Chunk | undefined>(\n    undefined\n  );\n\n  const handleCompleteChunking = () => {\n    getLastEndTimeSeconds(chunks) !== 1 &&\n      userName &&\n      newChunk(1, duration, userName);\n    atExit();\n  };\n\n  const createNewChunk = (\n    _: Chunk[],\n    splitAt: number,\n    storyDuration: number,\n    userName: string\n  ) => newChunk(splitAt, storyDuration, userName);\n\n  const {\n    attemptAction: attemptNewChunk,\n    ...attemptNewChunkActionControls\n  } = useConfirmBeforeAction(createNewChunk, (chunks, time) => {\n    const enclosingChunk = getEnclosingChunk(chunks, time);\n    return enclosingChunk !== undefined && hasTranscription(enclosingChunk);\n  });\n\n  const handleNewChunk = () => {\n    if (userName) {\n      attemptNewChunk(chunks, progress, duration, userName);\n    }\n  };\n\n  const {\n    attemptAction: attemptToDeleteChunk,\n    ...attemptDeleteActionControls\n  } = useConfirmBeforeAction(deleteChunk, (chunk) => hasTranscription(chunk));\n\n  const [showTranscriptionsFor, setShowTranscriptionsFor] = useState<\n    Chunk | undefined\n  >(undefined);\n\n  const handleAttemptDeleteChunk = (c: Chunk) => {\n    doWithChunks((chunks: Chunk[]) => {\n      chunks.forEach(\n        (chunk) => chunk.id === c.id && attemptToDeleteChunk(chunk)\n      );\n    });\n  };\n\n  const playButtonStyle = useMemo(\n    () => ({\n      marginRight: \"4px\",\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      opacity: 0.8,\n    }),\n    []\n  );\n\n  const chunkCardContentStyle = useRef({\n    backgroundColor: \"green\",\n    height: \"100%\",\n    padding: \"16px\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"white\",\n  });\n\n  const chunkCardStyle = useRef({\n    margin: \"8px\",\n    transform: \"translateY(8px)\",\n    height: \"calc(100% - 16px)\",\n  });\n\n  const { showOnboardingModal, dismissOnboardingModal } = onboarding;\n\n  const playerDragHandler = useCallback(() => setPlayingChunk(undefined), [\n    setPlayingChunk,\n  ]);\n\n  return (\n    /* The 'http://localhost:8845' part of the url below is temporary, and not needed in production*/\n    <Box>\n      <LoadingModal open={duration === 0} />\n      <Container>\n        <div className={classes.backButtonContainer}>\n          <BackButton action={atExit} />\n        </div>\n      </Container>\n      <OnboardingModal\n        show={showOnboardingModal}\n        dismiss={dismissOnboardingModal}\n        title={\n          <h2 className={classes.onboardingTitle}>{strings.instructionsTitle}</h2>\n        }\n        steps={[\n          strings.instructionsOne,\n          strings.instructionsTwo,\n          strings.instructionsThree,\n          strings.instructionsFour,\n        ]}\n        startButtonContent={<div>{strings.startChunking}</div>}\n      />\n      <EditChunkModal\n        story_id={story_id}\n        chunk={croppingChunk}\n        exit={() => setCroppingChunk(undefined)}\n        storyDuration={duration}\n      />\n      <ConfirmIntentModal\n        actionControls={attemptDeleteActionControls}\n        warningMessage={<div>{strings.attemptDeleteWarningTitle}</div>}\n      >\n        {(...args) => (\n          <div style={{ overflowWrap: \"anywhere\" }}>\n            {strings.formatString(strings.attemptDeleteWarningBody, args[0] && ` \"${getNameOf(args[0])}\"`)}</div>\n        )}\n      </ConfirmIntentModal>\n      <ConfirmIntentModal\n        actionControls={attemptNewChunkActionControls}\n        warningMessage={<div>{strings.attemptNewChunkTitle}</div>}\n      >\n        {(...args) => (\n          <div>\n            {strings.formatString(strings.attemptNewChunkBody, getNameOf(getEnclosingChunk(args[0], args[1]) ?? args[0][0]))}\n          </div>\n        )}\n      </ConfirmIntentModal>\n      <TranscriptionsModal\n        chunk={showTranscriptionsFor}\n        exit={() => setShowTranscriptionsFor(undefined)}\n      />\n      <div className={classes.videoPlayerContainer}>\n        <VideoPlayer\n          controller={videoPlayerController}\n          progressState={videoPlayerProgressState}\n          playerRef={playerRef}\n          url={`http://${api_base_address}:8845/api/watch/getvideo/${story_id}`}\n          sliderMarks={marks}\n          onProgressDrag={playerDragHandler}\n        />\n      </div>\n      <GridList className={classes.chunksList} cellHeight=\"auto\" cols={2.5}>\n        {chunks\n          .map((c) => (\n            <GridListTile key={c.id}>\n              <ScrollToOnMount>\n                <ChunkCard\n                  chunk={c}\n                  transcriptionIcon={\n                    <ChunkCardContextMenu\n                      menuItems={[\n                        {\n                          content: strings.delete,\n                          handler: () => handleAttemptDeleteChunk(c),\n                        },\n                        {\n                          content: strings.edit,\n                          handler: () => setCroppingChunk(c),\n                        },\n                      ].concat(\n                        c.transcriptions.length !== 0\n                          ? [\n                              {\n                                content: strings.viewTranscriptions,\n                                handler: () => setShowTranscriptionsFor(c),\n                              },\n                            ]\n                          : []\n                      )}\n                    />\n                  }\n                >\n                  <div className={classes.chunkCardBody}>\n                    <VideoThumbnail\n                      url={`http://${api_base_address}:8845/api/watch/getvideo/${story_id}`}\n                      time={\n                        c.starttimeseconds +\n                        (c.endtimeseconds - c.starttimeseconds) / 2\n                      }\n                    />\n                    <IndabaButton\n                      round\n                      color=\"primary\"\n                      style={playButtonStyle as React.CSSProperties}\n                      onClick={() =>\n                        handleChunkPlayButtonClick(\n                          c,\n                          playingChunk,\n                          playingState[0]\n                        )\n                      }\n                    >\n                      {playingChunk?.id === c.id && playingState[0] ? (\n                        <Stop />\n                      ) : (\n                        <PlayArrow />\n                      )}\n                    </IndabaButton>\n                  </div>\n                </ChunkCard>\n              </ScrollToOnMount>\n            </GridListTile>\n          ))\n          .concat(\n            getLastEndTimeSeconds(chunks) > 0.75\n              ? [\n                  <GridListTile\n                    key={strings.doneCard}\n                    onClick={handleCompleteChunking}\n                  >\n                    <ScrollToOnMount style={{ height: \"100%\" }}>\n                      <SimpleCard\n                        contentStyle={chunkCardContentStyle.current}\n                        cardStyle={chunkCardStyle.current}\n                      >\n                        <Check\n                          fontSize=\"large\"\n                          style={{ marginRight: \"4px\" }}\n                        />\n                      </SimpleCard>\n                    </ScrollToOnMount>\n                  </GridListTile>,\n                ]\n              : []\n          )}\n      </GridList>\n      <div>\n        <div className={classes.newChunkButtonContainer}>\n          <IndabaButton\n            round\n            aria-label={strings.newChunk}\n            style={{ margin: \"8px\" }}\n            onClick={handleNewChunk}\n          >\n            <Add />\n          </IndabaButton>\n        </div>\n      </div>\n    </Box>\n  );\n};\n\nexport default ChunkEditor;\n","import React from 'react';\nimport LinearProgress, { LinearProgressProps } from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nfunction LinearProgressWithLabel(props: LinearProgressProps & { value: number }) {\n  return (\n    <Box display=\"flex\" alignItems=\"center\">\n      <Box width=\"100%\" mr={1}>\n        <LinearProgress variant=\"determinate\" {...props} />\n      </Box>\n      <Box minWidth={35}>\n        <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n          props.value,\n        )}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nexport default LinearProgressWithLabel;","\nenum View {\n  Dashboard,\n  Chunking,\n  Transcribing,\n  Reviewing,\n};\n\nexport default View;","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst borderColor = \"#dddddd\";\n\nconst useStyles = makeStyles({\n  paper: {\n    border: `1px solid ${borderColor}`,\n    borderTop: \"0\",\n    borderTopRightRadius: \"0\",\n    borderTopLeftRadius: \"0\",\n    padding: \"15px\",\n  },\n  stepHeader: {\n    padding: \"4px\",\n    backgroundColor: \"#f5f5f5\",\n    border: `1px solid ${borderColor}`,\n    borderBottomRightRadius: \"0\",\n    borderBottomLeftRadius: \"0\",\n  },\n  button: {\n      marginTop: \"16px\",\n  },\n});\n\nexport default useStyles;\n","// External Dependencies\nimport React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport LocalizedStrings from \"react-localization\";\n\n// Internal Dependencies\nimport FlatPaper from \"../FlatPaper/FlatPaper\";\nimport LinearProgressWithLabel from \"../LinearProgressWithLabel/LinearProgressWithLabel\";\nimport useStyles from \"./StepInfoStyles\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    perform: \"Perform {0}\"\n  }\n});\n\nexport type StepInfoProps = {\n  title: string;\n  description: string;\n  progress: number;\n  onSelect: () => void;\n  enabled: boolean;\n};\n\nconst StepInfo: React.FC<StepInfoProps> = ({\n  title,\n  description,\n  progress,\n  onSelect,\n  enabled,\n}) => {\n  const classes = useStyles();\n  return (\n    <div>\n      <FlatPaper>\n        <div className={classes.stepHeader}>\n          <Typography variant=\"subtitle1\">{title}</Typography>\n          <LinearProgressWithLabel value={progress} />\n        </div>\n      </FlatPaper>\n      <FlatPaper>\n        <div className={classes.paper}>\n          {description}\n          <br />\n          <Box style={{ marginTop: \"8px\" }}>\n            <IndabaButton disabled={!enabled} onClick={onSelect}>\n              <Typography style={{ padding: \"6px\" }}>\n                {strings.formatString(strings.perform, title)}\n              </Typography>\n            </IndabaButton>\n          </Box>\n        </div>\n      </FlatPaper>\n    </div>\n  );\n};\n\nexport default StepInfo;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  introContainer: {\n    textAlign: \"center\",\n  },\n  transcriberModal: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\n\nexport default useStyles;\n","import { Typography, InputBase } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\n\ntype SimpleInputFormProps = {\n  /** Placeholder for the Text Input */\n  placeholder: string;\n  /** Label for the submit button */\n  buttonText: string;\n  /** Class names for the text input */\n  classes: { input: string; };\n  /** Submit callback */\n  onSubmit: (value: string) => void;\n};\n\nconst SimpleInputForm: React.FC<SimpleInputFormProps> = React.forwardRef<HTMLDivElement, SimpleInputFormProps>(({\n  placeholder,\n  buttonText,\n  classes,\n  onSubmit,\n}, ref) => {\n  const [input, setInput] = useState<string | null>(null);\n  return (\n    <div ref={ref}>\n      <InputBase\n        className={classes.input}\n        onChange={(e) => setInput(e.target.value)}\n        placeholder={placeholder}\n      />\n      <IndabaButton\n        onClick={() => input && onSubmit(input)}\n        styles={{ height: \"3rem\" as const, borderRadius: \"0px 8px 8px 0px\" as const }}\n      >\n        <Typography variant=\"subtitle1\">{buttonText}</Typography>\n      </IndabaButton>\n    </div>\n  );\n});\n\nexport default SimpleInputForm;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  modal: {\n    outline: \"0\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  modalContentBox: {\n    padding: \"16px\",\n  },\n  input: {\n    flex: 1,\n    width: \"400px\",\n    height: \"3rem\",\n    border: \"1px solid #cccccc\",\n    paddingLeft: \"8px\",\n    borderRadius: \"8px 0px 0px 8px\",\n  },\n});\n\nexport default useStyles;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport { StateSetter } from \"../../utils/types\";\nimport SimpleInputForm from \"../SimpleInputForm/SimpleInputForm\";\nimport useStyles from \"./NameModalStyles\";\n\ntype NameModalProps = {\n  show: boolean;\n  setName: StateSetter<string | undefined>;\n};\n\nconst NameModal: React.FC<NameModalProps> = ({ show, setName }) => {\n  const classes = useStyles();\n\n  return (\n    <CentralModal open={show}>\n      <div>\n        <Typography variant=\"subtitle1\">\n          Please enter your name before performing transcription:\n        </Typography>\n        <SimpleInputForm\n          placeholder=\"my name\"\n          buttonText=\"Perform Transcription\"\n          classes={classes}\n          onSubmit={setName}\n        />\n      </div>\n    </CentralModal>\n  );\n};\n\nexport default NameModal;\n","import { Link, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  indabaLink: {\n    color: \"#d9534f\",\n    cursor: \"pointer\",\n  },\n});\n\nconst IndabaLink: React.FC<any> = React.forwardRef(({ children, ...props }, ref) => {\n  const classes = useStyles();\n  return <Link ref={ref} className={classes.indabaLink} {...props} >{children}</Link>;\n});\n\nexport default IndabaLink;","// External Dependencies\nimport {\n  Box,\n  Typography,\n  Container,\n  GridList,\n  GridListTile,\n} from \"@material-ui/core\";\nimport LocalizedStrings from \"react-localization\";\nimport React, { useContext } from \"react\";\n\n// Internal Dependencies\nimport StepInfo, { StepInfoProps } from \"../App/StepInfo\";\nimport useStyles from \"./DashboardStyles\";\nimport { UserContext } from \"../UserProvider/UserProvider\";\nimport NameModal from \"../NameModal/NameModal\";\nimport IndabaLink from \"../IndabaLink/IndabaLink\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    greeting: \"Hello {0}\",\n    transcriptionFor: \"Field Transcription for {0}\",\n    notMe: \"This is not me!\",\n    steps:\n      \"There are 3 stages to transcribing, select which stage you are performing\",\n  },\n});\n\ntype DashboardProps = {\n  /** The name of the story being transcribed */\n  storyName: string;\n  /** The transcription steps and their progress */\n  steps: StepInfoProps[];\n  /** Action for logging out */\n  logOutAction: () => void;\n};\n\nconst Greeting: React.FC<{ name: string | undefined }> = ({ name }) => (\n  <Typography\n    style={{ fontWeight: \"lighter\", overflowWrap: \"anywhere\" }}\n    variant=\"h5\"\n  >\n    {name && strings.formatString(strings.greeting, name)}\n  </Typography>\n);\n\nconst Title: React.FC<{ storyName: string }> = ({ storyName }) => (\n  <Typography variant=\"h3\" style={{ color: \"gray\", fontWeight: \"lighter\" }}>\n    {strings.formatString(\n      strings.transcriptionFor,\n      <Box component=\"span\" style={{ color: \"black\" }}>\n        {storyName}\n      </Box>\n    )}\n  </Typography>\n);\n\nconst Dashboard: React.FC<DashboardProps> = ({\n  storyName,\n  steps,\n  logOutAction,\n}) => {\n  const { userName, setName, clearName } = useContext(UserContext);\n\n  const classes = useStyles();\n\n  return (\n    <Container>\n      <NameModal setName={setName} show={!userName} />\n      <Container className={classes.introContainer}>\n        <Title storyName={storyName} />\n        <Greeting name={userName} />\n        {userName && (\n          <IndabaLink\n            onClick={() => {\n              clearName();\n              logOutAction();\n            }}\n          >\n            {strings.notMe}\n          </IndabaLink>\n        )}\n      </Container>\n      <div style={{ marginBottom: \"16px\" }}>{strings.steps}</div>\n      <Box>\n        <GridList cols={3} cellHeight=\"auto\" spacing={20}>\n          {steps.map((step) => (\n            <GridListTile key={step.title}>\n              <StepInfo {...step} />\n            </GridListTile>\n          ))}\n        </GridList>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Dashboard;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  buildVersion: {\n    color: \"#7a7a7a\",\n    fontWeight: \"bold\",\n    fontSize: \"19px\",\n    position: \"absolute\",\n    paddingTop: \"10px\",\n    top: \"-5px\",\n    left: \"122px\",\n  },\n  titleRow: {\n    marginTop: \"5px\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    height: \"48px\",\n    position: \"relative\",\n  },\n  logoContainer: {\n    position: \"relative\",\n    paddingTop: \"6px\",\n    width: \"25%\",\n  },\n  titleContainer: {\n    width: \"50%\",\n    height: \"48px\",\n    marginTop: \"10px\",\n    paddingLeft: \"15px\",\n    paddingRight: \"15px\",\n    textAlign: \"center\",\n  },\n  titleWrapper: {\n    fontSize: \"13pt\",\n    margin: \"3px\",\n    display: \"inline-block\",\n  },\n  contextMenuButton: {\n    position: \"absolute\",\n    right: 0,\n  },\n});\n\nexport default useStyles;\n","export default __webpack_public_path__ + \"static/media/logo_web.d3de7844.svg\";","import {\n  ClickAwayListener,\n  Container,\n  Divider,\n  IconButton,\n} from \"@material-ui/core\";\nimport React, { ReactNode, useRef } from \"react\";\n\nimport useStyles from \"./HeaderStyles\";\nimport Logo from \"../../assets/images/logo_web.svg\";\nimport { MoreVert } from \"@material-ui/icons\";\nimport useToggle from \"../../hooks/useToggle\";\nimport IndabaMenu from \"../IndabaMenu/IndabaMenu\";\n\ntype HeaderProps = {\n  title: string;\n  contextMenuItems: { content: ReactNode; handler: () => void }[];\n  hidden?: boolean;\n};\n\nconst Header: React.FC<HeaderProps> = ({\n  children,\n  title,\n  contextMenuItems,\n  hidden,\n}) => {\n  const classes = useStyles();\n\n  const contextMenuButtonRef = useRef(null);\n\n  const [\n    showContextMenu,\n    toggleShowContextMenu,\n    setShowContextMenu,\n  ] = useToggle(false);\n\n  const hideContextMenu = () => setShowContextMenu(false);\n\n  return (\n    <>\n      <Container\n        style={{\n          height: \"calc(100vh - 5px)\",\n          width: \"100%\",\n          padding: 0,\n          marginTop: \"5px\",\n          display: \"flex\",\n          flexDirection: \"column\",\n        }}\n      >\n        {!hidden ? <Container>\n          <div className={classes.titleRow}>\n            <div className={classes.logoContainer}>\n              <img src={Logo} alt=\"logo\" width=\"120px\" height=\"36px\" />\n              <span className={classes.buildVersion}>TITAN</span>\n            </div>\n            <div className={classes.titleContainer}>\n              <div className={classes.titleWrapper}>{title}</div>\n            </div>\n            <ClickAwayListener onClickAway={hideContextMenu}>\n              <IconButton\n                className={classes.contextMenuButton}\n                onClick={toggleShowContextMenu}\n                ref={contextMenuButtonRef}\n              >\n                <MoreVert />\n              </IconButton>\n            </ClickAwayListener>\n            <IndabaMenu\n              show={showContextMenu}\n              anchor={contextMenuButtonRef.current!}\n              menuItems={contextMenuItems}\n            />\n          </div>\n          <Divider />\n        </Container> : null}\n        {children}\n      </Container>\n    </>\n  );\n};\n\nexport default Header;\n","// External Dependencies\nimport { useMemo } from \"react\";\nimport LocalizedStrings from \"react-localization\";\n\n// Internal Dependencies\nimport { StepInfoProps } from \"../StepInfo\";\nimport View from \"../Views\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    chunkingDesc:\n      \"We need to know when people are talking in the story, so that we can transcribe them.\",\n    chunkingTitle: \"Chunking\",\n    transcriptionDesc:\n      \"Writing down exactly what is said in each chunk of the story.\",\n    transcriptionTitle: \"Transcription\",\n    reviewDesc:\n      \"Reviewing content is key to making sure we represent participants authentically.\",\n    reviewTitle: \"Review\",\n  },\n});\n\ntype Three<T> = [T, T, T];\n\nconst useSteps = (\n  setView: (view: View) => void,\n  state: Three<Pick<StepInfoProps, \"progress\" | \"enabled\">>\n): Three<StepInfoProps> =>\n  useMemo(\n    () => [\n      {\n        title: strings.chunkingTitle,\n        description: strings.chunkingDesc,\n        progress: state[0].progress,\n        onSelect: () => setView(View.Chunking),\n        enabled: state[0].enabled,\n      },\n      {\n        title: strings.transcriptionTitle,\n        description: strings.transcriptionDesc,\n        progress: state[1].progress,\n        onSelect: () => setView(View.Transcribing),\n        enabled: state[1].enabled,\n      },\n      {\n        title: strings.reviewTitle,\n        description: strings.reviewDesc,\n        progress: state[2].progress,\n        onSelect: () => setView(View.Reviewing),\n        enabled: state[2].enabled,\n      },\n    ],\n    [setView, state]\n  );\n\nexport default useSteps;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst chunkProgressHeight = \"8px\";\n\nconst useStyles = makeStyles({\n  videoPlayerContainer: {\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  inputField: {\n    width: \"100%\",\n  },\n  chunkProgressRail: {\n    height: chunkProgressHeight,\n    color: \"#d9534f\",\n  },\n  chunkProgressTrack: {\n    height: chunkProgressHeight,\n    color: \"#d9534f\",\n  },\n  chunkProgressMark: {\n    height: chunkProgressHeight,\n    width: \"4px\",\n    backgroundColor: \"#FFFFFF\",\n    opacity: 0.8\n  },\n  stepperDots: {\n    backgroundColor: \"#d9534f\",\n  },\n  stepperDotsContainer: {\n    flexWrap: \"wrap\",\n    // width: \"90%\"\n  },\n  stepperDot:{\n    margin: \"2px\"\n  }\n  });\n\nexport default useStyles;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  slideshowContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"row\",\n    alignItems: \"flex-end\",\n    width: \"100%\",\n  },\n  slideshowContentContainer: {\n    flexGrow: 4,\n  }\n});\n\nexport default useStyles;\n","import { Box } from \"@material-ui/core\";\nimport { Done, NavigateBefore, NavigateNext } from \"@material-ui/icons\";\nimport React, { ReactNode } from \"react\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\nimport useStyles from \"./SlideshowStyles\";\n\ntype SlideshowProps = {\n  onNavigate: (direction: \"next\" | \"prev\") => void;\n  currentPage: number;\n  numberOfPages: number;\n  style?: any;\n  contentContainerStyle?: any;\n  onComplete?: () => void;\n  leftColumn?: ReactNode;\n  rightColumn?: ReactNode;\n};\n\nconst Slideshow: React.FC<SlideshowProps> = ({\n  onNavigate,\n  onComplete,\n  currentPage,\n  numberOfPages,\n  children,\n  style,\n  contentContainerStyle,\n  leftColumn,\n  rightColumn\n}) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.slideshowContainer} style={style}>\n      {leftColumn ?? <IndabaButton\n        round\n        aria-label=\"Previous\"\n        style={{ color: \"#FFFFFF\", alignSelf: \"flex-start\", marginTop: \"32px\" }}\n        disabled={currentPage === 0}\n        onClick={() => onNavigate(\"prev\")}\n      >\n        <NavigateBefore />\n      </IndabaButton>}\n      <Box style={{...contentContainerStyle}} className={classes.slideshowContentContainer}>{children}</Box>\n      {rightColumn ?? (onComplete && currentPage === numberOfPages - 1 ? (\n        <IndabaButton\n          round\n          aria-label=\"Complete\"\n          style={{\n            color: \"#FFFFFF\",\n            backgroundColor: \"#40bf11\",\n            alignSelf: \"flex-start\",\n            marginTop: \"32px\",\n          }}\n          onClick={onComplete}\n        >\n          <Done />\n        </IndabaButton>\n      ) : (\n        <IndabaButton\n          round\n          aria-label=\"Next\"\n          style={{\n            color: \"#FFFFFF\",\n            alignSelf: \"flex-start\",\n            marginTop: \"32px\",\n          }}\n          disabled={currentPage === numberOfPages - 1}\n          onClick={() => onNavigate(\"next\")}\n        >\n          <NavigateNext />\n        </IndabaButton>\n      ))}\n    </div>\n  );\n};\n\nexport default Slideshow;\n","// External Dependencies\nimport { TextField } from \"@material-ui/core\";\nimport LocalizedStrings from \"react-localization\";\nimport React, { ReactNode } from \"react\";\n\n// Internal Dependencies\nimport SimpleCard from \"./SimpleCard\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    transcription: \"Transcription\",\n  },\n});\n\ntype EditTranscriptionCardProps = {\n  inputRef?: React.MutableRefObject<null>;\n  transcriptionIcon?: ReactNode;\n  transcriptionValue: string;\n  onChange: (newValue: string) => void;\n};\n\nconst EditTranscriptionCard: React.FC<EditTranscriptionCardProps> = ({\n  inputRef,\n  transcriptionValue,\n  transcriptionIcon,\n  onChange,\n}) => {\n  return (\n    <SimpleCard\n      title={transcriptionIcon}\n      cardStyle={{ margin: \"16px 8px 0 8px\" }}\n    >\n      <TextField\n        autoFocus\n        multiline\n        rows={7}\n        inputRef={inputRef}\n        style={{ width: \"100%\" }}\n        variant=\"outlined\"\n        label={strings.transcription}\n        value={transcriptionValue}\n        onChange={(e) => {\n          onChange(e.target.value);\n        }}\n      />\n    </SimpleCard>\n  );\n};\n\nexport default EditTranscriptionCard;\n","import { useCallback } from \"react\";\nimport oneSatisfies from \"../../../utils/oneSatisfies\";\nimport { Chunk, Transcription } from \"../../../utils/types\";\nimport { SplitState } from \"../../VideoPlayer/Hooks/useVideoPlayerState\";\n\nexport const getUsersTranscription = (\n  chunk: Chunk,\n  userName: string\n): Transcription | undefined =>\n  oneSatisfies(chunk.transcriptions, (t) => t.creatorid === userName)\n    ? chunk.transcriptions.filter((t) => t.creatorid === userName)[0]\n    : undefined;\n\nexport const getMiniChunks = (chunk: Chunk, duration: number) => {\n  var miniChunks: number[] = [];\n\n  var currentTime = chunk.starttimeseconds + 4 / duration;\n\n  while (currentTime < chunk.endtimeseconds) {\n    miniChunks.push(currentTime);\n    currentTime += 5 / duration;\n  }\n  if (currentTime !== chunk.endtimeseconds) {\n    miniChunks.push(chunk.endtimeseconds)\n  }\n\n  return miniChunks;\n};\n\ntype TranscriberAction = {\n  actionType:\n    | \"go to next page\"\n    | \"go to previous page\"\n    | \"transcription changed\"\n    | \"go to first mini chunk\"\n    | \"go to last mini chunk\"\n    | \"refresh mini chunks\"\n    | \"flush transcription changes\";\n  newTranscription?: string;\n};\n\ntype TranscriberState = {\n  currentChunk: number;\n  currentMiniChunk: number;\n  miniChunks: number[];\n  transcription: string;\n};\n\nconst getMiniChunkEnd = (miniChunk: number, duration: number) => {\n  const value = miniChunk + 1 / duration;\n  return value > duration ? duration : value;\n};\n\nconst getMiniChunkStart = (\n  prevMiniChunk: number | undefined,\n  currentChunk: Chunk\n) => {\n  return prevMiniChunk ?? currentChunk.starttimeseconds;\n};\n\n// const makeTranscriberPageChange = ;\n\n/**\n * TODO - change this into a hook, so that the caller doesn't have to use 'useCallback',\n * we should do that internall\n */\nconst useTranscriberReducer = (\n  chunks: Chunk[],\n  duration: number,\n  updateTranscription: (\n    toUpdate: Chunk,\n    updatedTranscription: string,\n    userName: string\n  ) => void,\n  userName: string | undefined,\n  setSplit: React.Dispatch<React.SetStateAction<SplitState>>,\n  setProgress: React.Dispatch<React.SetStateAction<number>>,\n  onComplete: () => void\n) => {\n  const pageChange = useCallback(\n    (\n      newCurrentChunk: number,\n      newMiniChunks: number[],\n      newCurrentMiniChunk: number,\n      newTranscription: string\n    ) => {\n      const newChunkStart = getMiniChunkStart(\n        newMiniChunks[newCurrentMiniChunk - 1],\n        chunks[newCurrentChunk]\n      );\n\n      setProgress(newChunkStart);\n      setSplit({\n        start: newChunkStart,\n        end: getMiniChunkEnd(newMiniChunks[newCurrentMiniChunk], duration),\n      });\n      return {\n        miniChunks: newMiniChunks,\n        currentChunk: newCurrentChunk,\n        currentMiniChunk: newCurrentMiniChunk,\n        transcription: newTranscription,\n      };\n    },\n    [setProgress, setSplit, chunks, duration]\n  );\n\n  const trancribeReducer = useCallback(\n    (state: TranscriberState, action: TranscriberAction): TranscriberState => {\n      if (\n        userName &&\n        [\n          \"go to next page\",\n          \"go to previous page\",\n          \"flush transcription changes\",\n        ].includes(action.actionType)\n      ) {\n        updateTranscription(\n          chunks[state.currentChunk],\n          state.transcription,\n          userName\n        );\n      }\n\n      switch (action.actionType) {\n        case \"go to next page\":\n          if (\n            state.currentMiniChunk === state.miniChunks.length - 1 &&\n            state.currentChunk < chunks.length - 1\n          ) {\n            const newCurrentChunk = state.currentChunk + 1;\n            return pageChange(\n              newCurrentChunk,\n              getMiniChunks(chunks[newCurrentChunk], duration),\n              0,\n              getUsersTranscription(chunks[newCurrentChunk], userName ?? \"\")\n                ?.content ?? \"\"\n            );\n          } else if (state.currentMiniChunk < state.miniChunks.length - 1) {\n            return pageChange(\n              state.currentChunk,\n              state.miniChunks,\n              state.currentMiniChunk + 1,\n              state.transcription\n            );\n          } else {\n            onComplete();\n          }\n          break;\n        case \"go to previous page\":\n          if (state.currentMiniChunk === 0 && state.currentChunk > 0) {\n            const newCurrentChunk = state.currentChunk - 1;\n            const newMiniChunks = getMiniChunks(\n              chunks[newCurrentChunk],\n              duration\n            );\n            return pageChange(\n              newCurrentChunk,\n              newMiniChunks,\n              newMiniChunks.length - 1,\n              getUsersTranscription(chunks[newCurrentChunk], userName ?? \"\")\n                ?.content ?? \"\"\n            );\n          } else if (state.currentMiniChunk > 0) {\n            return pageChange(\n              state.currentChunk,\n              state.miniChunks,\n              state.currentMiniChunk - 1,\n              state.transcription\n            );\n          }\n          break;\n        case \"transcription changed\":\n          return action.newTranscription !== undefined\n            ? { ...state, transcription: action.newTranscription }\n            : { ...state };\n        case \"go to first mini chunk\":\n          const firstMiniChunk = 0;\n          pageChange(\n            state.currentChunk,\n            state.miniChunks,\n            firstMiniChunk,\n            state.transcription\n          );\n          return { ...state, currentMiniChunk: firstMiniChunk };\n        case \"go to last mini chunk\":\n          const lastMiniChunk = state.miniChunks.length - 1;\n          pageChange(\n            state.currentChunk,\n            state.miniChunks,\n            lastMiniChunk,\n            state.transcription\n          );\n          return { ...state, currentMiniChunk: lastMiniChunk };\n        case \"refresh mini chunks\":\n          const newMiniChunks = getMiniChunks(\n            chunks[state.currentChunk],\n            duration\n          );\n          pageChange(state.currentChunk, newMiniChunks, 0, state.transcription);\n          return {\n            ...state,\n            currentMiniChunk: 0,\n            miniChunks: newMiniChunks,\n            transcription: getUsersTranscription(chunks[state.currentChunk], userName ?? \"\")?.content ?? \"\"\n          };\n      }\n      return state;\n    },\n    [chunks, duration, updateTranscription, userName, onComplete, pageChange]\n  );\n  return trancribeReducer;\n};\n\nexport default useTranscriberReducer;\n","import { useDebounceCallback } from \"@react-hook/debounce\";\nimport { useCallback, useState } from \"react\";\n\nconst useAutoPauseOnType = (\n  playing: boolean,\n  setPlaying: React.Dispatch<React.SetStateAction<boolean>>\n) => {\n  /*\n   * Here, we automatically pause the video when the user types.\n   *\n   * If the video was paused when the user starts typing, keep it\n   * paused. Otherwise, play the video again once the user stops typing\n   */\n  const [, setTypingDebounced] = useState(false);\n  const [\n    playStateBeforeTypingDebounce,\n    setPlayStateBeforeTypingDebounce,\n  ] = useState(false);\n\n  const debouncedPlay = useDebounceCallback(() => {\n    setPlaying(playStateBeforeTypingDebounce);\n    setTypingDebounced(false);\n  }, 500);\n\n  const onType = useCallback(() => {\n    setTypingDebounced((typingDebounced) => {\n      if (!typingDebounced) {\n        setPlayStateBeforeTypingDebounce(playing);\n      }\n      return true;\n    });\n    debouncedPlay();\n    setPlaying(false);\n  }, [playing, setPlaying, debouncedPlay]);\n\n  return onType;\n};\n\nexport default useAutoPauseOnType;\n","// External Dependencies\nimport LocalizedStrings from \"react-localization\";\nimport {\n  Box,\n  Button,\n  Container,\n  MobileStepper,\n  Slider,\n} from \"@material-ui/core\";\nimport { ArrowLeft, ArrowRight, Check } from \"@material-ui/icons\";\nimport React, {\n  useContext,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n} from \"react\";\n\n// Internal Dependencies\nimport { UserContext } from \"../UserProvider/UserProvider\";\nimport VideoPlayer from \"../VideoPlayer/VideoPlayer\";\nimport useStyles from \"./TranscriberStyles\";\nimport useVideoPlayerController from \"../VideoPlayer/Hooks/useVideoPlayerController\";\nimport { useUpdateTranscription } from \"../../utils/ChunksContext/chunksActions\";\nimport chunksContext from \"../../utils/ChunksContext/chunksContext\";\nimport Slideshow from \"../Slideshow/Slideshow\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\nimport BackButton from \"../BackButton/BackButton\";\nimport EditTranscriptionCard from \"../SimpleCard/EditTranscriptionCard\";\nimport SkipForwardBackButtons from \"../SkipForwardBackButtons/SkipForwardBackButtons\";\nimport { api_base_address } from \"../../utils/getApiKey\";\nimport {\n  getNameOf,\n  toShortTimeStamp,\n} from \"../../utils/chunkManipulation/chunkManipulation\";\nimport LoadingModal from \"../LoadingModal/LoadingModal\";\nimport OnboardingModal from \"../OnboardingModal/OnboardingModal\";\nimport useTranscriberReducer from \"./hooks/useTranscriberState\";\nimport useAutoPauseOnType from \"./hooks/useAutoPauseOnType\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    instructionsOne: \"You are about to Transcribe the chunks.\",\n    instructionsTwo:\n      \"Each chunk has been divided into 5 second clips for you. These clips will loop.\",\n    instructionsThree:\n      \"When you type, the video will pause until you stop typing\",\n    instructionsFour:\n      'When you are done transcribing a clip press the \">\" button',\n    last: \"Last\",\n    first: \"First\",\n  },\n});\n\nconst EmptyComponent: React.FC<{}> = () => {\n  return <div />;\n};\n\ntype TranscriberProps = {\n  story_id: string;\n  atExit: () => void;\n  onboarding: {\n    showOnboardingModal: boolean;\n    dismissOnboardingModal: () => void;\n  };\n};\n\nconst Transcriber: React.FC<TranscriberProps> = ({\n  story_id,\n  atExit,\n  onboarding,\n}) => {\n  const [chunks, setChunks] = chunksContext.useChunksState();\n\n  const { showOnboardingModal, dismissOnboardingModal } = onboarding;\n\n  const {\n    progressState,\n    playerRef,\n    splitState: [split, setSplit],\n    duration,\n    controller,\n    playingState: [playing, setPlaying],\n  } = useVideoPlayerController();\n\n  const updateTranscription = useUpdateTranscription(setChunks);\n\n  const { userName } = useContext(UserContext);\n\n  const { setProgressWithVideoUpdate } = progressState;\n\n  const transcriberReducer = useTranscriberReducer(\n    chunks,\n    duration,\n    updateTranscription,\n    userName,\n    setSplit,\n    setProgressWithVideoUpdate,\n    atExit\n  );\n\n  const [transcriberState, transcriberDispatch] = useReducer(\n    transcriberReducer,\n    {\n      currentChunk: 0,\n      currentMiniChunk: 0,\n      miniChunks: [],\n      transcription: \"\",\n    }\n  );\n  useEffect(() => {\n    if (duration !== 0) {\n      transcriberDispatch({ actionType: \"refresh mini chunks\" });\n    }\n  }, [duration]);\n\n  const lastPage = useMemo(\n    () =>\n      transcriberState.currentChunk === chunks.length - 1 &&\n      transcriberState.currentMiniChunk ===\n        transcriberState.miniChunks.length - 1,\n    [\n      transcriberState.currentChunk,\n      transcriberState.currentMiniChunk,\n      transcriberState.miniChunks,\n      chunks,\n    ]\n  );\n\n  const classes = useStyles();\n\n  const inputRef = useRef(null);\n\n  const focusInput = () => {\n    (inputRef.current\n      ? (inputRef.current as any)\n      : { focus: () => null }\n    ).focus();\n  };\n\n  useEffect(() => {\n    focusInput();\n  }, [\n    playing,\n    transcriberState.currentChunk,\n    transcriberState.currentMiniChunk,\n  ]);\n\n  const exitHandler = () => {\n    transcriberDispatch({ actionType: \"flush transcription changes\" });\n    atExit();\n  };\n\n  const onType = useAutoPauseOnType(playing, setPlaying);\n\n  return (\n    <div>\n      <LoadingModal open={duration === 0} />\n      <Container style={{ marginBottom: \"4px\" }}>\n        <BackButton action={exitHandler} />\n      </Container>\n      <OnboardingModal\n        show={showOnboardingModal}\n        dismiss={dismissOnboardingModal}\n        title={<h2 style={{ margin: 0 }}>Transcribing Instructions</h2>}\n        steps={[\n          strings.instructionsOne,\n          strings.instructionsTwo,\n          strings.instructionsThree,\n          strings.instructionsFour,\n        ]}\n        startButtonContent={<div>Start Transcribing</div>}\n      />\n      {chunks.length && (\n        <>\n          <Box className={classes.videoPlayerContainer}>\n            <VideoPlayer\n              progressState={progressState}\n              playerRef={playerRef}\n              url={`http://${api_base_address}:8845/api/watch/getvideo/${story_id}`}\n              controller={controller}\n              loop\n            />\n          </Box>\n          <div style={{ margin: \"0 8px 0 8px\" }}>\n            <MobileStepper\n              variant=\"dots\"\n              steps={transcriberState.miniChunks.length}\n              activeStep={transcriberState.currentMiniChunk}\n              position=\"static\"\n              classes={{\n                dotActive: classes.stepperDots,\n                dots: classes.stepperDotsContainer,\n                dot: classes.stepperDot,\n              }}\n              nextButton={\n                <Button\n                  onClick={() =>\n                    transcriberDispatch({ actionType: \"go to last mini chunk\" })\n                  }\n                >\n                  {strings.last}\n                </Button>\n              }\n              backButton={\n                <Button\n                  onClick={() =>\n                    transcriberDispatch({\n                      actionType: \"go to first mini chunk\",\n                    })\n                  }\n                >\n                  {strings.first}\n                </Button>\n              }\n            />\n            <Slideshow\n              currentPage={transcriberState.currentChunk}\n              onNavigate={() => null}\n              numberOfPages={chunks.length}\n              onComplete={exitHandler}\n              leftColumn={\n                <div>\n                  <IndabaButton\n                    onClick={() =>\n                      transcriberDispatch({ actionType: \"go to previous page\" })\n                    }\n                  >\n                    <ArrowLeft />\n                  </IndabaButton>\n                </div>\n              }\n              rightColumn={\n                <div>\n                  <IndabaButton\n                    style={{\n                      backgroundColor: lastPage ? \"green\" : \"#d9534f\",\n                    }}\n                    onClick={() =>\n                      transcriberDispatch({ actionType: \"go to next page\" })\n                    }\n                  >\n                    {lastPage ? <Check /> : <ArrowRight />}\n                  </IndabaButton>\n                </div>\n              }\n            >\n              <EditTranscriptionCard\n                transcriptionIcon={\n                  <div\n                    style={{\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      margin: \"0 8px 0 8px\",\n                    }}\n                  >\n                    <span style={{ fontWeight: 600, overflowWrap: \"anywhere\" }}>\n                      {getNameOf(chunks[transcriberState.currentChunk])}\n                    </span>\n                    <Slider\n                      ThumbComponent={EmptyComponent}\n                      value={[\n                        chunks[transcriberState.currentChunk].starttimeseconds *\n                          100,\n                        chunks[transcriberState.currentChunk].endtimeseconds *\n                          100,\n                      ]}\n                      classes={{\n                        rail: classes.chunkProgressRail,\n                        track: classes.chunkProgressTrack,\n                        mark: classes.chunkProgressMark,\n                        markActive: classes.chunkProgressMark,\n                      }}\n                      marks={[\n                        {\n                          value: split.start * 100,\n                          label: toShortTimeStamp(\n                            transcriberState.miniChunks[\n                              transcriberState.currentMiniChunk\n                            ] * duration\n                          ),\n                        },\n                      ]}\n                    />\n                  </div>\n                }\n                inputRef={inputRef}\n                transcriptionValue={transcriberState.transcription}\n                onChange={(newValue: string) => {\n                  onType();\n                  transcriberDispatch({\n                    actionType: \"transcription changed\",\n                    newTranscription: newValue,\n                  });\n                }}\n              />\n            </Slideshow>\n          </div>\n        </>\n      )}\n      <div\n        style={{\n          position: \"absolute\",\n          left: 0,\n          bottom: 0,\n          width: \"100%\",\n        }}\n      >\n        {false && (\n          <SkipForwardBackButtons\n            style={{\n              margin: \"8px\",\n              width: \"calc(100% - 16px)\",\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n            skipForward={() =>\n              duration &&\n              setProgressWithVideoUpdate((progress) => progress + 5 / duration)\n            }\n            skipBackward={() =>\n              duration &&\n              setProgressWithVideoUpdate((progress) => progress - 5 / duration)\n            }\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Transcriber;\n","// External Dependencies\nimport axios from \"axios\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\n\n// Internal Dependencies\nimport api_key, { api_base_address } from \"../../../utils/getApiKey\";\nimport { Chunk, Story } from \"../../../utils/types\";\n\nconst pushStoryChanges = (new_story: Story, story_id: string) => {\n  const url = `http://${api_base_address}:8845/api/watch/savedit/${story_id}?apikey=${api_key}`;\n  axios.request<Story>({\n    url: url,\n    method: \"POST\",\n    withCredentials: true,\n    data: new_story,\n  });\n};\n\n/**\n * This hook synchronizes the chunks being created and edited in the user\n * interface with the ourstory backend\n *\n * setChunks refetches the chunks from the server everytime it is called\n *\n * @param chunks - the chunks state to synchonise to the api\n * @param setChunks - setter for the chunks\n */\nconst useOurstoryApi = (\n  story_id: string\n): {\n  storyTitle: string | undefined;\n  chunksState: [Chunk[], (setter: (newState: Chunk[]) => Chunk[]) => void];\n} => {\n  const [story, setStory] = useState<Story | undefined>(undefined);\n\n  const chunks = useMemo(() => story?.transcription.chunks ?? [], [\n    story?.transcription?.chunks,\n  ]);\n\n  const setChunks = (new_chunks: Chunk[]) => {\n    setStory((story) =>\n      story === undefined\n        ? undefined\n        : { ...story, transcription: { chunks: new_chunks } }\n    );\n  };\n\n  const setChunksWithUpdate = useCallback(\n    async (setter: (new_chunks: Chunk[]) => Chunk[]) => {\n      const new_chunks = setter(\n        (\n          await axios.request<Chunk[]>({\n            withCredentials: true,\n            url: `http://${api_base_address}:8845/api/watch/edit/${story_id}`,\n            transformResponse: (r: string) =>\n              (JSON.parse(r) as Story)?.transcription?.chunks ?? [],\n          })\n        ).data\n      );\n\n      setStory((old_story) => {\n        const new_story =\n          old_story === undefined\n            ? undefined\n            : { ...old_story, transcription: { chunks: new_chunks } };\n        new_story && pushStoryChanges(new_story, story_id);\n        return new_story;\n      });\n    },\n    [story_id]\n  );\n\n  useEffect(() => {\n    axios\n      .request<Story>({\n        url: `http://${api_base_address}:8845/api/watch/edit/${story_id}`,\n        withCredentials: true,\n        transformResponse: (r: string) => JSON.parse(r),\n      })\n      .then((response) => {\n        setStory(response.data);\n        setChunks(\n          response.data?.transcription?.chunks ?? []\n        );\n      });\n  }, [story_id]);\n\n  const memoChunks = useMemo<\n    [Chunk[], (setter: (newState: Chunk[]) => Chunk[]) => void]\n  >(() => [chunks, setChunksWithUpdate], [chunks, setChunksWithUpdate]);\n\n  return {\n    storyTitle: story && story.title,\n    chunksState: memoChunks,\n  };\n};\n\nexport default useOurstoryApi;\n","// External Dependencies\nimport {\n  Box,\n  Container,\n  Divider,\n  List,\n  ListItem,\n  makeStyles,\n  Radio,\n  Typography,\n} from \"@material-ui/core\";\nimport LocalizedStrings from \"react-localization\";\nimport {\n  AccountCircle,\n  ArrowLeft,\n  ArrowRight,\n  Check,\n  Done,\n  Edit,\n} from \"@material-ui/icons\";\nimport React, { useMemo, useContext, useEffect, useState } from \"react\";\n\n// Internal Dependencies\nimport useSlideshow from \"../../hooks/useSlideshow\";\nimport { hasTranscription } from \"../../utils/chunkManipulation/chunkManipulation\";\nimport {\n  useDeleteReview,\n  useUpdateReview,\n  useUpdateTranscription,\n} from \"../../utils/ChunksContext/chunksActions\";\nimport chunksContext from \"../../utils/ChunksContext/chunksContext\";\nimport { api_base_address } from \"../../utils/getApiKey\";\nimport { Transcription } from \"../../utils/types\";\nimport BackButton from \"../BackButton/BackButton\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport IndabaButton from \"../IndabaButton/IndabaButton\";\nimport LoadingModal from \"../LoadingModal/LoadingModal\";\nimport OnboardingModal from \"../OnboardingModal/OnboardingModal\";\nimport ChunkCard from \"../SimpleCard/ChunkCard\";\nimport EditTranscriptionCard from \"../SimpleCard/EditTranscriptionCard\";\nimport Slideshow from \"../Slideshow/Slideshow\";\nimport { UserContext } from \"../UserProvider/UserProvider\";\nimport useVideoPlayerController from \"../VideoPlayer/Hooks/useVideoPlayerController\";\nimport VideoPlayer from \"../VideoPlayer/VideoPlayer\";\nimport WarningMessage from \"../WarningMessage/WarningMessage\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    instructionsOne:\n      \"You are about to review the transcriptions made on the video.\",\n    instructionsTwo:\n      \"For each chunk, select one of the transcriptions from the list. You can do this by clicking on the text or the check box to the left of the text.\",\n    instructionsThree:\n      \"You can also edit the transcriptions by clicking on the pencil button above the text.\",\n    editingTranscriptionWarningHeading: \"You are editing {0}'s transcription\",\n    nameTranscription: \"{0}: {1}\",\n    instructionsTitle: \"Reviewing Instructions\",\n  },\n});\n\ntype ReviewerProps = {\n  story_id: string;\n  atExit: () => void;\n  onboarding: {\n    showOnboardingModal: boolean;\n    dismissOnboardingModal: () => void;\n  };\n};\n\nconst useStyles = makeStyles({\n  doneButton: {\n    backgroundColor: \"green\",\n    color: \"white\",\n  },\n  cardContainer: {\n    marginTop: \"8px\",\n    marginBottom: \"8px\",\n    padding: \"0 8px 0 8px\",\n    width: \"100%\",\n  },\n});\n\nexport const Reviewer: React.FC<ReviewerProps> = ({\n  atExit,\n  story_id,\n  onboarding,\n}) => {\n  const { showOnboardingModal, dismissOnboardingModal } = onboarding;\n\n  const {\n    progressState,\n    splitState: [, setSplit],\n    controller: playerController,\n    playerRef,\n    duration,\n  } = useVideoPlayerController();\n\n  const { setProgressWithVideoUpdate } = progressState;\n\n  const [chunks, setChunks] = chunksContext.useChunksState();\n\n  const classes = useStyles();\n\n  const chunksToReview = chunks.filter(hasTranscription);\n\n  const { page, goTo, lastPage } = useSlideshow(chunksToReview);\n\n  const currentChunk = useMemo(\n    /**\n     * Here, if the chunks to review array is empty, we use a dummy chunk,\n     * as we are about to exit, and if we set it to undefined we will crash\n     */\n    () => chunksToReview[page],\n    [page, chunksToReview]\n  );\n\n  /*\n   * When the user navigates between chunks,\n   * this effect keeps the split and progress of\n   * the video player up to date\n   */\n  useEffect(() => {\n    setSplit({\n      start: currentChunk.starttimeseconds,\n      end: currentChunk.endtimeseconds,\n    });\n    setProgressWithVideoUpdate(currentChunk.starttimeseconds);\n  }, [page, chunks, currentChunk, setProgressWithVideoUpdate, setSplit]);\n\n  const updateReview = useUpdateReview(setChunks);\n  const deleteReview = useDeleteReview(setChunks);\n\n  const { userName } = useContext(UserContext);\n\n  /*\n   * This is the state for the new transcription being edited\n   * when the user decides to edit a transcription.\n   */\n  const [transcriptionEdit, setTranscriptionEdit] = useState(\"\");\n\n  /*\n   * State to keep track of which transcription is currently\n   * being edited\n   */\n  const [editingTranscription, setEditingTranscription] = useState<\n    undefined | Transcription\n  >(undefined);\n\n  useEffect(() => {\n    setTranscriptionEdit(\n      editingTranscription ? editingTranscription.content : \"\"\n    );\n  }, [editingTranscription]);\n\n  const updateTranscription = useUpdateTranscription(setChunks);\n\n  return (\n    <div>\n      <LoadingModal open={duration === 0} />\n      <Container style={{ marginTop: \"4px\" }}>\n        <BackButton action={atExit} />\n      </Container>\n      <OnboardingModal\n        show={showOnboardingModal}\n        dismiss={dismissOnboardingModal}\n        steps={[\n          strings.instructionsOne,\n          strings.instructionsTwo,\n          strings.instructionsThree,\n        ]}\n        title={<h2 style={{ margin: 0 }}>{strings.instructionsTitle}</h2>}\n        startButtonContent={<div>Start Reviewing</div>}\n      />\n      <CentralModal\n        open={editingTranscription !== undefined}\n        header={\n          <WarningMessage\n            message={\n              <div style={{ whiteSpace: \"pre\" }}>\n                {strings.formatString(\n                  strings.editingTranscriptionWarningHeading,\n                  <span\n                    style={{ textDecoration: \"underline\" }}\n                  >{`${editingTranscription?.creatorid}`}</span>\n                )}\n              </div>\n            }\n          />\n        }\n        exit={() => {\n          setEditingTranscription(undefined);\n        }}\n      >\n        <div style={{ position: \"relative\" }}>\n          <List style={{ maxHeight: \"300px\", overflow: \"scroll\" }}>\n            {currentChunk.transcriptions\n              .filter((t) => t.id !== editingTranscription?.id)\n              .map((t) => (\n                <ListItem style={{ display: \"flex\", whiteSpace: \"pre\" }}>\n                  {strings.formatString(\n                    strings.nameTranscription,\n                    <span\n                      style={{\n                        alignSelf: \"flex-start\",\n                        fontWeight: 600,\n                      }}\n                    >\n                      {t.creatorid}\n                    </span>,\n                    <div\n                      style={{ whiteSpace: \"pre\", overflowWrap: \"anywhere\" }}\n                    >\n                      {t.content}\n                    </div>\n                  )}\n                </ListItem>\n              ))}\n          </List>\n          <EditTranscriptionCard\n            transcriptionValue={transcriptionEdit}\n            onChange={setTranscriptionEdit}\n          />\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n            <IndabaButton\n              onClick={() => {\n                editingTranscription &&\n                  updateTranscription(\n                    currentChunk,\n                    transcriptionEdit,\n                    editingTranscription.creatorid\n                  );\n                setEditingTranscription(undefined);\n              }}\n              style={{\n                margin: \"8px\",\n                backgroundColor: \"green\",\n                position: \"relative\",\n                bottom: 0,\n                right: 0,\n              }}\n              disabled={transcriptionEdit === \"\"}\n            >\n              <Done />\n            </IndabaButton>\n          </div>\n        </div>\n      </CentralModal>\n      <Box>\n        <VideoPlayer\n          playerRef={playerRef}\n          progressState={progressState}\n          url={`http://${api_base_address}:8845/api/watch/getvideo/${story_id}`}\n          controller={playerController}\n        />\n      </Box>\n      <Container>\n        <Slideshow\n          currentPage={page}\n          onNavigate={goTo}\n          numberOfPages={chunksToReview.length}\n          onComplete={atExit}\n          style={{ width: \"100%\" }}\n          contentContainerStyle={{ margin: \"0 64px 0 64px\" }}\n          leftColumn={\n            <div\n              style={{\n                position: \"fixed\",\n                bottom: 0,\n                left: 0,\n                margin: \"16px\",\n                zIndex: 1,\n              }}\n            >\n              <IndabaButton onClick={() => goTo(\"prev\")}>\n                <ArrowLeft />\n              </IndabaButton>\n            </div>\n          }\n          rightColumn={\n            <div\n              style={{\n                position: \"fixed\",\n                bottom: 0,\n                right: 0,\n                margin: \"16px\",\n                zIndex: 1,\n              }}\n            >\n              <IndabaButton\n                onClick={() => (lastPage ? atExit() : goTo(\"next\"))}\n                style={{\n                  backgroundColor: lastPage ? \"green\" : \"#d9534f\",\n                }}\n              >\n                {lastPage ? <Check /> : <ArrowRight />}\n              </IndabaButton>\n            </div>\n          }\n        >\n          <ChunkCard chunk={currentChunk}>\n            {currentChunk.transcriptions.map(\n              (transcription) =>\n                transcription.content && (\n                  <Box key={transcription.id} className={classes.cardContainer}>\n                    <div\n                      style={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <div\n                        style={{\n                          fontSize: \"1.2rem\",\n                          display: \"flex\",\n                          justifyContent: \"center\",\n                          paddingLeft: \"10px\",\n                        }}\n                      >\n                        <AccountCircle />\n                        <div\n                          style={{\n                            marginLeft: \"4px\",\n                            overflowWrap: \"anywhere\",\n                          }}\n                        >\n                          {transcription.creatorid}\n                        </div>\n                      </div>\n                      <IndabaButton\n                        onClick={() => setEditingTranscription(transcription)}\n                        style={{\n                          padding: \"0px\",\n                          height: \"32px\",\n                          width: \"32px\",\n                          minWidth: \"32px\",\n                        }}\n                      >\n                        <Edit fontSize=\"small\" />\n                      </IndabaButton>\n                    </div>\n                    <div\n                      onClick={() =>\n                        userName &&\n                        (currentChunk.review?.selectedtranscription !==\n                        transcription.id\n                          ? updateReview(currentChunk, transcription, userName)\n                          : deleteReview(currentChunk))\n                      }\n                      style={{ display: \"flex\", flexDirection: \"row\" }}\n                    >\n                      <Radio\n                        checked={\n                          currentChunk.review?.selectedtranscription ===\n                          transcription.id\n                        }\n                        onChange={(_, checked) =>\n                          userName &&\n                          (checked\n                            ? updateReview(\n                                currentChunk,\n                                transcription,\n                                userName\n                              )\n                            : deleteReview(currentChunk))\n                        }\n                        style={{ backgroundColor: \"initial\" }}\n                      />\n                      <Typography\n                        variant=\"h6\"\n                        style={{\n                          padding: \"8px\",\n                          overflowWrap: \"anywhere\",\n                          whiteSpace: \"pre\",\n                        }}\n                      >\n                        {transcription.content}\n                      </Typography>\n                    </div>\n                    <Divider style={{ margin: \"16px 0 16px 0\" }} />\n                  </Box>\n                )\n            )}\n          </ChunkCard>\n        </Slideshow>\n      </Container>\n    </div>\n  );\n};\n","// External Dependencies\nimport {\n  Container,\n  Typography,\n  GridList,\n  GridListTile,\n  List,\n  ListItem,\n} from \"@material-ui/core\";\nimport React, { useMemo } from \"react\";\nimport LocalizedStrings from \"react-localization\";\n\n// Internal Dependencies\nimport {\n  listContributions,\n  getNameOf,\n  toShortTimeStamp,\n  parseTimeStamp,\n  secondsOf,\n} from \"../../utils/chunkManipulation/chunkManipulation\";\nimport { Contribution, Chunk } from \"../../utils/types\";\nimport CentralModal from \"../CentralModal/CentralModal\";\nimport FlatPaper from \"../FlatPaper/FlatPaper\";\nimport SimpleCard from \"../SimpleCard/SimpleCard\";\nimport { getUsersTranscription } from \"../Transcriber/hooks/useTranscriberState\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    yr: \"year\",\n    mt: \"month\",\n    dy: \"day\",\n    hr: \"hour\",\n    min: \"minute\",\n    sec: \"second\",\n    yrs: \"years\",\n    mts: \"months\",\n    dys: \"days\",\n    hrs: \"hours\",\n    mins: \"minutes\",\n    secs: \"seconds\",\n    periodAgo: \"{0} {1} ago\",\n    contributions: \"Contributions\",\n\n    created: \"Created\",\n    transcribed: \"Transcribed\",\n    reviewed: \"Reviewed\",\n    contributionDescription: '{0} the chunk \"{1}\" ({2}) {3}', // Example: Created the chunk \"chunk_name\" (00:00:00 - 01:01:01) 4 minutes ago\n  },\n});\n\nconst pluralize = (epoch: string) => {\n  return strings.getString(`${epoch}s`);\n};\n\nconst epochs = [\n  [\"yr\", 31536000],\n  [\"mt\", 2592000],\n  [\"dy\", 86400],\n  [\"hr\", 3600],\n  [\"min\", 60],\n  [\"sec\", 1],\n] as [string, number][];\n\nconst getDuration = (\n  timeAgoInSeconds: number\n): { interval: number; epoch: string } => {\n  for (let [name, seconds] of epochs) {\n    const interval = Math.floor(timeAgoInSeconds / +seconds);\n    if (interval >= 1) {\n      return {\n        interval: interval,\n        epoch: name,\n      };\n    }\n  }\n  return { interval: 0, epoch: strings.sec };\n};\n\nconst timeAgo = (date: Date) => {\n  const timeAgoInSeconds = Math.floor((+new Date() - +new Date(date)) / 1000);\n  const { interval, epoch } = getDuration(timeAgoInSeconds);\n  return epoch === strings.sec\n    ? strings.formatString(strings.periodAgo, \"Less than a\", \"minute\")\n    : strings.formatString(\n        strings.periodAgo,\n        interval.toString(),\n        `${interval === 1 ? strings.getString(epoch) : pluralize(epoch)}`\n      );\n};\n\nconst ContributionDescription: React.FC<{\n  contribution: Contribution;\n}> = ({ contribution }) => {\n  const { type, name, chunk } = contribution;\n  const typeDescription = (type: \"chunk\" | \"transcription\" | \"review\") => {\n    switch (type) {\n      case \"chunk\":\n        return strings.created;\n      case \"transcription\":\n        return strings.transcribed;\n      case \"review\":\n        return strings.reviewed;\n    }\n  };\n  return (\n    <span style={{ whiteSpace: \"pre\", display: \"flex\", flexWrap: \"wrap\" }}>\n      {strings.formatString(\n        strings.contributionDescription,\n        <span style={{ fontWeight: \"bold\" }}>{typeDescription(type)}</span>,\n        <div style={{ overflowWrap: \"anywhere\" }}>{getNameOf(chunk)}</div>,\n        <>\n          {`${toShortTimeStamp(\n            secondsOf(parseTimeStamp(chunk.starttimestamp))\n          )} - ${toShortTimeStamp(\n            secondsOf(parseTimeStamp(chunk.endtimestamp))\n          )}`}\n        </>,\n        <Typography\n          variant=\"subtitle2\"\n          style={{ marginLeft: \"4px\", fontWeight: 600 }}\n        >\n          {timeAgo(\n            type === \"chunk\"\n              ? chunk.updatedat\n              : type === \"transcription\"\n              ? getUsersTranscription(chunk, name)?.updatedat ?? new Date()\n              : chunk.review?.reviewedat ?? new Date()\n          )}\n        </Typography>\n      )}\n    </span>\n  );\n};\n\nconst ContributerListModal: React.FC<{\n  show: boolean;\n  exit: () => void;\n  chunks: Chunk[];\n}> = ({ show, exit, chunks }) => {\n  const contributers = useMemo(\n    () =>\n      Array.from(\n        listContributions(chunks).reduce(\n          (acc, contribution) =>\n            acc.get(contribution.name)\n              ? acc.set(\n                  contribution.name,\n                  acc.get(contribution.name)!.concat([contribution])\n                )\n              : acc.set(contribution.name, [contribution]),\n          new Map<string, Contribution[]>()\n        )\n      ),\n    [chunks]\n  );\n\n  return (\n    <CentralModal\n      header={\n        <Typography variant=\"h3\" style={{ fontWeight: \"lighter\" }}>\n          {strings.contributions}\n        </Typography>\n      }\n      open={show}\n      exit={exit}\n    >\n      <FlatPaper>\n        <Container\n          style={{ height: \"80vh\", width: \"90vw\", overflow: \"scroll\" }}\n        >\n          <GridList cols={1} cellHeight=\"auto\">\n            {contributers.map((contributer) => (\n              <GridListTile key={contributer[0]}>\n                <SimpleCard\n                  title={\n                    <div style={{ overflowWrap: \"anywhere\" }}>\n                      {contributer[0]}\n                    </div>\n                  }\n                >\n                  <List>\n                    {contributer[1].map((contribution) => (\n                      <ListItem\n                        key={`${contribution.chunk.id}${contribution.type}`}\n                      >\n                        <ContributionDescription contribution={contribution} />\n                      </ListItem>\n                    ))}\n                  </List>\n                </SimpleCard>\n              </GridListTile>\n            ))}\n          </GridList>\n        </Container>\n      </FlatPaper>\n    </CentralModal>\n  );\n};\n\nexport default ContributerListModal;\n","// External Dependencies\nimport React, { useMemo, useState, useCallback } from \"react\";\nimport LocalizedStrings from \"react-localization\";\n\n// Internal Dependencies\nimport ChunkEditor from \"../ChunkEditor/ChunkEditor\";\nimport Dashboard from \"../Dashboard/Dashboard\";\nimport Header from \"../Header/Header\";\nimport useSteps from \"./hooks/useSteps\";\nimport View from \"./Views\";\nimport { useStoryId } from \"../../utils/getId\";\nimport Transcriber from \"../Transcriber/Transcriber\";\nimport UserProvider from \"../UserProvider/UserProvider\";\nimport useOurstoryApi from \"./hooks/useOurstoryApi\";\nimport { Reviewer } from \"../Reviewer/Reviewer\";\nimport chunksContext from \"../../utils/ChunksContext/chunksContext\";\nimport {\n  countChunksWithTranscription,\n  countReviewedChunks,\n  getLastEndTimeSeconds,\n} from \"../../utils/chunkManipulation/chunkManipulation\";\nimport useToggle from \"../../hooks/useToggle\";\nimport ContributerListModal from \"../ContributersModal/ContributersModal\";\nimport useLocalStorage from \"../../hooks/useLocalStorage\";\n\nconst strings = new LocalizedStrings({\n  en: {\n    loading: \"Loading\",\n    viewInstructions: \"View Instructions\",\n    chunking: \"Chunking\",\n    dashboard: \"Dashboard\",\n    reviewing: \"Reviewing\",\n    transcribing: \"Transcribing\",\n    showContributions: \"Show Contributions\"\n  },\n});\n\nconst getTitle = (view: View) => {\n  switch (view) {\n    case View.Chunking:\n      return strings.chunking;\n    case View.Dashboard:\n      return strings.dashboard;\n    case View.Reviewing:\n      return strings.reviewing;\n    case View.Transcribing:\n      return strings.transcribing;\n  }\n};\n\nconst App: React.FC<{}> = () => {\n  const [view, setView] = useState<View>(View.Dashboard);\n  const { ChunksProvider } = chunksContext;\n\n  const story_id = useStoryId();\n\n  const {\n    storyTitle,\n    chunksState: [chunks, setChunks],\n  } = useOurstoryApi(story_id);\n\n  const chunkingProgress = useMemo(() => getLastEndTimeSeconds(chunks), [\n    chunks,\n  ]);\n  const transcriptionProgress = useMemo(\n    () =>\n      chunks.length ? countChunksWithTranscription(chunks) / chunks.length : 0,\n    [chunks]\n  );\n  const reviewProgress = useMemo(\n    () => (chunks.length ? countReviewedChunks(chunks) / chunks.length : 0),\n    [chunks]\n  );\n\n  const steps = useSteps(setView, [\n    { progress: chunkingProgress * 100, enabled: true },\n    {\n      progress: transcriptionProgress * 100,\n      enabled: chunkingProgress > 0,\n    },\n    {\n      progress: reviewProgress * 100,\n      enabled: transcriptionProgress > 0,\n    },\n  ]);\n\n  const [showContributers, toggleShowContributers] = useToggle(false);\n\n  const [\n    showChunkEditorOnboarding,\n    setShowChunkEditorOnboarding,\n  ] = useLocalStorage(\"showChunkEditorOnboardingModal\", \"true\");\n  const [\n    showTranscriberOnboarding,\n    setShowTranscriberOnboarding,\n  ] = useLocalStorage(\"showTranscriberOnboardingModal\", \"true\");\n\n  const [showReviewerOnboardring, setShowReviewerOnboarding] = useLocalStorage(\n    \"showReviewerOnboardingModal\",\n    \"true\"\n  );\n\n  const logOutAction = () => {\n    setShowChunkEditorOnboarding(\"true\");\n    setShowTranscriberOnboarding(\"true\");\n    setShowReviewerOnboarding(\"true\");\n  };\n\n  const exit = useCallback(() => setView(View.Dashboard), []);\n\n  const contextMenuItems = useMemo(\n    () =>\n      [\n        {\n          content: <div>{strings.showContributions}</div>,\n          handler: toggleShowContributers,\n        },\n      ].concat(\n        view === View.Chunking\n          ? {\n              content: <div>{strings.viewInstructions}</div>,\n              handler: (): void => {\n                setShowChunkEditorOnboarding(\"true\");\n              },\n            }\n          : view === View.Reviewing\n          ? {\n              content: <div>{strings.viewInstructions}</div>,\n              handler: (): void => {\n                setShowReviewerOnboarding(\"true\");\n              },\n            }\n          : []\n      ),\n    [\n      view,\n      setShowChunkEditorOnboarding,\n      setShowReviewerOnboarding,\n      toggleShowContributers,\n    ]\n  );\n\n  return (\n    <ChunksProvider state={[chunks, setChunks]}>\n      <UserProvider>\n        <main>\n          <ContributerListModal\n            chunks={chunks}\n            show={showContributers}\n            exit={toggleShowContributers}\n          />\n          <Header\n            title={getTitle(view)}\n            hidden={view === View.Transcribing}\n            contextMenuItems={contextMenuItems}\n          >\n            {view === View.Dashboard ? (\n              <Dashboard\n                steps={steps}\n                storyName={storyTitle ? storyTitle : strings.loading}\n                logOutAction={logOutAction}\n              />\n            ) : view === View.Chunking ? (\n              <ChunkEditor\n                story_id={story_id}\n                atExit={exit}\n                onboarding={{\n                  showOnboardingModal: showChunkEditorOnboarding === \"true\",\n                  dismissOnboardingModal: () =>\n                    setShowChunkEditorOnboarding(\"false\"),\n                }}\n              />\n            ) : view === View.Transcribing ? (\n              <Transcriber\n                story_id={story_id}\n                atExit={exit}\n                onboarding={{\n                  showOnboardingModal: showTranscriberOnboarding === \"true\",\n                  dismissOnboardingModal: () =>\n                    setShowTranscriberOnboarding(\"false\"),\n                }}\n              />\n            ) : view === View.Reviewing ? (\n              <Reviewer\n                atExit={exit}\n                story_id={story_id}\n                onboarding={{\n                  showOnboardingModal: showReviewerOnboardring === \"true\",\n                  dismissOnboardingModal: () =>\n                    setShowReviewerOnboarding(\"false\"),\n                }}\n              />\n            ) : null}\n          </Header>\n        </main>\n      </UserProvider>\n    </ChunksProvider>\n  );\n};\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\nexport const useStoryId = () => {\n  const [storyId, setStoryId] = useState(\"\");\n\n  useEffect(() => {\n    setStoryId(window.location.href.split('/')[4].split('?')[0]);\n  }, []);\n\n  return storyId\n};\n\n// export default story_id;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}